
echo $1
/tmp/clevor/tests/

mkdir $1 || exit 1
cd $1

nix build git+https://git.lix.systems/lix-project/lix?rev=844feb17b562b7b9b59e73e35b73a05f8a531313 -o lix >& /dev/null || exit 1
nix build github:NixOS/nix/16e946bfb1917c67b8add9186612596b4423cacd -o nix >& /dev/null || exit 1
# narz fails in f790364c93142affa3cc699365545d6a11916a76
nix build git+https://git.sr.ht/~watersucks/narz?rev=760736b98e08c7c741838f5ad020d6d2e33b5e57 -o narz >& /dev/null || exit 1
nix build git+https://codeberg.org/clevor/narser?rev=42f488fbea6497d9eb0ccb72469f768e4e56f18f -o narser >& /dev/null || exit 1
nix build gitlab:abstract-binary/nix-nar-rs/c8d9250b9be837abafa0046cb9c2a852b846da6a -o nix-nar >& /dev/null || exit 1

git clone https://github.com/torvalds/linux --depth=1 -q
cd linux
git log | head
commit 3a8660878839faadb4f1a6dd72c3179c1df56787
Author: Linus Torvalds <torvalds@linux-foundation.org>
Date:   Sun Oct 12 13:42:36 2025 -0700

    Linux 6.18-rc1
cd ..

nix nar pack linux > linux.nar

cmp <(./nix/bin/nix nar pack linux) <(./lix/bin/nix nar dump-path linux)
cmp <(./nix/bin/nix nar pack linux) <(./narser/bin/narser pack linux) || exit 1
cmp <(./nix/bin/nix nar pack linux) <(./nix-nar/bin/nix-nar dump-path linux)

cmp <(./nix/bin/nix nar cat linux.nar /README) <(./lix/bin/nix nar cat linux.nar /README)
cmp <(./nix/bin/nix nar cat linux.nar /README) <(./narser/bin/narser cat linux.nar /README) || exit 1
cmp <(./nix/bin/nix nar cat linux.nar /README) <(./narz/bin/narz cat linux.nar /README)
cmp <(./nix/bin/nix nar cat linux.nar /README) <(./nix-nar/bin/nix-nar cat linux.nar /README)

cmp <(./nix/bin/nix nar ls linux.nar /) <(./lix/bin/nix nar ls linux.nar /)
cmp <(./nix/bin/nix nar ls linux.nar /) <(./narser/bin/narser ls linux.nar /) || exit 1
cmp <(./nix/bin/nix nar ls linux.nar / 2> /dev/null) <(./narz/bin/narz ls linux.nar / 2> /dev/null)
/dev/fd/63 /dev/fd/62 differ: byte 1, line 1
cmp <(./nix/bin/nix nar ls linux.nar /) <(./nix-nar/bin/nix-nar ls linux.nar /)

cmp <(./nix/bin/nix nar ls linux.nar / -l) <(./lix/bin/nix nar ls linux.nar / -l)
cmp <(./nix/bin/nix nar ls linux.nar / -l) <(./narser/bin/narser ls linux.nar / -l) || exit 1
cmp <(./nix/bin/nix nar ls linux.nar / -l 2> /dev/null) <(./narz/bin/narz ls linux.nar / -l 2> /dev/null)
/dev/fd/63 /dev/fd/62 differ: byte 1, line 1
cmp <(./nix/bin/nix nar ls linux.nar / -l) <(./nix-nar/bin/nix-nar ls linux.nar / -l)

cmp <(./nix/bin/nix nar ls linux.nar / -lR) <(./lix/bin/nix nar ls linux.nar / -lR)
cmp <(./nix/bin/nix nar ls linux.nar / -lR) <(./narser/bin/narser ls linux.nar / -lR) || exit 1
cmp <(./nix/bin/nix nar ls linux.nar / -lR 2> /dev/null) <(./narz/bin/narz ls linux.nar / -lr 2> /dev/null)
/dev/fd/63 /dev/fd/62 differ: byte 3, line 1
cmp <(./nix/bin/nix nar ls linux.nar / -lR) <(./nix-nar/bin/nix-nar ls linux.nar / -lR)

cmp <(./nix/bin/nix nar ls linux.nar / -R) <(./lix/bin/nix nar ls linux.nar / -R)
cmp <(./nix/bin/nix nar ls linux.nar / -R) <(./narser/bin/narser ls linux.nar / -R) || exit 1
cmp <(./nix/bin/nix nar ls linux.nar / -R 2> /dev/null) <(./narz/bin/narz ls linux.nar / -r 2> /dev/null)
/dev/fd/63 /dev/fd/62 differ: byte 2, line 1
cmp <(./nix/bin/nix nar ls linux.nar / -R) <(./nix-nar/bin/nix-nar ls linux.nar / -R)


poop -d 60000 "./nix/bin/nix nar pack linux" "./lix/bin/nix nar dump-path linux" "./narser/bin/narser pack linux" "./nix-nar/bin/nix-nar dump-path linux"
Benchmark 1 (32 runs): ./nix/bin/nix nar pack linux
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          1.91s  Â± 48.8ms                              1.87s  â€¦ 2.03s                                     6 (19%)        0%
  peak_rss           40.2MB Â±  134KB                              39.9MB â€¦ 40.5MB                                    0 ( 0%)        0%
  cpu_cycles         3.50G  Â±  163M                               3.38G  â€¦ 3.88G                                     6 (19%)        0%
  instructions       7.44G  Â±  136K                               7.44G  â€¦ 7.44G                                     0 ( 0%)        0%
  cache_references   51.7M  Â± 3.23M                               45.8M  â€¦ 59.0M                                     0 ( 0%)        0%
  cache_misses       4.75M  Â± 49.4K                               4.65M  â€¦ 4.86M                                     0 ( 0%)        0%
  branch_misses      11.8M  Â± 3.70M                               8.95M  â€¦ 20.8M                                     6 (19%)        0%
Benchmark 2 (51 runs): ./lix/bin/nix nar dump-path linux
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          1.18s  Â± 16.0ms                              1.16s  â€¦ 1.21s                                     0 ( 0%)        âš¡- 38.4% Â±  0.8%
  peak_rss           33.6MB Â±  154KB                              33.2MB â€¦ 34.0MB                                    0 ( 0%)        âš¡- 16.5% Â±  0.2%
  cpu_cycles         1.39G  Â± 47.9M                               1.34G  â€¦ 1.50G                                     0 ( 0%)        âš¡- 60.3% Â±  1.4%
  instructions       1.84G  Â± 8.94K                               1.84G  â€¦ 1.84G                                     0 ( 0%)        âš¡- 75.3% Â±  0.0%
  cache_references   87.5M  Â± 3.56M                               79.4M  â€¦ 98.0M                                     1 ( 2%)        ðŸ’©+ 69.1% Â±  3.0%
  cache_misses        837K  Â± 28.6K                                798K  â€¦  959K                                     2 ( 4%)        âš¡- 82.4% Â±  0.4%
  branch_misses      4.48M  Â± 1.02M                               3.29M  â€¦ 6.53M                                     0 ( 0%)        âš¡- 62.2% Â±  9.2%
Benchmark 3 (81 runs): ./narser/bin/narser pack linux
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           746ms Â± 3.56ms                               742ms â€¦  756ms                                    2 ( 2%)        âš¡- 61.0% Â±  0.6%
  peak_rss           1.19MB Â± 20.5KB                              1.06MB â€¦ 1.19MB                                    2 ( 2%)        âš¡- 97.0% Â±  0.1%
  cpu_cycles          237M  Â± 1.98M                                234M  â€¦  243M                                     1 ( 1%)        âš¡- 93.2% Â±  1.0%
  instructions        421M  Â± 12.8                                 421M  â€¦  421M                                     0 ( 0%)        âš¡- 94.3% Â±  0.0%
  cache_references   6.55M  Â±  889K                               5.60M  â€¦ 9.86M                                     5 ( 6%)        âš¡- 87.3% Â±  1.5%
  cache_misses        211K  Â± 13.7K                                183K  â€¦  286K                                     1 ( 1%)        âš¡- 95.6% Â±  0.2%
  branch_misses       748K  Â± 5.67K                                739K  â€¦  769K                                     2 ( 2%)        âš¡- 93.7% Â±  6.8%
Benchmark 4 (39 runs): ./nix-nar/bin/nix-nar dump-path linux
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          1.56s  Â± 7.84ms                              1.55s  â€¦ 1.58s                                     0 ( 0%)        âš¡- 18.5% Â±  0.8%
  peak_rss           2.90MB Â± 88.7KB                              2.72MB â€¦ 3.05MB                                    0 ( 0%)        âš¡- 92.8% Â±  0.1%
  cpu_cycles          552M  Â± 7.79M                                539M  â€¦  573M                                     0 ( 0%)        âš¡- 84.3% Â±  1.5%
  instructions        833M  Â±  261K                                832M  â€¦  834M                                     2 ( 5%)        âš¡- 88.8% Â±  0.0%
  cache_references   10.7M  Â±  649K                               9.44M  â€¦ 12.5M                                     1 ( 3%)        âš¡- 79.3% Â±  2.0%
  cache_misses        517K  Â± 17.1K                                475K  â€¦  548K                                     0 ( 0%)        âš¡- 89.1% Â±  0.4%
  branch_misses      2.87M  Â±  165K                               2.59M  â€¦ 3.35M                                     1 ( 3%)        âš¡- 75.8% Â± 10.0%

poop -d 60000 "./nix/bin/nix nar ls linux.nar /" "./lix/bin/nix nar ls linux.nar /" "./narser/bin/narser ls linux.nar /" "./nix-nar/bin/nix-nar ls linux.nar /" "./narz/bin/narz ls linux.nar /"
Benchmark 1 (24 runs): ./nix/bin/nix nar ls linux.nar /
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          2.52s  Â± 9.81ms                              2.50s  â€¦ 2.54s                                     0 ( 0%)        0%
  peak_rss           3.77GB Â±  111KB                              3.77GB â€¦ 3.77GB                                    0 ( 0%)        0%
  cpu_cycles         2.47G  Â± 13.9M                               2.45G  â€¦ 2.51G                                     1 ( 4%)        0%
  instructions       1.15G  Â±  300K                               1.14G  â€¦ 1.15G                                     0 ( 0%)        0%
  cache_references    132M  Â± 2.33M                                128M  â€¦  136M                                     0 ( 0%)        0%
  cache_misses       71.4M  Â±  221K                               70.9M  â€¦ 71.9M                                     1 ( 4%)        0%
  branch_misses      1.98M  Â±  250K                               1.74M  â€¦ 2.75M                                     3 (13%)        0%
Benchmark 2 (23 runs): ./lix/bin/nix nar ls linux.nar /
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          2.64s  Â± 12.2ms                              2.62s  â€¦ 2.67s                                     0 ( 0%)        ðŸ’©+  4.9% Â±  0.3%
  peak_rss           3.75GB Â±  137KB                              3.75GB â€¦ 3.75GB                                    0 ( 0%)          -  0.4% Â±  0.0%
  cpu_cycles         2.94G  Â± 20.1M                               2.91G  â€¦ 2.97G                                     0 ( 0%)        ðŸ’©+ 18.8% Â±  0.4%
  instructions       2.18G  Â± 9.87K                               2.18G  â€¦ 2.18G                                     0 ( 0%)        ðŸ’©+ 90.2% Â±  0.0%
  cache_references    136M  Â± 2.13M                                132M  â€¦  139M                                     0 ( 0%)        ðŸ’©+  2.6% Â±  1.0%
  cache_misses       70.6M  Â±  256K                               69.8M  â€¦ 70.9M                                     1 ( 4%)          -  1.2% Â±  0.2%
  branch_misses      4.63M  Â±  473K                               4.08M  â€¦ 5.48M                                     0 ( 0%)        ðŸ’©+133.9% Â± 11.2%
Benchmark 3 (586 runs): ./narser/bin/narser ls linux.nar /
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           102ms Â± 1.68ms                               101ms â€¦  113ms                                   75 (13%)        âš¡- 95.9% Â±  0.0%
  peak_rss           33.4MB Â± 20.7KB                              33.3MB â€¦ 33.4MB                                   15 ( 3%)        âš¡- 99.1% Â±  0.0%
  cpu_cycles         52.7M  Â±  758K                               52.0M  â€¦ 57.8M                                    66 (11%)        âš¡- 97.9% Â±  0.0%
  instructions       93.3M  Â± 6.35                                93.3M  â€¦ 93.3M                                    26 ( 4%)        âš¡- 91.9% Â±  0.0%
  cache_references   1.12M  Â± 38.3K                               1.05M  â€¦ 1.33M                                    12 ( 2%)        âš¡- 99.2% Â±  0.1%
  cache_misses       15.0K  Â± 1.21K                               13.1K  â€¦ 21.9K                                    40 ( 7%)        âš¡-100.0% Â±  0.0%
  branch_misses       342K  Â± 8.44K                                336K  â€¦  411K                                    68 (12%)        âš¡- 82.7% Â±  1.0%
Benchmark 4 (112 runs): ./nix-nar/bin/nix-nar ls linux.nar /
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           536ms Â± 3.52ms                               530ms â€¦  548ms                                    2 ( 2%)        âš¡- 78.7% Â±  0.1%
  peak_rss           2.40MB Â± 58.7KB                              2.28MB â€¦ 2.56MB                                    0 ( 0%)        âš¡- 99.9% Â±  0.0%
  cpu_cycles          952M  Â± 9.48M                                937M  â€¦  988M                                     5 ( 4%)        âš¡- 61.5% Â±  0.2%
  instructions       1.52G  Â± 80.1K                               1.52G  â€¦ 1.52G                                     0 ( 0%)        ðŸ’©+ 32.3% Â±  0.0%
  cache_references   10.6M  Â± 3.77M                               5.60M  â€¦ 27.9M                                     5 ( 4%)        âš¡- 92.0% Â±  1.2%
  cache_misses       81.2K  Â± 8.87K                               66.1K  â€¦  103K                                     0 ( 0%)        âš¡- 99.9% Â±  0.1%
  branch_misses      1.31M  Â±  218K                               1.03M  â€¦ 2.18M                                     4 ( 4%)        âš¡- 33.7% Â±  5.0%
Benchmark 5 (17 runs): ./narz/bin/narz ls linux.nar /
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          3.69s  Â± 9.25ms                              3.68s  â€¦ 3.72s                                     0 ( 0%)        ðŸ’©+ 46.6% Â±  0.2%
  peak_rss           1.85GB Â± 66.5KB                              1.85GB â€¦ 1.85GB                                    0 ( 0%)        âš¡- 51.0% Â±  0.0%
  cpu_cycles          883M  Â± 1.76M                                879M  â€¦  887M                                     2 (12%)        âš¡- 64.3% Â±  0.3%
  instructions        870M  Â±  395                                 870M  â€¦  870M                                     0 ( 0%)        âš¡- 24.1% Â±  0.0%
  cache_references   4.61M  Â±  302K                               4.36M  â€¦ 5.73M                                     1 ( 6%)        âš¡- 96.5% Â±  0.9%
  cache_misses        128K  Â± 6.24K                                117K  â€¦  146K                                     2 (12%)        âš¡- 99.8% Â±  0.2%
  branch_misses      1.90M  Â± 37.8K                               1.81M  â€¦ 1.95M                                     0 ( 0%)          -  4.0% Â±  6.3%

poop -d 60000 "./nix/bin/nix nar ls linux.nar / -R" "./lix/bin/nix nar ls linux.nar / -R" "./narser/bin/narser ls linux.nar / -R" "./nix-nar/bin/nix-nar ls linux.nar / -R" "./narz/bin/narz ls linux.nar / -r"
Benchmark 1 (22 runs): ./nix/bin/nix nar ls linux.nar / -R
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          2.75s  Â± 14.2ms                              2.73s  â€¦ 2.78s                                     0 ( 0%)        0%
  peak_rss           3.77GB Â±  140KB                              3.77GB â€¦ 3.77GB                                    0 ( 0%)        0%
  cpu_cycles         2.87G  Â± 26.3M                               2.84G  â€¦ 2.93G                                     0 ( 0%)        0%
  instructions       1.85G  Â±  440K                               1.85G  â€¦ 1.85G                                     0 ( 0%)        0%
  cache_references    141M  Â± 2.72M                                138M  â€¦  147M                                     0 ( 0%)        0%
  cache_misses       74.0M  Â±  268K                               73.7M  â€¦ 74.8M                                     2 ( 9%)        0%
  branch_misses      4.55M  Â±  608K                               3.93M  â€¦ 5.98M                                     0 ( 0%)        0%
Benchmark 2 (21 runs): ./lix/bin/nix nar ls linux.nar / -R
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          2.91s  Â± 13.8ms                              2.88s  â€¦ 2.94s                                     0 ( 0%)        ðŸ’©+  5.5% Â±  0.3%
  peak_rss           3.75GB Â±  164KB                              3.75GB â€¦ 3.75GB                                    0 ( 0%)          -  0.4% Â±  0.0%
  cpu_cycles         3.42G  Â± 35.4M                               3.37G  â€¦ 3.51G                                     0 ( 0%)        ðŸ’©+ 18.9% Â±  0.7%
  instructions       3.03G  Â±  533K                               3.03G  â€¦ 3.03G                                     1 ( 5%)        ðŸ’©+ 63.8% Â±  0.0%
  cache_references    136M  Â± 3.04M                                133M  â€¦  144M                                     1 ( 5%)        âš¡-  3.4% Â±  1.3%
  cache_misses       71.4M  Â±  209K                               71.2M  â€¦ 72.0M                                     1 ( 5%)        âš¡-  3.5% Â±  0.2%
  branch_misses      6.67M  Â±  778K                               5.75M  â€¦ 8.66M                                     0 ( 0%)        ðŸ’©+ 46.7% Â±  9.4%
Benchmark 3 (483 runs): ./narser/bin/narser ls linux.nar / -R
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           124ms Â± 1.72ms                               123ms â€¦  143ms                                   46 (10%)        âš¡- 95.5% Â±  0.1%
  peak_rss           33.4MB Â± 19.6KB                              33.3MB â€¦ 33.4MB                                   11 ( 2%)        âš¡- 99.1% Â±  0.0%
  cpu_cycles          129M  Â± 2.68M                                126M  â€¦  174M                                   107 (22%)        âš¡- 95.5% Â±  0.1%
  instructions        268M  Â± 6.11                                 268M  â€¦  268M                                     8 ( 2%)        âš¡- 85.5% Â±  0.0%
  cache_references   2.22M  Â± 38.3K                               2.08M  â€¦ 2.36M                                    11 ( 2%)        âš¡- 98.4% Â±  0.2%
  cache_misses        930K  Â± 12.8K                                837K  â€¦  992K                                    29 ( 6%)        âš¡- 98.7% Â±  0.0%
  branch_misses       495K  Â± 7.25K                                488K  â€¦  557K                                    54 (11%)        âš¡- 89.1% Â±  1.2%
Benchmark 4 (91 runs): ./nix-nar/bin/nix-nar ls linux.nar / -R
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           660ms Â± 3.71ms                               653ms â€¦  676ms                                    2 ( 2%)        âš¡- 76.0% Â±  0.1%
  peak_rss           14.0MB Â± 78.2KB                              13.8MB â€¦ 14.1MB                                    0 ( 0%)        âš¡- 99.6% Â±  0.0%
  cpu_cycles         1.15G  Â± 9.86M                               1.13G  â€¦ 1.18G                                     3 ( 3%)        âš¡- 60.0% Â±  0.2%
  instructions       1.96G  Â± 78.0K                               1.96G  â€¦ 1.96G                                     0 ( 0%)        ðŸ’©+  6.2% Â±  0.0%
  cache_references   15.4M  Â± 3.37M                               10.6M  â€¦ 25.3M                                     1 ( 1%)        âš¡- 89.1% Â±  1.1%
  cache_misses        213K  Â± 10.0K                                192K  â€¦  240K                                     0 ( 0%)        âš¡- 99.7% Â±  0.1%
  branch_misses      1.98M  Â±  218K                               1.53M  â€¦ 2.65M                                     2 ( 2%)        âš¡- 56.5% Â±  3.4%
Benchmark 5 (16 runs): ./narz/bin/narz ls linux.nar / -r
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          3.91s  Â± 7.39ms                              3.89s  â€¦ 3.92s                                     0 ( 0%)        ðŸ’©+ 41.9% Â±  0.3%
  peak_rss           1.85GB Â± 87.5KB                              1.85GB â€¦ 1.85GB                                    0 ( 0%)        âš¡- 51.0% Â±  0.0%
  cpu_cycles          974M  Â± 2.67M                                970M  â€¦  978M                                     0 ( 0%)        âš¡- 66.1% Â±  0.5%
  instructions        951M  Â±  371                                 951M  â€¦  951M                                     0 ( 0%)        âš¡- 48.6% Â±  0.0%
  cache_references   5.70M  Â± 84.1K                               5.54M  â€¦ 5.80M                                     0 ( 0%)        âš¡- 96.0% Â±  1.0%
  cache_misses        882K  Â± 4.80K                                875K  â€¦  889K                                     0 ( 0%)        âš¡- 98.8% Â±  0.2%
  branch_misses      2.26M  Â± 41.5K                               2.19M  â€¦ 2.31M                                     0 ( 0%)        âš¡- 50.2% Â±  6.9%

poop -d 60000 "./nix/bin/nix nar ls linux.nar / -Rl" "./lix/bin/nix nar ls linux.nar / -Rl" "./narser/bin/narser ls linux.nar / -Rl" "./nix-nar/bin/nix-nar ls linux.nar / -Rl" "./narz/bin/narz ls linux.nar / -rl"
Benchmark 1 (22 runs): ./nix/bin/nix nar ls linux.nar / -Rl
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          2.85s  Â± 20.6ms                              2.82s  â€¦ 2.90s                                     0 ( 0%)        0%
  peak_rss           3.77GB Â±  139KB                              3.77GB â€¦ 3.77GB                                    0 ( 0%)        0%
  cpu_cycles         3.20G  Â± 51.6M                               3.15G  â€¦ 3.31G                                     0 ( 0%)        0%
  instructions       2.55G  Â±  683K                               2.54G  â€¦ 2.55G                                     0 ( 0%)        0%
  cache_references    143M  Â± 3.15M                                139M  â€¦  153M                                     1 ( 5%)        0%
  cache_misses       74.1M  Â±  188K                               73.7M  â€¦ 74.4M                                     0 ( 0%)        0%
  branch_misses      5.49M  Â± 1.12M                               4.39M  â€¦ 7.72M                                     0 ( 0%)        0%
Benchmark 2 (20 runs): ./lix/bin/nix nar ls linux.nar / -Rl
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          3.03s  Â± 59.5ms                              3.00s  â€¦ 3.25s                                     2 (10%)        ðŸ’©+  6.2% Â±  1.0%
  peak_rss           3.75GB Â±  119KB                              3.75GB â€¦ 3.75GB                                    2 (10%)          -  0.4% Â±  0.0%
  cpu_cycles         3.81G  Â± 49.6M                               3.77G  â€¦ 3.98G                                     3 (15%)        ðŸ’©+ 19.0% Â±  1.0%
  instructions       3.92G  Â±  759K                               3.92G  â€¦ 3.92G                                     0 ( 0%)        ðŸ’©+ 54.0% Â±  0.0%
  cache_references    138M  Â± 3.76M                                134M  â€¦  150M                                     1 ( 5%)        âš¡-  3.3% Â±  1.5%
  cache_misses       71.7M  Â±  606K                               71.2M  â€¦ 73.8M                                     2 (10%)        âš¡-  3.3% Â±  0.4%
  branch_misses      7.09M  Â±  539K                               6.30M  â€¦ 8.73M                                     1 ( 5%)        ðŸ’©+ 29.1% Â± 10.2%
Benchmark 3 (467 runs): ./narser/bin/narser ls linux.nar / -Rl
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           129ms Â± 5.41ms                               126ms â€¦  193ms                                   47 (10%)        âš¡- 95.5% Â±  0.1%
  peak_rss           33.4MB Â± 22.4KB                              33.3MB â€¦ 33.4MB                                   14 ( 3%)        âš¡- 99.1% Â±  0.0%
  cpu_cycles          143M  Â± 9.39M                                138M  â€¦  236M                                    37 ( 8%)        âš¡- 95.5% Â±  0.2%
  instructions        307M  Â± 8.94                                 307M  â€¦  307M                                    13 ( 3%)        âš¡- 87.9% Â±  0.0%
  cache_references   2.34M  Â± 70.4K                               2.19M  â€¦ 2.98M                                    19 ( 4%)        âš¡- 98.4% Â±  0.2%
  cache_misses        942K  Â± 29.1K                                845K  â€¦ 1.13M                                    55 (12%)        âš¡- 98.7% Â±  0.0%
  branch_misses       542K  Â± 8.99K                                533K  â€¦  614K                                    53 (11%)        âš¡- 90.1% Â±  1.8%
Benchmark 4 (88 runs): ./nix-nar/bin/nix-nar ls linux.nar / -Rl
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           688ms Â± 7.15ms                               678ms â€¦  723ms                                    6 ( 7%)        âš¡- 75.9% Â±  0.2%
  peak_rss           14.0MB Â± 78.6KB                              13.8MB â€¦ 14.1MB                                    0 ( 0%)        âš¡- 99.6% Â±  0.0%
  cpu_cycles         1.25G  Â± 17.4M                               1.22G  â€¦ 1.31G                                     8 ( 9%)        âš¡- 61.0% Â±  0.4%
  instructions       2.23G  Â±  833K                               2.23G  â€¦ 2.23G                                     2 ( 2%)        âš¡- 12.5% Â±  0.0%
  cache_references   14.9M  Â± 2.93M                               10.9M  â€¦ 27.2M                                     3 ( 3%)        âš¡- 89.5% Â±  1.0%
  cache_misses        338K  Â± 20.0K                                317K  â€¦  482K                                     2 ( 2%)        âš¡- 99.5% Â±  0.1%
  branch_misses      2.17M  Â±  316K                               1.66M  â€¦ 3.36M                                     7 ( 8%)        âš¡- 60.5% Â±  4.9%
Benchmark 5 (12 runs): ./narz/bin/narz ls linux.nar / -rl
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          5.12s  Â± 7.75ms                              5.10s  â€¦ 5.13s                                     0 ( 0%)        ðŸ’©+ 79.2% Â±  0.4%
  peak_rss           1.85GB Â± 56.9KB                              1.85GB â€¦ 1.85GB                                    2 (17%)        âš¡- 51.0% Â±  0.0%
  cpu_cycles         1.15G  Â± 2.83M                               1.15G  â€¦ 1.16G                                     0 ( 0%)        âš¡- 64.1% Â±  1.0%
  instructions       1.12G  Â±  223                                1.12G  â€¦ 1.12G                                     0 ( 0%)        âš¡- 56.1% Â±  0.0%
  cache_references   6.00M  Â±  117K                               5.83M  â€¦ 6.18M                                     0 ( 0%)        âš¡- 95.8% Â±  1.3%
  cache_misses        883K  Â± 3.92K                                875K  â€¦  889K                                     0 ( 0%)        âš¡- 98.8% Â±  0.2%
  branch_misses      2.64M  Â± 82.8K                               2.54M  â€¦ 2.83M                                     0 ( 0%)        âš¡- 51.9% Â± 12.1%

poop -d 60000 "./nix/bin/nix nar ls linux.nar / -l" "./lix/bin/nix nar ls linux.nar / -l" "./narser/bin/narser ls linux.nar / -l" "./nix-nar/bin/nix-nar ls linux.nar / -l" "./narz/bin/narz ls linux.nar / -l"
Benchmark 1 (24 runs): ./nix/bin/nix nar ls linux.nar / -l
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          2.52s  Â± 9.31ms                              2.50s  â€¦ 2.55s                                     1 ( 4%)        0%
  peak_rss           3.77GB Â±  171KB                              3.77GB â€¦ 3.77GB                                    3 (13%)        0%
  cpu_cycles         2.47G  Â± 14.0M                               2.46G  â€¦ 2.50G                                     0 ( 0%)        0%
  instructions       1.15G  Â±  278K                               1.15G  â€¦ 1.15G                                     0 ( 0%)        0%
  cache_references    133M  Â± 3.56M                                128M  â€¦  143M                                     1 ( 4%)        0%
  cache_misses       71.5M  Â±  261K                               70.5M  â€¦ 72.0M                                     4 (17%)        0%
  branch_misses      2.03M  Â±  302K                               1.76M  â€¦ 2.64M                                     0 ( 0%)        0%
Benchmark 2 (23 runs): ./lix/bin/nix nar ls linux.nar / -l
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          2.64s  Â± 8.94ms                              2.62s  â€¦ 2.66s                                     0 ( 0%)        ðŸ’©+  4.9% Â±  0.2%
  peak_rss           3.75GB Â±  136KB                              3.75GB â€¦ 3.75GB                                    0 ( 0%)          -  0.4% Â±  0.0%
  cpu_cycles         2.93G  Â± 18.3M                               2.91G  â€¦ 2.96G                                     0 ( 0%)        ðŸ’©+ 18.5% Â±  0.4%
  instructions       2.18G  Â± 9.61K                               2.18G  â€¦ 2.18G                                     0 ( 0%)        ðŸ’©+ 90.2% Â±  0.0%
  cache_references    134M  Â± 2.68M                                130M  â€¦  141M                                     0 ( 0%)          +  0.6% Â±  1.4%
  cache_misses       70.8M  Â±  146K                               70.5M  â€¦ 71.1M                                     0 ( 0%)          -  1.0% Â±  0.2%
  branch_misses      4.52M  Â±  381K                               4.01M  â€¦ 5.32M                                     0 ( 0%)        ðŸ’©+122.7% Â± 10.0%
Benchmark 3 (586 runs): ./narser/bin/narser ls linux.nar / -l
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           102ms Â± 1.51ms                               101ms â€¦  118ms                                   56 (10%)        âš¡- 95.9% Â±  0.0%
  peak_rss           33.4MB Â± 15.2KB                              33.3MB â€¦ 33.4MB                                    8 ( 1%)        âš¡- 99.1% Â±  0.0%
  cpu_cycles         52.7M  Â±  662K                               52.0M  â€¦ 55.8M                                    64 (11%)        âš¡- 97.9% Â±  0.0%
  instructions       93.3M  Â± 5.69                                93.3M  â€¦ 93.3M                                    17 ( 3%)        âš¡- 91.9% Â±  0.0%
  cache_references   1.12M  Â± 42.6K                               1.04M  â€¦ 1.32M                                    12 ( 2%)        âš¡- 99.2% Â±  0.2%
  cache_misses       15.1K  Â± 1.25K                               12.8K  â€¦ 22.0K                                    40 ( 7%)        âš¡-100.0% Â±  0.0%
  branch_misses       342K  Â± 6.47K                                336K  â€¦  378K                                    65 (11%)        âš¡- 83.2% Â±  1.2%
Benchmark 4 (112 runs): ./nix-nar/bin/nix-nar ls linux.nar / -l
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           537ms Â± 4.88ms                               531ms â€¦  554ms                                    6 ( 5%)        âš¡- 78.7% Â±  0.1%
  peak_rss           2.39MB Â± 55.7KB                              2.28MB â€¦ 2.51MB                                    0 ( 0%)        âš¡- 99.9% Â±  0.0%
  cpu_cycles          953M  Â± 11.6M                                936M  â€¦ 1.00G                                     8 ( 7%)        âš¡- 61.4% Â±  0.2%
  instructions       1.52G  Â± 78.3K                               1.52G  â€¦ 1.52G                                     0 ( 0%)        ðŸ’©+ 32.3% Â±  0.0%
  cache_references   10.8M  Â± 2.96M                               5.92M  â€¦ 19.9M                                     2 ( 2%)        âš¡- 91.9% Â±  1.0%
  cache_misses       82.7K  Â± 9.92K                               62.0K  â€¦  107K                                     0 ( 0%)        âš¡- 99.9% Â±  0.1%
  branch_misses      1.32M  Â±  193K                               1.02M  â€¦ 2.11M                                     1 ( 1%)        âš¡- 34.9% Â±  4.7%
Benchmark 5 (17 runs): ./narz/bin/narz ls linux.nar / -l
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          3.69s  Â± 9.04ms                              3.68s  â€¦ 3.72s                                     1 ( 6%)        ðŸ’©+ 46.6% Â±  0.2%
  peak_rss           1.85GB Â± 66.5KB                              1.85GB â€¦ 1.85GB                                    0 ( 0%)        âš¡- 51.0% Â±  0.0%
  cpu_cycles          881M  Â± 2.59M                                878M  â€¦  886M                                     0 ( 0%)        âš¡- 64.3% Â±  0.3%
  instructions        870M  Â±  289                                 870M  â€¦  870M                                     0 ( 0%)        âš¡- 24.1% Â±  0.0%
  cache_references   4.56M  Â±  463K                               3.65M  â€¦ 5.26M                                     0 ( 0%)        âš¡- 96.6% Â±  1.3%
  cache_misses        129K  Â± 6.72K                                119K  â€¦  141K                                     0 ( 0%)        âš¡- 99.8% Â±  0.2%
  branch_misses      1.89M  Â± 47.6K                               1.79M  â€¦ 1.95M                                     0 ( 0%)          -  7.1% Â±  7.5%

poop -d 60000 "./nix/bin/nix nar cat linux.nar /README" "./lix/bin/nix nar cat linux.nar /README" "./narser/bin/narser cat linux.nar /README" "./narser/bin/narser cat linux.nar /README -L" "./nix-nar/bin/nix-nar cat linux.nar /README " "./narz/bin/narz cat linux.nar /README"
Benchmark 1 (25 runs): ./nix/bin/nix nar cat linux.nar /README
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          2.49s  Â± 12.9ms                              2.48s  â€¦ 2.52s                                     0 ( 0%)        0%
  peak_rss           3.75GB Â±  116KB                              3.75GB â€¦ 3.75GB                                    0 ( 0%)        0%
  cpu_cycles         2.42G  Â± 13.7M                               2.40G  â€¦ 2.45G                                     0 ( 0%)        0%
  instructions       1.07G  Â±  387K                               1.07G  â€¦ 1.07G                                     0 ( 0%)        0%
  cache_references    130M  Â± 3.32M                                126M  â€¦  139M                                     0 ( 0%)        0%
  cache_misses       70.2M  Â±  201K                               69.8M  â€¦ 70.7M                                     0 ( 0%)        0%
  branch_misses      1.93M  Â±  309K                               1.54M  â€¦ 2.75M                                     0 ( 0%)        0%
Benchmark 2 (23 runs): ./lix/bin/nix nar cat linux.nar /README
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          2.65s  Â± 13.7ms                              2.62s  â€¦ 2.68s                                     0 ( 0%)        ðŸ’©+  6.4% Â±  0.3%
  peak_rss           3.75GB Â±  111KB                              3.75GB â€¦ 3.75GB                                    2 ( 9%)          +  0.2% Â±  0.0%
  cpu_cycles         2.94G  Â± 21.2M                               2.91G  â€¦ 2.99G                                     1 ( 4%)        ðŸ’©+ 21.3% Â±  0.4%
  instructions       2.19G  Â± 9.71K                               2.19G  â€¦ 2.19G                                     1 ( 4%)        ðŸ’©+104.0% Â±  0.0%
  cache_references    134M  Â± 1.71M                                132M  â€¦  138M                                     0 ( 0%)        ðŸ’©+  3.3% Â±  1.2%
  cache_misses       70.7M  Â±  200K                               70.4M  â€¦ 71.2M                                     0 ( 0%)          +  0.8% Â±  0.2%
  branch_misses      4.71M  Â±  518K                               4.05M  â€¦ 6.10M                                     1 ( 4%)        ðŸ’©+144.7% Â± 12.8%
Benchmark 3 (6811 runs): ./narser/bin/narser cat linux.nar /README
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          8.76ms Â±  360us                              8.59ms â€¦ 16.1ms                                  512 ( 8%)        âš¡- 99.6% Â±  0.0%
  peak_rss           1.04MB Â±  832                                 979KB â€¦ 1.04MB                                    2 ( 0%)        âš¡-100.0% Â±  0.0%
  cpu_cycles         5.88M  Â±  247K                               5.75M  â€¦ 9.58M                                   617 ( 9%)        âš¡- 99.8% Â±  0.0%
  instructions       11.0M  Â± 1.79                                11.0M  â€¦ 11.0M                                    45 ( 1%)        âš¡- 99.0% Â±  0.0%
  cache_references   21.3K  Â± 2.11K                               15.4K  â€¦ 45.9K                                   337 ( 5%)        âš¡-100.0% Â±  0.1%
  cache_misses       1.20K  Â±  277                                 779   â€¦ 6.95K                                   304 ( 4%)        âš¡-100.0% Â±  0.0%
  branch_misses      54.6K  Â± 2.23K                               52.8K  â€¦ 77.3K                                   499 ( 7%)        âš¡- 97.2% Â±  0.4%
Benchmark 4 (50 runs): ./narser/bin/narser cat linux.nar /README -L
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          1.22s  Â± 5.42ms                              1.21s  â€¦ 1.24s                                     2 ( 4%)        âš¡- 51.2% Â±  0.2%
  peak_rss           1.87GB Â± 54.8KB                              1.87GB â€¦ 1.87GB                                   11 (22%)        âš¡- 50.2% Â±  0.0%
  cpu_cycles          509M  Â± 1.34M                                505M  â€¦  512M                                     1 ( 2%)        âš¡- 79.0% Â±  0.2%
  instructions        468M  Â± 15.5                                 468M  â€¦  468M                                     1 ( 2%)        âš¡- 56.4% Â±  0.0%
  cache_references   18.6M  Â±  573K                               17.5M  â€¦ 20.3M                                     1 ( 2%)        âš¡- 85.7% Â±  0.7%
  cache_misses       2.80M  Â± 9.20K                               2.78M  â€¦ 2.81M                                     0 ( 0%)        âš¡- 96.0% Â±  0.1%
  branch_misses       793K  Â± 12.8K                                771K  â€¦  839K                                     1 ( 2%)        âš¡- 58.8% Â±  4.5%
Benchmark 5 (723 runs): ./nix-nar/bin/nix-nar cat linux.nar /README
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          83.0ms Â± 1.93ms                              81.4ms â€¦  104ms                                  112 (15%)        âš¡- 96.7% Â±  0.0%
  peak_rss           2.40MB Â± 60.8KB                              2.26MB â€¦ 2.56MB                                    0 ( 0%)        âš¡- 99.9% Â±  0.0%
  cpu_cycles          116M  Â± 4.10M                                113M  â€¦  164M                                   108 (15%)        âš¡- 95.2% Â±  0.1%
  instructions        166M  Â± 10.0K                                166M  â€¦  166M                                     0 ( 0%)        âš¡- 84.6% Â±  0.0%
  cache_references   1.88M  Â±  486K                                968K  â€¦ 4.14M                                    14 ( 2%)        âš¡- 98.6% Â±  0.2%
  cache_misses       24.2K  Â± 2.06K                               21.7K  â€¦ 34.8K                                    48 ( 7%)        âš¡-100.0% Â±  0.0%
  branch_misses       152K  Â± 91.1K                                108K  â€¦  981K                                   103 (14%)        âš¡- 92.1% Â±  2.2%
Benchmark 6 (17 runs): ./narz/bin/narz cat linux.nar /README
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          3.72s  Â± 6.91ms                              3.71s  â€¦ 3.74s                                     0 ( 0%)        ðŸ’©+ 49.3% Â±  0.3%
  peak_rss           1.85GB Â± 67.4KB                              1.85GB â€¦ 1.85GB                                    0 ( 0%)        âš¡- 50.7% Â±  0.0%
  cpu_cycles          885M  Â± 2.36M                                879M  â€¦  888M                                     0 ( 0%)        âš¡- 63.5% Â±  0.3%
  instructions        870M  Â± 8.93K                                870M  â€¦  870M                                     0 ( 0%)        âš¡- 18.9% Â±  0.0%
  cache_references   4.73M  Â±  353K                               4.02M  â€¦ 5.49M                                     0 ( 0%)        âš¡- 96.4% Â±  1.3%
  cache_misses        128K  Â± 4.22K                                120K  â€¦  135K                                     0 ( 0%)        âš¡- 99.8% Â±  0.1%
  branch_misses      1.94M  Â± 44.6K                               1.85M  â€¦ 1.99M                                     0 ( 0%)          +  0.6% Â±  8.0%

poop -d 60000 "./nix/bin/nix nar cat linux.nar /virt/lib/irqbypass.c" "./lix/bin/nix nar cat linux.nar /virt/lib/irqbypass.c" "./narser/bin/narser cat linux.nar /virt/lib/irqbypass.c" "./narser/bin/narser cat linux.nar /virt/lib/irqbypass.c -L" "./nix-nar/bin/nix-nar cat linux.nar /virt/lib/irqbypass.c " "./narz/bin/narz cat linux.nar /virt/lib/irqbypass.c"
Benchmark 1 (25 runs): ./nix/bin/nix nar cat linux.nar /virt/lib/irqbypass.c
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          2.50s  Â± 11.1ms                              2.48s  â€¦ 2.52s                                     0 ( 0%)        0%
  peak_rss           3.75GB Â±  134KB                              3.75GB â€¦ 3.75GB                                    1 ( 4%)        0%
  cpu_cycles         2.42G  Â± 16.5M                               2.40G  â€¦ 2.46G                                     0 ( 0%)        0%
  instructions       1.07G  Â±  303K                               1.07G  â€¦ 1.07G                                     0 ( 0%)        0%
  cache_references    130M  Â± 2.73M                                126M  â€¦  136M                                     0 ( 0%)        0%
  cache_misses       70.2M  Â±  190K                               69.9M  â€¦ 70.7M                                     0 ( 0%)        0%
  branch_misses      1.94M  Â±  312K                               1.57M  â€¦ 2.78M                                     1 ( 4%)        0%
Benchmark 2 (23 runs): ./lix/bin/nix nar cat linux.nar /virt/lib/irqbypass.c
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          2.66s  Â± 9.01ms                              2.65s  â€¦ 2.69s                                     0 ( 0%)        ðŸ’©+  6.6% Â±  0.2%
  peak_rss           3.75GB Â±  130KB                              3.75GB â€¦ 3.75GB                                    0 ( 0%)          +  0.2% Â±  0.0%
  cpu_cycles         2.97G  Â± 24.3M                               2.94G  â€¦ 3.02G                                     0 ( 0%)        ðŸ’©+ 22.5% Â±  0.5%
  instructions       2.21G  Â± 7.01K                               2.21G  â€¦ 2.21G                                     0 ( 0%)        ðŸ’©+106.0% Â±  0.0%
  cache_references    135M  Â± 2.61M                                132M  â€¦  142M                                     0 ( 0%)        ðŸ’©+  4.0% Â±  1.2%
  cache_misses       71.7M  Â±  141K                               71.4M  â€¦ 71.9M                                     0 ( 0%)        ðŸ’©+  2.1% Â±  0.1%
  branch_misses      4.78M  Â±  512K                               4.08M  â€¦ 5.92M                                     0 ( 0%)        ðŸ’©+146.2% Â± 12.6%
Benchmark 3 (702 runs): ./narser/bin/narser cat linux.nar /virt/lib/irqbypass.c
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          85.5ms Â± 1.51ms                              84.6ms â€¦  104ms                                   58 ( 8%)        âš¡- 96.6% Â±  0.0%
  peak_rss           1.04MB Â±    0                                1.04MB â€¦ 1.04MB                                    0 ( 0%)        âš¡-100.0% Â±  0.0%
  cpu_cycles         48.6M  Â±  777K                               47.9M  â€¦ 55.0M                                    85 (12%)        âš¡- 98.0% Â±  0.1%
  instructions       94.2M  Â± 5.68                                94.2M  â€¦ 94.2M                                    23 ( 3%)        âš¡- 91.2% Â±  0.0%
  cache_references    128K  Â± 13.5K                               94.1K  â€¦  203K                                    12 ( 2%)        âš¡- 99.9% Â±  0.2%
  cache_misses       6.07K  Â± 1.13K                               4.55K  â€¦ 11.3K                                    66 ( 9%)        âš¡-100.0% Â±  0.0%
  branch_misses       418K  Â± 8.13K                                411K  â€¦  493K                                    94 (13%)        âš¡- 78.5% Â±  1.2%
Benchmark 4 (50 runs): ./narser/bin/narser cat linux.nar /virt/lib/irqbypass.c -L
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          1.21s  Â± 4.51ms                              1.21s  â€¦ 1.23s                                     5 (10%)        âš¡- 51.5% Â±  0.1%
  peak_rss           1.87GB Â± 59.4KB                              1.87GB â€¦ 1.87GB                                    0 ( 0%)        âš¡- 50.2% Â±  0.0%
  cpu_cycles          509M  Â± 1.07M                                506M  â€¦  512M                                     1 ( 2%)        âš¡- 79.0% Â±  0.2%
  instructions        468M  Â± 15.2                                 468M  â€¦  468M                                     1 ( 2%)        âš¡- 56.4% Â±  0.0%
  cache_references   18.4M  Â±  572K                               17.5M  â€¦ 19.9M                                     0 ( 0%)        âš¡- 85.8% Â±  0.6%
  cache_misses       2.80M  Â± 10.1K                               2.77M  â€¦ 2.82M                                     1 ( 2%)        âš¡- 96.0% Â±  0.1%
  branch_misses       783K  Â± 9.51K                                771K  â€¦  819K                                     1 ( 2%)        âš¡- 59.7% Â±  4.5%
Benchmark 5 (115 runs): ./nix-nar/bin/nix-nar cat linux.nar /virt/lib/irqbypass.c
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           522ms Â± 4.47ms                               515ms â€¦  544ms                                    2 ( 2%)        âš¡- 79.1% Â±  0.1%
  peak_rss           2.39MB Â± 49.8KB                              2.30MB â€¦ 2.54MB                                    0 ( 0%)        âš¡- 99.9% Â±  0.0%
  cpu_cycles          901M  Â± 9.10M                                886M  â€¦  930M                                     3 ( 3%)        âš¡- 62.8% Â±  0.2%
  instructions       1.38G  Â± 78.8K                               1.38G  â€¦ 1.38G                                     0 ( 0%)        ðŸ’©+ 29.1% Â±  0.0%
  cache_references   10.1M  Â± 3.13M                               5.18M  â€¦ 21.9M                                     5 ( 4%)        âš¡- 92.2% Â±  1.0%
  cache_misses       62.3K  Â± 6.38K                               48.4K  â€¦ 77.9K                                     0 ( 0%)        âš¡- 99.9% Â±  0.0%
  branch_misses      1.24M  Â±  195K                                939K  â€¦ 1.81M                                     2 ( 2%)        âš¡- 36.3% Â±  4.9%
Benchmark 6 (17 runs): ./narz/bin/narz cat linux.nar /virt/lib/irqbypass.c
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          3.72s  Â± 8.96ms                              3.71s  â€¦ 3.74s                                     0 ( 0%)        ðŸ’©+ 48.9% Â±  0.3%
  peak_rss           1.85GB Â± 67.4KB                              1.85GB â€¦ 1.85GB                                    0 ( 0%)        âš¡- 50.7% Â±  0.0%
  cpu_cycles          886M  Â± 3.75M                                881M  â€¦  894M                                     0 ( 0%)        âš¡- 63.4% Â±  0.3%
  instructions        870M  Â± 9.35K                                870M  â€¦  870M                                     0 ( 0%)        âš¡- 18.9% Â±  0.0%
  cache_references   4.85M  Â±  427K                               4.15M  â€¦ 6.04M                                     0 ( 0%)        âš¡- 96.3% Â±  1.0%
  cache_misses        130K  Â± 8.54K                                117K  â€¦  150K                                     0 ( 0%)        âš¡- 99.8% Â±  0.1%
  branch_misses      1.91M  Â± 48.1K                               1.83M  â€¦ 2.00M                                     0 ( 0%)          -  1.8% Â±  8.0%

./nix/bin/nix-store --restore out < linux.nar
cmp <(./nix/bin/nix nar pack out) linux.nar
rm -rf out

./lix/bin/nix-store --restore out < linux.nar
cmp <(./nix/bin/nix nar pack out) linux.nar
rm -rf out

./narser/bin/narser unpack linux.nar out
cmp <(./nix/bin/nix nar pack out) linux.nar || exit 1
rm -rf out

rm -rf out ; time ./nix/bin/nix-store --restore out < linux.nar

real	0m1.530s
user	0m0.360s
sys	0m1.163s
rm -rf out ; time ./nix/bin/nix-store --restore out < linux.nar

real	0m1.507s
user	0m0.350s
sys	0m1.149s
rm -rf out ; time ./nix/bin/nix-store --restore out < linux.nar

real	0m1.517s
user	0m0.351s
sys	0m1.153s

rm -rf out ; time ./lix/bin/nix-store --restore out < linux.nar

real	0m1.683s
user	0m0.485s
sys	0m1.190s
rm -rf out ; time ./lix/bin/nix-store --restore out < linux.nar

real	0m1.713s
user	0m0.510s
sys	0m1.196s
rm -rf out ; time ./lix/bin/nix-store --restore out < linux.nar

real	0m1.720s
user	0m0.520s
sys	0m1.189s

rm -rf out ; time ./narser/bin/narser unpack linux.nar out

real	0m1.357s
user	0m0.193s
sys	0m1.157s
rm -rf out ; time ./narser/bin/narser unpack linux.nar out

real	0m1.355s
user	0m0.197s
sys	0m1.151s
rm -rf out ; time ./narser/bin/narser unpack linux.nar out

real	0m1.362s
user	0m0.223s
sys	0m1.133s
