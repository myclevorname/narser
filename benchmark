
echo $1
/tmp/clevor/tests/

mkdir $1 || exit 1
cd $1

nix build git+https://git.lix.systems/lix-project/lix?rev=a55fe35dac3495fc3f9243b5817ce8a5314a8dd5 -o lix >& /dev/null || exit 1
nix build github:NixOS/nix/ad2360c59f7460c48ea982c32e55bfc01bfe527c -o nix >& /dev/null || exit 1
# narz fails in f790364c93142affa3cc699365545d6a11916a76
nix build git+https://git.sr.ht/~watersucks/narz?rev=760736b98e08c7c741838f5ad020d6d2e33b5e57 -o narz >& /dev/null || exit 1
nix build git+https://codeberg.org/clevor/narser?rev=2b089b14cfa0c527ca250cd1d91c75fb53fc98b6 -o narser >& /dev/null || exit 1
nix build gitlab:abstract-binary/nix-nar-rs/c8d9250b9be837abafa0046cb9c2a852b846da6a -o nix-nar >& /dev/null || exit 1

git clone https://github.com/torvalds/linux --depth=1 -q
cd linux
git log | head
commit 1c64efcb083c48c85227cb4d72ab137feef2cdac
Author: Linus Torvalds <torvalds@linux-foundation.org>
Date:   Sat Oct 18 10:05:13 2025 -1000

    Merge tag 'rust-rustfmt' of git://git.kernel.org/pub/scm/linux/kernel/git/ojeda/linux
    
    Pull rustfmt fixes from Miguel Ojeda:
     "Rust 'rustfmt' cleanup
    
      'rustfmt', by default, formats imports in a way that is prone to
cd ..

nix nar pack linux > linux.nar

cmp <(./nix/bin/nix nar pack linux) <(./lix/bin/nix nar dump-path linux)
cmp <(./nix/bin/nix nar pack linux) <(./narser/bin/narser pack linux) || exit 1
cmp <(./nix/bin/nix nar pack linux) <(./nix-nar/bin/nix-nar dump-path linux)

cmp <(./nix/bin/nix nar cat linux.nar /README) <(./lix/bin/nix nar cat linux.nar /README)
cmp <(./nix/bin/nix nar cat linux.nar /README) <(./narser/bin/narser cat linux.nar /README) || exit 1
cmp <(./nix/bin/nix nar cat linux.nar /README) <(./narz/bin/narz cat linux.nar /README)
cmp <(./nix/bin/nix nar cat linux.nar /README) <(./nix-nar/bin/nix-nar cat linux.nar /README)

cmp <(./nix/bin/nix nar ls linux.nar /) <(./lix/bin/nix nar ls linux.nar /)
cmp <(./nix/bin/nix nar ls linux.nar /) <(./narser/bin/narser ls linux.nar /) || exit 1
cmp <(./nix/bin/nix nar ls linux.nar / 2> /dev/null) <(./narz/bin/narz ls linux.nar / 2> /dev/null)
/dev/fd/63 /dev/fd/62 differ: byte 1, line 1
cmp <(./nix/bin/nix nar ls linux.nar /) <(./nix-nar/bin/nix-nar ls linux.nar /)

cmp <(./nix/bin/nix nar ls linux.nar / -l) <(./lix/bin/nix nar ls linux.nar / -l)
cmp <(./nix/bin/nix nar ls linux.nar / -l) <(./narser/bin/narser ls linux.nar / -l) || exit 1
cmp <(./nix/bin/nix nar ls linux.nar / -l 2> /dev/null) <(./narz/bin/narz ls linux.nar / -l 2> /dev/null)
/dev/fd/63 /dev/fd/62 differ: byte 1, line 1
cmp <(./nix/bin/nix nar ls linux.nar / -l) <(./nix-nar/bin/nix-nar ls linux.nar / -l)

cmp <(./nix/bin/nix nar ls linux.nar / -lR) <(./lix/bin/nix nar ls linux.nar / -lR)
cmp <(./nix/bin/nix nar ls linux.nar / -lR) <(./narser/bin/narser ls linux.nar / -lR) || exit 1
cmp <(./nix/bin/nix nar ls linux.nar / -lR 2> /dev/null) <(./narz/bin/narz ls linux.nar / -lr 2> /dev/null)
/dev/fd/63 /dev/fd/62 differ: byte 3, line 1
cmp <(./nix/bin/nix nar ls linux.nar / -lR) <(./nix-nar/bin/nix-nar ls linux.nar / -lR)

cmp <(./nix/bin/nix nar ls linux.nar / -R) <(./lix/bin/nix nar ls linux.nar / -R)
cmp <(./nix/bin/nix nar ls linux.nar / -R) <(./narser/bin/narser ls linux.nar / -R) || exit 1
cmp <(./nix/bin/nix nar ls linux.nar / -R 2> /dev/null) <(./narz/bin/narz ls linux.nar / -r 2> /dev/null)
/dev/fd/63 /dev/fd/62 differ: byte 2, line 1
cmp <(./nix/bin/nix nar ls linux.nar / -R) <(./nix-nar/bin/nix-nar ls linux.nar / -R)


poop -d 60000 "./nix/bin/nix nar pack linux" "./lix/bin/nix nar dump-path linux" "./narser/bin/narser pack linux" "./nix-nar/bin/nix-nar dump-path linux"
Benchmark 1 (32 runs): ./nix/bin/nix nar pack linux
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          1.90s  Â± 58.6ms                              1.84s  â€¦ 2.00s                                     0 ( 0%)        0%
  peak_rss           37.7MB Â±  127KB                              37.4MB â€¦ 37.9MB                                    0 ( 0%)        0%
  cpu_cycles         3.51G  Â±  198M                               3.32G  â€¦ 3.86G                                     0 ( 0%)        0%
  instructions       7.41G  Â±  170K                               7.41G  â€¦ 7.41G                                     0 ( 0%)        0%
  cache_references   53.0M  Â± 2.62M                               46.8M  â€¦ 60.5M                                     1 ( 3%)        0%
  cache_misses       4.39M  Â± 39.4K                               4.32M  â€¦ 4.47M                                     0 ( 0%)        0%
  branch_misses      12.1M  Â± 4.39M                               7.96M  â€¦ 20.3M                                     0 ( 0%)        0%
Benchmark 2 (52 runs): ./lix/bin/nix nar dump-path linux
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          1.16s  Â± 15.3ms                              1.14s  â€¦ 1.20s                                     0 ( 0%)        âš¡- 38.8% Â±  0.9%
  peak_rss           33.6MB Â±  169KB                              33.2MB â€¦ 34.1MB                                    1 ( 2%)        âš¡- 10.9% Â±  0.2%
  cpu_cycles         1.39G  Â± 46.4M                               1.33G  â€¦ 1.49G                                     0 ( 0%)        âš¡- 60.4% Â±  1.6%
  instructions       1.84G  Â± 8.58K                               1.84G  â€¦ 1.84G                                     1 ( 2%)        âš¡- 75.2% Â±  0.0%
  cache_references   84.9M  Â± 3.45M                               77.4M  â€¦ 90.3M                                     0 ( 0%)        ðŸ’©+ 60.3% Â±  2.7%
  cache_misses        762K  Â± 28.2K                                724K  â€¦  910K                                     3 ( 6%)        âš¡- 82.6% Â±  0.3%
  branch_misses      4.30M  Â±  870K                               3.23M  â€¦ 6.22M                                     0 ( 0%)        âš¡- 64.5% Â± 10.3%
Benchmark 3 (81 runs): ./narser/bin/narser pack linux
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           744ms Â± 2.64ms                               738ms â€¦  751ms                                    2 ( 2%)        âš¡- 60.8% Â±  0.7%
  peak_rss           1.26MB Â± 65.5KB                              1.19MB â€¦ 1.32MB                                    0 ( 0%)        âš¡- 96.6% Â±  0.1%
  cpu_cycles          241M  Â± 2.12M                                236M  â€¦  252M                                     3 ( 4%)        âš¡- 93.1% Â±  1.2%
  instructions        433M  Â± 16.7                                 433M  â€¦  433M                                     3 ( 4%)        âš¡- 94.2% Â±  0.0%
  cache_references   7.29M  Â±  882K                               6.16M  â€¦ 12.5M                                     4 ( 5%)        âš¡- 86.2% Â±  1.2%
  cache_misses        186K  Â± 11.8K                                158K  â€¦  219K                                     1 ( 1%)        âš¡- 95.8% Â±  0.2%
  branch_misses       778K  Â± 6.40K                                768K  â€¦  797K                                     2 ( 2%)        âš¡- 93.6% Â±  7.9%
Benchmark 4 (39 runs): ./nix-nar/bin/nix-nar dump-path linux
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          1.55s  Â± 8.92ms                              1.54s  â€¦ 1.59s                                     1 ( 3%)        âš¡- 18.1% Â±  1.0%
  peak_rss           2.91MB Â± 98.4KB                              2.72MB â€¦ 3.06MB                                    0 ( 0%)        âš¡- 92.3% Â±  0.1%
  cpu_cycles          552M  Â± 12.4M                                535M  â€¦  598M                                     1 ( 3%)        âš¡- 84.3% Â±  1.8%
  instructions        834M  Â± 98.3K                                834M  â€¦  834M                                     3 ( 8%)        âš¡- 88.7% Â±  0.0%
  cache_references   10.8M  Â±  704K                               9.47M  â€¦ 12.6M                                     0 ( 0%)        âš¡- 79.6% Â±  1.7%
  cache_misses        389K  Â± 31.8K                                342K  â€¦  542K                                     1 ( 3%)        âš¡- 91.1% Â±  0.4%
  branch_misses      2.86M  Â±  174K                               2.59M  â€¦ 3.35M                                     1 ( 3%)        âš¡- 76.4% Â± 11.6%

poop -d 60000 "./nix/bin/nix nar ls linux.nar /" "./lix/bin/nix nar ls linux.nar /" "./narser/bin/narser ls linux.nar /" "./nix-nar/bin/nix-nar ls linux.nar /" "./narz/bin/narz ls linux.nar /"
Benchmark 1 (85 runs): ./nix/bin/nix nar ls linux.nar /
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           711ms Â± 11.2ms                               697ms â€¦  741ms                                   12 (14%)        0%
  peak_rss            141MB Â±  135KB                               141MB â€¦  141MB                                    0 ( 0%)        0%
  cpu_cycles         1.53G  Â± 37.0M                               1.50G  â€¦ 1.62G                                     8 ( 9%)        0%
  instructions       2.61G  Â±  978K                               2.60G  â€¦ 2.61G                                     0 ( 0%)        0%
  cache_references   41.2M  Â± 2.51M                               37.9M  â€¦ 53.6M                                     4 ( 5%)        0%
  cache_misses       13.3M  Â± 75.6K                               13.2M  â€¦ 13.6M                                     1 ( 1%)        0%
  branch_misses      6.51M  Â±  935K                               5.70M  â€¦ 8.87M                                     7 ( 8%)        0%
Benchmark 2 (23 runs): ./lix/bin/nix nar ls linux.nar /
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          2.62s  Â± 9.92ms                              2.59s  â€¦ 2.64s                                     0 ( 0%)        ðŸ’©+268.0% Â±  0.7%
  peak_rss           3.75GB Â±  151KB                              3.75GB â€¦ 3.75GB                                    0 ( 0%)        ðŸ’©+2561.1% Â±  0.0%
  cpu_cycles         2.93G  Â± 24.9M                               2.89G  â€¦ 2.98G                                     0 ( 0%)        ðŸ’©+ 90.9% Â±  1.1%
  instructions       2.18G  Â± 9.86K                               2.18G  â€¦ 2.18G                                     0 ( 0%)        âš¡- 16.4% Â±  0.0%
  cache_references    129M  Â± 2.12M                                127M  â€¦  135M                                     2 ( 9%)        ðŸ’©+213.9% Â±  2.8%
  cache_misses       70.6M  Â±  174K                               70.1M  â€¦ 70.9M                                     1 ( 4%)        ðŸ’©+432.3% Â±  0.4%
  branch_misses      4.50M  Â±  538K                               3.76M  â€¦ 5.66M                                     0 ( 0%)        âš¡- 31.0% Â±  6.2%
Benchmark 3 (572 runs): ./narser/bin/narser ls linux.nar /
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           105ms Â± 1.65ms                               104ms â€¦  113ms                                   52 ( 9%)        âš¡- 85.2% Â±  0.1%
  peak_rss           33.4MB Â± 10.9KB                              33.3MB â€¦ 33.4MB                                    4 ( 1%)        âš¡- 76.3% Â±  0.0%
  cpu_cycles         65.7M  Â±  769K                               64.8M  â€¦ 70.8M                                    57 (10%)        âš¡- 95.7% Â±  0.2%
  instructions        120M  Â± 7.15                                 120M  â€¦  120M                                    27 ( 5%)        âš¡- 95.4% Â±  0.0%
  cache_references   1.16M  Â± 29.9K                               1.09M  â€¦ 1.31M                                     4 ( 1%)        âš¡- 97.2% Â±  0.5%
  cache_misses       17.1K  Â± 1.54K                               14.5K  â€¦ 23.4K                                    54 ( 9%)        âš¡- 99.9% Â±  0.0%
  branch_misses       408K  Â± 5.96K                                401K  â€¦  454K                                    58 (10%)        âš¡- 93.7% Â±  1.2%
Benchmark 4 (115 runs): ./nix-nar/bin/nix-nar ls linux.nar /
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           526ms Â± 3.97ms                               519ms â€¦  547ms                                    1 ( 1%)        âš¡- 25.9% Â±  0.3%
  peak_rss           2.40MB Â± 58.6KB                              2.27MB â€¦ 2.54MB                                    0 ( 0%)        âš¡- 98.3% Â±  0.0%
  cpu_cycles          950M  Â± 11.6M                                936M  â€¦ 1.02G                                     2 ( 2%)        âš¡- 38.0% Â±  0.5%
  instructions       1.52G  Â± 78.7K                               1.52G  â€¦ 1.52G                                     0 ( 0%)        âš¡- 41.9% Â±  0.0%
  cache_references   9.04M  Â± 3.16M                               4.90M  â€¦ 26.2M                                     9 ( 8%)        âš¡- 78.1% Â±  2.0%
  cache_misses       56.8K  Â± 8.05K                               43.2K  â€¦ 71.9K                                     0 ( 0%)        âš¡- 99.6% Â±  0.1%
  branch_misses      1.26M  Â±  193K                                996K  â€¦ 1.83M                                     0 ( 0%)        âš¡- 80.7% Â±  2.7%
Benchmark 5 (17 runs): ./narz/bin/narz ls linux.nar /
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          3.68s  Â± 8.66ms                              3.66s  â€¦ 3.69s                                     2 (12%)        ðŸ’©+417.8% Â±  0.8%
  peak_rss           1.85GB Â± 67.4KB                              1.85GB â€¦ 1.85GB                                    0 ( 0%)        ðŸ’©+1208.9% Â±  0.0%
  cpu_cycles          880M  Â± 2.46M                                876M  â€¦  885M                                     0 ( 0%)        âš¡- 42.6% Â±  1.2%
  instructions        870M  Â±  262                                 870M  â€¦  870M                                     1 ( 6%)        âš¡- 66.6% Â±  0.0%
  cache_references   4.32M  Â±  234K                               3.68M  â€¦ 4.52M                                     2 (12%)        âš¡- 89.5% Â±  2.9%
  cache_misses        117K  Â± 3.69K                                108K  â€¦  123K                                     1 ( 6%)        âš¡- 99.1% Â±  0.3%
  branch_misses      1.98M  Â± 47.7K                               1.89M  â€¦ 2.05M                                     0 ( 0%)        âš¡- 69.7% Â±  6.9%

poop -d 60000 "./nix/bin/nix nar ls linux.nar / -R" "./lix/bin/nix nar ls linux.nar / -R" "./narser/bin/narser ls linux.nar / -R" "./nix-nar/bin/nix-nar ls linux.nar / -R" "./narz/bin/narz ls linux.nar / -r"
Benchmark 1 (64 runs): ./nix/bin/nix nar ls linux.nar / -R
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           945ms Â± 17.4ms                               923ms â€¦  978ms                                    0 ( 0%)        0%
  peak_rss            141MB Â±  120KB                               141MB â€¦  141MB                                    1 ( 2%)        0%
  cpu_cycles         1.94G  Â± 59.2M                               1.88G  â€¦ 2.05G                                     0 ( 0%)        0%
  instructions       3.32G  Â± 1.20M                               3.31G  â€¦ 3.32G                                     0 ( 0%)        0%
  cache_references   50.9M  Â± 2.45M                               47.2M  â€¦ 56.6M                                     0 ( 0%)        0%
  cache_misses       15.8M  Â± 96.8K                               15.6M  â€¦ 16.2M                                     1 ( 2%)        0%
  branch_misses      9.21M  Â± 1.49M                               7.86M  â€¦ 12.2M                                     0 ( 0%)        0%
Benchmark 2 (21 runs): ./lix/bin/nix nar ls linux.nar / -R
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          2.88s  Â± 10.6ms                              2.87s  â€¦ 2.90s                                     0 ( 0%)        ðŸ’©+204.6% Â±  0.8%
  peak_rss           3.75GB Â±  150KB                              3.75GB â€¦ 3.75GB                                    0 ( 0%)        ðŸ’©+2561.6% Â±  0.0%
  cpu_cycles         3.42G  Â± 32.9M                               3.37G  â€¦ 3.47G                                     0 ( 0%)        ðŸ’©+ 76.5% Â±  1.4%
  instructions       3.03G  Â± 1.17M                               3.03G  â€¦ 3.03G                                     0 ( 0%)        âš¡-  8.6% Â±  0.0%
  cache_references    133M  Â± 2.61M                                130M  â€¦  138M                                     0 ( 0%)        ðŸ’©+160.3% Â±  2.4%
  cache_misses       71.4M  Â±  188K                               71.2M  â€¦ 71.9M                                     0 ( 0%)        ðŸ’©+352.2% Â±  0.4%
  branch_misses      6.73M  Â±  767K                               5.38M  â€¦ 7.82M                                     0 ( 0%)        âš¡- 27.0% Â±  7.3%
Benchmark 3 (471 runs): ./narser/bin/narser ls linux.nar / -R
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           127ms Â± 2.32ms                               125ms â€¦  145ms                                   23 ( 5%)        âš¡- 86.5% Â±  0.2%
  peak_rss           33.4MB Â± 10.4KB                              33.3MB â€¦ 33.4MB                                    3 ( 1%)        âš¡- 76.3% Â±  0.0%
  cpu_cycles          142M  Â± 3.52M                                138M  â€¦  156M                                    73 (15%)        âš¡- 92.7% Â±  0.3%
  instructions        302M  Â± 10.5                                 302M  â€¦  302M                                    34 ( 7%)        âš¡- 90.9% Â±  0.0%
  cache_references   2.24M  Â± 30.1K                               2.14M  â€¦ 2.34M                                     9 ( 2%)        âš¡- 95.6% Â±  0.4%
  cache_misses        900K  Â± 12.3K                                866K  â€¦  961K                                    54 (11%)        âš¡- 94.3% Â±  0.1%
  branch_misses       565K  Â± 7.44K                                558K  â€¦  611K                                    63 (13%)        âš¡- 93.9% Â±  1.4%
Benchmark 4 (93 runs): ./nix-nar/bin/nix-nar ls linux.nar / -R
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           648ms Â± 5.63ms                               640ms â€¦  672ms                                    4 ( 4%)        âš¡- 31.5% Â±  0.4%
  peak_rss           14.0MB Â± 71.1KB                              13.9MB â€¦ 14.1MB                                    0 ( 0%)        âš¡- 90.1% Â±  0.0%
  cpu_cycles         1.15G  Â± 14.0M                               1.13G  â€¦ 1.21G                                     1 ( 1%)        âš¡- 40.9% Â±  0.6%
  instructions       1.96G  Â± 79.4K                               1.96G  â€¦ 1.96G                                     0 ( 0%)        âš¡- 40.8% Â±  0.0%
  cache_references   14.0M  Â± 3.51M                               8.33M  â€¦ 28.5M                                     4 ( 4%)        âš¡- 72.5% Â±  2.0%
  cache_misses        183K  Â± 8.70K                                164K  â€¦  203K                                     0 ( 0%)        âš¡- 98.8% Â±  0.1%
  branch_misses      1.90M  Â±  272K                               1.51M  â€¦ 2.61M                                     0 ( 0%)        âš¡- 79.4% Â±  3.4%
Benchmark 5 (16 runs): ./narz/bin/narz ls linux.nar / -r
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          3.88s  Â± 9.54ms                              3.86s  â€¦ 3.90s                                     0 ( 0%)        ðŸ’©+310.1% Â±  1.0%
  peak_rss           1.85GB Â± 74.1KB                              1.85GB â€¦ 1.85GB                                    0 ( 0%)        ðŸ’©+1209.5% Â±  0.0%
  cpu_cycles          968M  Â± 2.31M                                964M  â€¦  973M                                     2 (13%)        âš¡- 50.1% Â±  1.5%
  instructions        951M  Â±  262                                 951M  â€¦  951M                                     1 ( 6%)        âš¡- 71.3% Â±  0.0%
  cache_references   5.52M  Â±  262K                               4.97M  â€¦ 5.96M                                     2 (13%)        âš¡- 89.2% Â±  2.4%
  cache_misses        867K  Â± 7.86K                                854K  â€¦  884K                                     3 (19%)        âš¡- 94.5% Â±  0.3%
  branch_misses      2.26M  Â± 53.9K                               2.18M  â€¦ 2.35M                                     0 ( 0%)        âš¡- 75.5% Â±  8.1%

poop -d 60000 "./nix/bin/nix nar ls linux.nar / -Rl" "./lix/bin/nix nar ls linux.nar / -Rl" "./narser/bin/narser ls linux.nar / -Rl" "./nix-nar/bin/nix-nar ls linux.nar / -Rl" "./narz/bin/narz ls linux.nar / -rl"
Benchmark 1 (59 runs): ./nix/bin/nix nar ls linux.nar / -Rl
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          1.03s  Â± 22.2ms                              1.01s  â€¦ 1.08s                                    11 (19%)        0%
  peak_rss            141MB Â±  133KB                               141MB â€¦  141MB                                    0 ( 0%)        0%
  cpu_cycles         2.22G  Â± 72.9M                               2.17G  â€¦ 2.40G                                    11 (19%)        0%
  instructions       4.01G  Â± 1.12M                               4.01G  â€¦ 4.01G                                     0 ( 0%)        0%
  cache_references   52.8M  Â± 2.82M                               48.9M  â€¦ 60.8M                                     0 ( 0%)        0%
  cache_misses       15.9M  Â±  125K                               15.7M  â€¦ 16.2M                                     0 ( 0%)        0%
  branch_misses      9.58M  Â± 1.65M                               8.38M  â€¦ 13.7M                                    11 (19%)        0%
Benchmark 2 (21 runs): ./lix/bin/nix nar ls linux.nar / -Rl
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          2.97s  Â± 14.0ms                              2.96s  â€¦ 3.01s                                     0 ( 0%)        ðŸ’©+189.6% Â±  1.0%
  peak_rss           3.75GB Â±  135KB                              3.75GB â€¦ 3.75GB                                    0 ( 0%)        ðŸ’©+2561.4% Â±  0.0%
  cpu_cycles         3.77G  Â± 34.1M                               3.74G  â€¦ 3.87G                                     1 ( 5%)        ðŸ’©+ 69.7% Â±  1.5%
  instructions       3.92G  Â± 1.22M                               3.92G  â€¦ 3.92G                                     0 ( 0%)        âš¡-  2.3% Â±  0.0%
  cache_references    133M  Â± 2.36M                                130M  â€¦  140M                                     1 ( 5%)        ðŸ’©+151.6% Â±  2.6%
  cache_misses       71.6M  Â±  191K                               71.2M  â€¦ 72.0M                                     0 ( 0%)        ðŸ’©+349.7% Â±  0.5%
  branch_misses      6.55M  Â±  759K                               5.96M  â€¦ 8.70M                                     2 (10%)        âš¡- 31.6% Â±  7.8%
Benchmark 3 (463 runs): ./narser/bin/narser ls linux.nar / -Rl
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           130ms Â± 1.46ms                               128ms â€¦  144ms                                   41 ( 9%)        âš¡- 87.4% Â±  0.2%
  peak_rss           33.4MB Â± 6.09KB                              33.3MB â€¦ 33.4MB                                    1 ( 0%)        âš¡- 76.3% Â±  0.0%
  cpu_cycles          153M  Â± 4.05M                                151M  â€¦  202M                                    57 (12%)        âš¡- 93.1% Â±  0.3%
  instructions        345M  Â± 4.91                                 345M  â€¦  345M                                     2 ( 0%)        âš¡- 91.4% Â±  0.0%
  cache_references   2.39M  Â± 33.5K                               2.28M  â€¦ 2.54M                                    13 ( 3%)        âš¡- 95.5% Â±  0.5%
  cache_misses        903K  Â± 13.8K                                863K  â€¦  979K                                    48 (10%)        âš¡- 94.3% Â±  0.1%
  branch_misses       608K  Â± 3.34K                                601K  â€¦  627K                                    47 (10%)        âš¡- 93.7% Â±  1.6%
Benchmark 4 (90 runs): ./nix-nar/bin/nix-nar ls linux.nar / -Rl
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           672ms Â± 4.50ms                               668ms â€¦  702ms                                    3 ( 3%)        âš¡- 34.6% Â±  0.5%
  peak_rss           14.0MB Â± 68.5KB                              13.9MB â€¦ 14.2MB                                    0 ( 0%)        âš¡- 90.1% Â±  0.0%
  cpu_cycles         1.24G  Â± 9.87M                               1.22G  â€¦ 1.30G                                     2 ( 2%)        âš¡- 44.4% Â±  0.7%
  instructions       2.23G  Â±  105K                               2.23G  â€¦ 2.23G                                     1 ( 1%)        âš¡- 44.5% Â±  0.0%
  cache_references   14.5M  Â± 3.87M                               7.71M  â€¦ 27.6M                                     4 ( 4%)        âš¡- 72.5% Â±  2.2%
  cache_misses        299K  Â± 8.88K                                282K  â€¦  319K                                     0 ( 0%)        âš¡- 98.1% Â±  0.2%
  branch_misses      1.81M  Â±  130K                               1.61M  â€¦ 2.51M                                     5 ( 6%)        âš¡- 81.1% Â±  3.6%
Benchmark 5 (12 runs): ./narz/bin/narz ls linux.nar / -rl
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          5.04s  Â± 8.37ms                              5.03s  â€¦ 5.07s                                     1 ( 8%)        ðŸ’©+391.1% Â±  1.3%
  peak_rss           1.85GB Â± 56.9KB                              1.85GB â€¦ 1.85GB                                    5 (42%)        ðŸ’©+1209.4% Â±  0.1%
  cpu_cycles         1.14G  Â± 3.27M                               1.14G  â€¦ 1.15G                                     0 ( 0%)        âš¡- 48.6% Â±  1.9%
  instructions       1.12G  Â±  244                                1.12G  â€¦ 1.12G                                     0 ( 0%)        âš¡- 72.1% Â±  0.0%
  cache_references   5.96M  Â±  396K                               5.56M  â€¦ 6.77M                                     0 ( 0%)        âš¡- 88.7% Â±  3.1%
  cache_misses        868K  Â± 6.43K                                859K  â€¦  879K                                     0 ( 0%)        âš¡- 94.5% Â±  0.5%
  branch_misses      2.52M  Â± 68.2K                               2.42M  â€¦ 2.64M                                     0 ( 0%)        âš¡- 73.7% Â± 10.0%

poop -d 60000 "./nix/bin/nix nar ls linux.nar / -l" "./lix/bin/nix nar ls linux.nar / -l" "./narser/bin/narser ls linux.nar / -l" "./nix-nar/bin/nix-nar ls linux.nar / -l" "./narz/bin/narz ls linux.nar / -l"
Benchmark 1 (85 runs): ./nix/bin/nix nar ls linux.nar / -l
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           712ms Â± 12.0ms                               697ms â€¦  742ms                                    4 ( 5%)        0%
  peak_rss            141MB Â±  117KB                               141MB â€¦  141MB                                    3 ( 4%)        0%
  cpu_cycles         1.53G  Â± 39.0M                               1.50G  â€¦ 1.63G                                     1 ( 1%)        0%
  instructions       2.61G  Â±  939K                               2.60G  â€¦ 2.61G                                     0 ( 0%)        0%
  cache_references   41.4M  Â± 3.88M                               37.3M  â€¦ 68.6M                                     2 ( 2%)        0%
  cache_misses       13.3M  Â± 84.6K                               13.1M  â€¦ 13.6M                                     3 ( 4%)        0%
  branch_misses      6.54M  Â±  958K                               5.71M  â€¦ 8.86M                                     8 ( 9%)        0%
Benchmark 2 (24 runs): ./lix/bin/nix nar ls linux.nar / -l
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          2.60s  Â± 12.1ms                              2.59s  â€¦ 2.64s                                     1 ( 4%)        ðŸ’©+266.0% Â±  0.8%
  peak_rss           3.75GB Â± 99.7KB                              3.75GB â€¦ 3.75GB                                    5 (21%)        ðŸ’©+2561.3% Â±  0.0%
  cpu_cycles         2.91G  Â± 15.6M                               2.89G  â€¦ 2.94G                                     0 ( 0%)        ðŸ’©+ 89.8% Â±  1.1%
  instructions       2.18G  Â± 9.64K                               2.18G  â€¦ 2.18G                                     0 ( 0%)        âš¡- 16.4% Â±  0.0%
  cache_references    130M  Â± 2.24M                                128M  â€¦  138M                                     2 ( 8%)        ðŸ’©+213.0% Â±  4.0%
  cache_misses       70.7M  Â±  203K                               70.2M  â€¦ 71.2M                                     2 ( 8%)        ðŸ’©+433.0% Â±  0.4%
  branch_misses      4.18M  Â±  340K                               3.76M  â€¦ 4.73M                                     0 ( 0%)        âš¡- 36.1% Â±  6.1%
Benchmark 3 (575 runs): ./narser/bin/narser ls linux.nar / -l
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           104ms Â± 1.52ms                               103ms â€¦  122ms                                   56 (10%)        âš¡- 85.3% Â±  0.1%
  peak_rss           33.4MB Â± 10.9KB                              33.3MB â€¦ 33.4MB                                    4 ( 1%)        âš¡- 76.3% Â±  0.0%
  cpu_cycles         65.5M  Â±  714K                               64.8M  â€¦ 72.5M                                    58 (10%)        âš¡- 95.7% Â±  0.2%
  instructions        120M  Â± 6.23                                 120M  â€¦  120M                                    16 ( 3%)        âš¡- 95.4% Â±  0.0%
  cache_references   1.18M  Â± 27.5K                               1.10M  â€¦ 1.30M                                    12 ( 2%)        âš¡- 97.2% Â±  0.8%
  cache_misses       17.2K  Â± 1.46K                               14.9K  â€¦ 23.9K                                    52 ( 9%)        âš¡- 99.9% Â±  0.1%
  branch_misses       407K  Â± 5.30K                                400K  â€¦  464K                                    56 (10%)        âš¡- 93.8% Â±  1.2%
Benchmark 4 (115 runs): ./nix-nar/bin/nix-nar ls linux.nar / -l
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           522ms Â± 4.51ms                               518ms â€¦  549ms                                    7 ( 6%)        âš¡- 26.6% Â±  0.3%
  peak_rss           2.39MB Â± 64.3KB                              2.27MB â€¦ 2.56MB                                    0 ( 0%)        âš¡- 98.3% Â±  0.0%
  cpu_cycles          943M  Â± 10.4M                                933M  â€¦ 1.01G                                     7 ( 6%)        âš¡- 38.5% Â±  0.5%
  instructions       1.52G  Â± 78.9K                               1.52G  â€¦ 1.52G                                     0 ( 0%)        âš¡- 41.9% Â±  0.0%
  cache_references   9.31M  Â± 3.30M                               5.70M  â€¦ 29.8M                                     3 ( 3%)        âš¡- 77.5% Â±  2.4%
  cache_misses       59.0K  Â± 8.66K                               46.2K  â€¦ 75.7K                                     0 ( 0%)        âš¡- 99.6% Â±  0.1%
  branch_misses      1.08M  Â±  153K                                959K  â€¦ 1.96M                                    11 (10%)        âš¡- 83.5% Â±  2.7%
Benchmark 5 (17 runs): ./narz/bin/narz ls linux.nar / -l
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          3.67s  Â± 13.8ms                              3.65s  â€¦ 3.69s                                     0 ( 0%)        ðŸ’©+415.5% Â±  0.9%
  peak_rss           1.85GB Â± 61.6KB                              1.85GB â€¦ 1.85GB                                    0 ( 0%)        ðŸ’©+1209.0% Â±  0.0%
  cpu_cycles          879M  Â± 2.97M                                874M  â€¦  885M                                     0 ( 0%)        âš¡- 42.7% Â±  1.2%
  instructions        870M  Â±  287                                 870M  â€¦  870M                                     0 ( 0%)        âš¡- 66.6% Â±  0.0%
  cache_references   4.66M  Â±  319K                               4.37M  â€¦ 5.66M                                     1 ( 6%)        âš¡- 88.7% Â±  4.5%
  cache_misses        119K  Â± 6.79K                                109K  â€¦  132K                                     0 ( 0%)        âš¡- 99.1% Â±  0.3%
  branch_misses      1.91M  Â± 45.4K                               1.84M  â€¦ 2.00M                                     0 ( 0%)        âš¡- 70.8% Â±  7.1%

poop -d 60000 "./nix/bin/nix nar cat linux.nar /README" "./lix/bin/nix nar cat linux.nar /README" "./narser/bin/narser cat linux.nar /README" "./narser/bin/narser cat linux.nar /README -L" "./nix-nar/bin/nix-nar cat linux.nar /README " "./narz/bin/narz cat linux.nar /README"
Benchmark 1 (88 runs): ./nix/bin/nix nar cat linux.nar /README
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           685ms Â± 10.1ms                               671ms â€¦  711ms                                    0 ( 0%)        0%
  peak_rss            122MB Â±  155KB                               122MB â€¦  122MB                                    0 ( 0%)        0%
  cpu_cycles         1.48G  Â± 36.0M                               1.44G  â€¦ 1.57G                                     1 ( 1%)        0%
  instructions       2.53G  Â±  799K                               2.53G  â€¦ 2.54G                                     2 ( 2%)        0%
  cache_references   40.3M  Â± 3.02M                               35.1M  â€¦ 49.7M                                     2 ( 2%)        0%
  cache_misses       12.0M  Â± 60.8K                               11.9M  â€¦ 12.2M                                     2 ( 2%)        0%
  branch_misses      6.19M  Â±  896K                               5.46M  â€¦ 8.30M                                     1 ( 1%)        0%
Benchmark 2 (24 runs): ./lix/bin/nix nar cat linux.nar /README
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          2.61s  Â± 11.3ms                              2.58s  â€¦ 2.63s                                     1 ( 4%)        ðŸ’©+280.6% Â±  0.7%
  peak_rss           3.75GB Â±  121KB                              3.75GB â€¦ 3.75GB                                    0 ( 0%)        ðŸ’©+2977.3% Â±  0.1%
  cpu_cycles         2.91G  Â± 13.6M                               2.88G  â€¦ 2.92G                                     0 ( 0%)        ðŸ’©+ 96.8% Â±  1.0%
  instructions       2.19G  Â± 5.94K                               2.19G  â€¦ 2.19G                                     0 ( 0%)        âš¡- 13.6% Â±  0.0%
  cache_references    131M  Â± 3.38M                                128M  â€¦  143M                                     1 ( 4%)        ðŸ’©+224.9% Â±  3.5%
  cache_misses       70.7M  Â±  268K                               70.0M  â€¦ 71.1M                                     1 ( 4%)        ðŸ’©+488.0% Â±  0.5%
  branch_misses      4.16M  Â±  308K                               3.69M  â€¦ 4.71M                                     0 ( 0%)        âš¡- 32.8% Â±  6.0%
Benchmark 3 (7169 runs): ./narser/bin/narser cat linux.nar /README
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          8.32ms Â±  304us                              8.17ms â€¦ 13.5ms                                  436 ( 6%)        âš¡- 98.8% Â±  0.0%
  peak_rss           1.04MB Â±    0                                1.04MB â€¦ 1.04MB                                    0 ( 0%)        âš¡- 99.1% Â±  0.0%
  cpu_cycles         5.30M  Â±  190K                               5.22M  â€¦ 8.88M                                   446 ( 6%)        âš¡- 99.6% Â±  0.1%
  instructions       10.6M  Â± 1.62                                10.6M  â€¦ 10.6M                                    43 ( 1%)        âš¡- 99.6% Â±  0.0%
  cache_references   24.0K  Â± 1.87K                               19.0K  â€¦ 53.5K                                   360 ( 5%)        âš¡- 99.9% Â±  0.2%
  cache_misses       1.34K  Â±  281                                 867   â€¦ 4.94K                                   231 ( 3%)        âš¡-100.0% Â±  0.0%
  branch_misses      51.3K  Â± 1.57K                               50.0K  â€¦ 70.9K                                   748 (10%)        âš¡- 99.2% Â±  0.3%
Benchmark 4 (59 runs): ./narser/bin/narser cat linux.nar /README -L
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          1.02s  Â± 16.5ms                              1.01s  â€¦ 1.12s                                     5 ( 8%)        ðŸ’©+ 49.5% Â±  0.6%
  peak_rss           1.88GB Â± 61.8KB                              1.88GB â€¦ 1.88GB                                    0 ( 0%)        ðŸ’©+1444.4% Â±  0.0%
  cpu_cycles          209M  Â± 5.53M                                206M  â€¦  243M                                     3 ( 5%)        âš¡- 85.9% Â±  0.6%
  instructions        235M  Â± 11.5                                 235M  â€¦  235M                                     1 ( 2%)        âš¡- 90.7% Â±  0.0%
  cache_references   6.27M  Â±  332K                               5.78M  â€¦ 7.34M                                     1 ( 2%)        âš¡- 84.4% Â±  1.9%
  cache_misses        250K  Â± 11.8K                                229K  â€¦  291K                                     2 ( 3%)        âš¡- 97.9% Â±  0.1%
  branch_misses       667K  Â± 54.4K                                635K  â€¦ 1.01M                                     3 ( 5%)        âš¡- 89.2% Â±  3.7%
Benchmark 5 (760 runs): ./nix-nar/bin/nix-nar cat linux.nar /README
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          78.9ms Â± 1.42ms                              77.8ms â€¦  101ms                                   45 ( 6%)        âš¡- 88.5% Â±  0.1%
  peak_rss           2.40MB Â± 58.8KB                              2.27MB â€¦ 2.56MB                                    0 ( 0%)        âš¡- 98.0% Â±  0.0%
  cpu_cycles          114M  Â± 2.40M                                113M  â€¦  157M                                    50 ( 7%)        âš¡- 92.3% Â±  0.2%
  instructions        166M  Â± 9.98K                                166M  â€¦  166M                                     0 ( 0%)        âš¡- 93.5% Â±  0.0%
  cache_references   1.36M  Â±  415K                                556K  â€¦ 3.52M                                    17 ( 2%)        âš¡- 96.6% Â±  0.6%
  cache_misses       22.1K  Â± 2.14K                               18.9K  â€¦ 34.6K                                    71 ( 9%)        âš¡- 99.8% Â±  0.0%
  branch_misses       121K  Â± 47.5K                                106K  â€¦  890K                                    67 ( 9%)        âš¡- 98.0% Â±  1.0%
Benchmark 6 (17 runs): ./narz/bin/narz cat linux.nar /README
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          3.67s  Â± 9.57ms                              3.66s  â€¦ 3.69s                                     0 ( 0%)        ðŸ’©+435.5% Â±  0.8%
  peak_rss           1.85GB Â± 64.6KB                              1.85GB â€¦ 1.85GB                                    0 ( 0%)        ðŸ’©+1413.3% Â±  0.1%
  cpu_cycles          878M  Â± 2.75M                                875M  â€¦  883M                                     0 ( 0%)        âš¡- 40.5% Â±  1.2%
  instructions        870M  Â± 9.48K                                870M  â€¦  870M                                     0 ( 0%)        âš¡- 65.7% Â±  0.0%
  cache_references   4.41M  Â±  251K                               3.68M  â€¦ 4.80M                                     1 ( 6%)        âš¡- 89.0% Â±  3.6%
  cache_misses        119K  Â± 6.73K                                111K  â€¦  135K                                     0 ( 0%)        âš¡- 99.0% Â±  0.2%
  branch_misses      1.91M  Â± 40.6K                               1.84M  â€¦ 1.95M                                     0 ( 0%)        âš¡- 69.2% Â±  7.0%

poop -d 60000 "./nix/bin/nix nar cat linux.nar /virt/lib/irqbypass.c" "./lix/bin/nix nar cat linux.nar /virt/lib/irqbypass.c" "./narser/bin/narser cat linux.nar /virt/lib/irqbypass.c" "./narser/bin/narser cat linux.nar /virt/lib/irqbypass.c -L" "./nix-nar/bin/nix-nar cat linux.nar /virt/lib/irqbypass.c " "./narz/bin/narz cat linux.nar /virt/lib/irqbypass.c"
Benchmark 1 (88 runs): ./nix/bin/nix nar cat linux.nar /virt/lib/irqbypass.c
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           687ms Â± 11.0ms                               673ms â€¦  714ms                                    0 ( 0%)        0%
  peak_rss            122MB Â±  167KB                               122MB â€¦  122MB                                    1 ( 1%)        0%
  cpu_cycles         1.48G  Â± 35.5M                               1.44G  â€¦ 1.57G                                     0 ( 0%)        0%
  instructions       2.53G  Â±  779K                               2.53G  â€¦ 2.54G                                     0 ( 0%)        0%
  cache_references   40.4M  Â± 2.61M                               35.8M  â€¦ 48.6M                                     1 ( 1%)        0%
  cache_misses       12.0M  Â± 61.9K                               11.9M  â€¦ 12.2M                                     1 ( 1%)        0%
  branch_misses      6.30M  Â±  862K                               5.54M  â€¦ 8.43M                                     4 ( 5%)        0%
Benchmark 2 (23 runs): ./lix/bin/nix nar cat linux.nar /virt/lib/irqbypass.c
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          2.61s  Â± 11.4ms                              2.60s  â€¦ 2.65s                                     0 ( 0%)        ðŸ’©+280.6% Â±  0.7%
  peak_rss           3.75GB Â±  133KB                              3.75GB â€¦ 3.75GB                                    0 ( 0%)        ðŸ’©+2976.8% Â±  0.1%
  cpu_cycles         2.93G  Â± 15.7M                               2.91G  â€¦ 2.96G                                     0 ( 0%)        ðŸ’©+ 98.1% Â±  1.0%
  instructions       2.21G  Â± 7.42K                               2.21G  â€¦ 2.21G                                     0 ( 0%)        âš¡- 12.8% Â±  0.0%
  cache_references    130M  Â± 1.49M                                129M  â€¦  134M                                     2 ( 9%)        ðŸ’©+221.0% Â±  2.8%
  cache_misses       71.7M  Â±  168K                               71.4M  â€¦ 72.1M                                     0 ( 0%)        ðŸ’©+495.8% Â±  0.4%
  branch_misses      4.22M  Â±  346K                               3.81M  â€¦ 4.84M                                     0 ( 0%)        âš¡- 33.1% Â±  5.8%
Benchmark 3 (727 runs): ./narser/bin/narser cat linux.nar /virt/lib/irqbypass.c
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          82.5ms Â± 1.54ms                              81.6ms â€¦ 98.3ms                                  105 (14%)        âš¡- 88.0% Â±  0.1%
  peak_rss           1.04MB Â±    0                                1.04MB â€¦ 1.04MB                                    0 ( 0%)        âš¡- 99.1% Â±  0.0%
  cpu_cycles         43.8M  Â±  841K                               43.3M  â€¦ 50.0M                                   112 (15%)        âš¡- 97.0% Â±  0.2%
  instructions       91.0M  Â± 6.08                                91.0M  â€¦ 91.0M                                    34 ( 5%)        âš¡- 96.4% Â±  0.0%
  cache_references    144K  Â± 15.3K                               99.6K  â€¦  187K                                    26 ( 4%)        âš¡- 99.6% Â±  0.5%
  cache_misses       5.58K  Â± 1.19K                               4.15K  â€¦ 10.6K                                    68 ( 9%)        âš¡-100.0% Â±  0.0%
  branch_misses       392K  Â± 8.14K                                386K  â€¦  446K                                   106 (15%)        âš¡- 93.8% Â±  1.0%
Benchmark 4 (59 runs): ./narser/bin/narser cat linux.nar /virt/lib/irqbypass.c -L
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          1.02s  Â± 8.71ms                              1.00s  â€¦ 1.05s                                     0 ( 0%)        ðŸ’©+ 48.7% Â±  0.5%
  peak_rss           1.88GB Â± 61.8KB                              1.88GB â€¦ 1.88GB                                    0 ( 0%)        ðŸ’©+1444.2% Â±  0.0%
  cpu_cycles          208M  Â± 1.21M                                205M  â€¦  210M                                     0 ( 0%)        âš¡- 86.0% Â±  0.6%
  instructions        235M  Â± 10.2                                 235M  â€¦  235M                                     3 ( 5%)        âš¡- 90.7% Â±  0.0%
  cache_references   6.24M  Â±  314K                               5.74M  â€¦ 6.98M                                     0 ( 0%)        âš¡- 84.6% Â±  1.7%
  cache_misses        241K  Â± 10.5K                                222K  â€¦  278K                                     1 ( 2%)        âš¡- 98.0% Â±  0.1%
  branch_misses       655K  Â± 11.6K                                635K  â€¦  682K                                     0 ( 0%)        âš¡- 89.6% Â±  3.5%
Benchmark 5 (118 runs): ./nix-nar/bin/nix-nar cat linux.nar /virt/lib/irqbypass.c
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           510ms Â± 3.81ms                               503ms â€¦  526ms                                    2 ( 2%)        âš¡- 25.7% Â±  0.3%
  peak_rss           2.38MB Â± 60.2KB                              2.25MB â€¦ 2.53MB                                    0 ( 0%)        âš¡- 98.0% Â±  0.0%
  cpu_cycles          895M  Â± 8.95M                                882M  â€¦  920M                                     1 ( 1%)        âš¡- 39.6% Â±  0.5%
  instructions       1.38G  Â± 78.1K                               1.38G  â€¦ 1.38G                                     0 ( 0%)        âš¡- 45.3% Â±  0.0%
  cache_references   8.97M  Â± 3.52M                               3.31M  â€¦ 22.1M                                     2 ( 2%)        âš¡- 77.8% Â±  2.2%
  cache_misses       45.5K  Â± 5.39K                               36.5K  â€¦ 57.7K                                     0 ( 0%)        âš¡- 99.6% Â±  0.1%
  branch_misses      1.10M  Â±  183K                                889K  â€¦ 1.62M                                     1 ( 1%)        âš¡- 82.5% Â±  2.5%
Benchmark 6 (17 runs): ./narz/bin/narz cat linux.nar /virt/lib/irqbypass.c
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          3.69s  Â± 9.37ms                              3.68s  â€¦ 3.71s                                     1 ( 6%)        ðŸ’©+436.8% Â±  0.8%
  peak_rss           1.85GB Â± 79.5KB                              1.85GB â€¦ 1.85GB                                    0 ( 0%)        ðŸ’©+1413.1% Â±  0.1%
  cpu_cycles          881M  Â± 2.05M                                878M  â€¦  886M                                     1 ( 6%)        âš¡- 40.5% Â±  1.2%
  instructions        870M  Â± 9.63K                                870M  â€¦  870M                                     0 ( 0%)        âš¡- 65.7% Â±  0.0%
  cache_references   4.45M  Â±  121K                               4.32M  â€¦ 4.68M                                     0 ( 0%)        âš¡- 89.0% Â±  3.1%
  cache_misses        118K  Â± 3.97K                                113K  â€¦  128K                                     2 (12%)        âš¡- 99.0% Â±  0.2%
  branch_misses      1.97M  Â± 52.6K                               1.88M  â€¦ 2.05M                                     0 ( 0%)        âš¡- 68.8% Â±  6.6%

./nix/bin/nix-store --restore out < linux.nar
cmp <(./nix/bin/nix nar pack out) linux.nar
rm -rf out

./lix/bin/nix-store --restore out < linux.nar
cmp <(./nix/bin/nix nar pack out) linux.nar
rm -rf out

./narser/bin/narser unpack linux.nar out
cmp <(./nix/bin/nix nar pack out) linux.nar || exit 1
rm -rf out

rm -rf out ; time ./nix/bin/nix-store --restore out < linux.nar

real	0m1.489s
user	0m0.310s
sys	0m1.173s
rm -rf out ; time ./nix/bin/nix-store --restore out < linux.nar

real	0m1.478s
user	0m0.302s
sys	0m1.170s
rm -rf out ; time ./nix/bin/nix-store --restore out < linux.nar

real	0m1.483s
user	0m0.293s
sys	0m1.183s

rm -rf out ; time ./lix/bin/nix-store --restore out < linux.nar

real	0m1.687s
user	0m0.501s
sys	0m1.180s
rm -rf out ; time ./lix/bin/nix-store --restore out < linux.nar

real	0m1.721s
user	0m0.532s
sys	0m1.177s
rm -rf out ; time ./lix/bin/nix-store --restore out < linux.nar

real	0m1.718s
user	0m0.502s
sys	0m1.209s

rm -rf out ; time ./narser/bin/narser unpack linux.nar out

real	0m1.303s
user	0m0.200s
sys	0m1.097s
rm -rf out ; time ./narser/bin/narser unpack linux.nar out

real	0m1.303s
user	0m0.192s
sys	0m1.104s
rm -rf out ; time ./narser/bin/narser unpack linux.nar out

real	0m1.309s
user	0m0.195s
sys	0m1.108s
