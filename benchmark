
echo $1
/tmp/clevor/tests

mkdir $1 || exit 1
cd $1

nix build git+https://git.lix.systems/lix-project/lix?rev=42691f0d943b43842e69b76608cbe4416e35e94e -o lix >& /dev/null || exit 1
nix build github:NixOS/nix/090f7fb05ef4ed23048b8be622a9421b284099f0 -o nix >& /dev/null || exit 1
# narz fails in f790364c93142affa3cc699365545d6a11916a76
nix build git+https://git.sr.ht/~watersucks/narz?rev=760736b98e08c7c741838f5ad020d6d2e33b5e57 -o narz >& /dev/null || exit 1
nix build git+https://codeberg.org/clevor/narser?rev=0eb4b4edeb4174eae2315aa6f0998adacdf1f55c -o narser >& /dev/null || exit 1
nix build gitlab:abstract-binary/nix-nar-rs/c8d9250b9be837abafa0046cb9c2a852b846da6a -o nix-nar >& /dev/null || exit 1

git clone https://github.com/torvalds/linux --depth=1 -q
cd linux
git log | head
commit ec714e371f22f716a04e6ecb2a24988c92b26911
Author: Linus Torvalds <torvalds@linux-foundation.org>
Date:   Wed Oct 8 19:24:24 2025 -0700

    Merge tag 'perf-tools-for-v6.18-1-2025-10-08' of git://git.kernel.org/pub/scm/linux/kernel/git/perf/perf-tools
    
    Pull perf tools updates from Arnaldo Carvalho de Melo:
    
     - Extended 'perf annotate' with DWARF type information
       (--code-with-type) integration in the TUI, including a 'T'
cd ..

nix nar pack linux > linux.nar

cmp <(./nix/bin/nix nar pack linux) <(./lix/bin/nix nar dump-path linux)
cmp <(./nix/bin/nix nar pack linux) <(./narser/bin/narser pack linux) || exit 1
cmp <(./nix/bin/nix nar pack linux) <(./nix-nar/bin/nix-nar dump-path linux)

cmp <(./nix/bin/nix nar cat linux.nar /README) <(./lix/bin/nix nar cat linux.nar /README)
cmp <(./nix/bin/nix nar cat linux.nar /README) <(./narser/bin/narser cat linux.nar /README) || exit 1
cmp <(./nix/bin/nix nar cat linux.nar /README) <(./narz/bin/narz cat linux.nar /README)
cmp <(./nix/bin/nix nar cat linux.nar /README) <(./nix-nar/bin/nix-nar cat linux.nar /README)

cmp <(./nix/bin/nix nar ls linux.nar /) <(./lix/bin/nix nar ls linux.nar /)
cmp <(./nix/bin/nix nar ls linux.nar /) <(./narser/bin/narser ls linux.nar /) || exit 1
cmp <(./nix/bin/nix nar ls linux.nar / 2> /dev/null) <(./narz/bin/narz ls linux.nar / 2> /dev/null)
/dev/fd/63 /dev/fd/62 differ: byte 1, line 1
cmp <(./nix/bin/nix nar ls linux.nar /) <(./nix-nar/bin/nix-nar ls linux.nar /)

cmp <(./nix/bin/nix nar ls linux.nar / -l) <(./lix/bin/nix nar ls linux.nar / -l)
cmp <(./nix/bin/nix nar ls linux.nar / -l) <(./narser/bin/narser ls linux.nar / -l) || exit 1
cmp <(./nix/bin/nix nar ls linux.nar / -l 2> /dev/null) <(./narz/bin/narz ls linux.nar / -l 2> /dev/null)
/dev/fd/63 /dev/fd/62 differ: byte 1, line 1
cmp <(./nix/bin/nix nar ls linux.nar / -l) <(./nix-nar/bin/nix-nar ls linux.nar / -l)

cmp <(./nix/bin/nix nar ls linux.nar / -lR) <(./lix/bin/nix nar ls linux.nar / -lR)
cmp <(./nix/bin/nix nar ls linux.nar / -lR) <(./narser/bin/narser ls linux.nar / -lR) || exit 1
cmp <(./nix/bin/nix nar ls linux.nar / -lR 2> /dev/null) <(./narz/bin/narz ls linux.nar / -lr 2> /dev/null)
/dev/fd/63 /dev/fd/62 differ: byte 3, line 1
cmp <(./nix/bin/nix nar ls linux.nar / -lR) <(./nix-nar/bin/nix-nar ls linux.nar / -lR)

cmp <(./nix/bin/nix nar ls linux.nar / -R) <(./lix/bin/nix nar ls linux.nar / -R)
cmp <(./nix/bin/nix nar ls linux.nar / -R) <(./narser/bin/narser ls linux.nar / -R) || exit 1
cmp <(./nix/bin/nix nar ls linux.nar / -R 2> /dev/null) <(./narz/bin/narz ls linux.nar / -r 2> /dev/null)
/dev/fd/63 /dev/fd/62 differ: byte 2, line 1
cmp <(./nix/bin/nix nar ls linux.nar / -R) <(./nix-nar/bin/nix-nar ls linux.nar / -R)


poop -d 60000 "./nix/bin/nix nar pack linux" "./lix/bin/nix nar dump-path linux" "./narser/bin/narser pack linux" "./nix-nar/bin/nix-nar dump-path linux"
Benchmark 1 (32 runs): ./nix/bin/nix nar pack linux
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          1.89s  Â± 55.7ms                              1.84s  â€¦ 1.99s                                     0 ( 0%)        0%
  peak_rss           40.2MB Â± 94.8KB                              39.9MB â€¦ 40.3MB                                    0 ( 0%)        0%
  cpu_cycles         3.51G  Â±  190M                               3.35G  â€¦ 3.83G                                     0 ( 0%)        0%
  instructions       7.44G  Â±  206K                               7.44G  â€¦ 7.44G                                     0 ( 0%)        0%
  cache_references   52.8M  Â± 3.14M                               46.2M  â€¦ 61.2M                                     1 ( 3%)        0%
  cache_misses       4.36M  Â± 38.8K                               4.23M  â€¦ 4.43M                                     1 ( 3%)        0%
  branch_misses      11.7M  Â± 4.19M                               8.04M  â€¦ 18.8M                                     0 ( 0%)        0%
Benchmark 2 (53 runs): ./lix/bin/nix nar dump-path linux
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          1.14s  Â± 13.2ms                              1.13s  â€¦ 1.18s                                     4 ( 8%)        âš¡- 39.5% Â±  0.8%
  peak_rss           33.6MB Â±  170KB                              33.3MB â€¦ 34.0MB                                    0 ( 0%)        âš¡- 16.4% Â±  0.2%
  cpu_cycles         1.36G  Â± 42.8M                               1.32G  â€¦ 1.47G                                    10 (19%)        âš¡- 61.2% Â±  1.5%
  instructions       1.82G  Â± 8.22K                               1.82G  â€¦ 1.82G                                     0 ( 0%)        âš¡- 75.5% Â±  0.0%
  cache_references   79.7M  Â± 3.72M                               72.7M  â€¦ 89.4M                                     0 ( 0%)        ðŸ’©+ 51.1% Â±  3.0%
  cache_misses        742K  Â± 20.9K                                713K  â€¦  843K                                     2 ( 4%)        âš¡- 83.0% Â±  0.3%
  branch_misses      3.75M  Â±  920K                               2.95M  â€¦ 6.02M                                    11 (21%)        âš¡- 67.8% Â± 10.2%
Benchmark 3 (84 runs): ./narser/bin/narser pack linux
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           720ms Â± 2.60ms                               716ms â€¦  728ms                                    1 ( 1%)        âš¡- 61.9% Â±  0.6%
  peak_rss           1.18MB Â± 31.2KB                              1.06MB â€¦ 1.19MB                                    5 ( 6%)        âš¡- 97.1% Â±  0.1%
  cpu_cycles          226M  Â± 2.13M                                223M  â€¦  235M                                     4 ( 5%)        âš¡- 93.5% Â±  1.2%
  instructions        404M  Â± 12.1                                 404M  â€¦  404M                                     2 ( 2%)        âš¡- 94.6% Â±  0.0%
  cache_references   5.95M  Â±  853K                               4.69M  â€¦ 8.51M                                     9 (11%)        âš¡- 88.7% Â±  1.4%
  cache_misses        170K  Â± 11.0K                                148K  â€¦  211K                                     1 ( 1%)        âš¡- 96.1% Â±  0.2%
  branch_misses       727K  Â± 3.33K                                721K  â€¦  738K                                     8 (10%)        âš¡- 93.8% Â±  7.7%
Benchmark 4 (39 runs): ./nix-nar/bin/nix-nar dump-path linux
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          1.54s  Â± 5.95ms                              1.54s  â€¦ 1.56s                                     0 ( 0%)        âš¡- 18.3% Â±  0.9%
  peak_rss           2.91MB Â± 85.4KB                              2.72MB â€¦ 3.06MB                                    0 ( 0%)        âš¡- 92.8% Â±  0.1%
  cpu_cycles          553M  Â± 9.32M                                538M  â€¦  582M                                     1 ( 3%)        âš¡- 84.2% Â±  1.7%
  instructions        834M  Â± 88.0K                                834M  â€¦  834M                                     0 ( 0%)        âš¡- 88.8% Â±  0.0%
  cache_references   11.2M  Â±  609K                               10.0M  â€¦ 13.0M                                     0 ( 0%)        âš¡- 78.8% Â±  1.9%
  cache_misses        377K  Â± 20.4K                                340K  â€¦  411K                                     0 ( 0%)        âš¡- 91.3% Â±  0.3%
  branch_misses      2.86M  Â±  192K                               2.52M  â€¦ 3.36M                                     0 ( 0%)        âš¡- 75.4% Â± 11.5%

poop -d 60000 "./nix/bin/nix nar ls linux.nar /" "./lix/bin/nix nar ls linux.nar /" "./narser/bin/narser ls linux.nar /" "./nix-nar/bin/nix-nar ls linux.nar /" "./narz/bin/narz ls linux.nar /"
Benchmark 1 (25 runs): ./nix/bin/nix nar ls linux.nar /
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          2.46s  Â± 8.93ms                              2.45s  â€¦ 2.48s                                     0 ( 0%)        0%
  peak_rss           3.77GB Â±  135KB                              3.77GB â€¦ 3.77GB                                    0 ( 0%)        0%
  cpu_cycles         2.48G  Â± 15.2M                               2.46G  â€¦ 2.51G                                     0 ( 0%)        0%
  instructions       1.15G  Â±  123K                               1.15G  â€¦ 1.15G                                     0 ( 0%)        0%
  cache_references    126M  Â± 1.06M                                125M  â€¦  130M                                     1 ( 4%)        0%
  cache_misses       71.5M  Â±  274K                               70.4M  â€¦ 71.8M                                     3 (12%)        0%
  branch_misses      2.01M  Â±  304K                               1.70M  â€¦ 2.57M                                     0 ( 0%)        0%
Benchmark 2 (24 runs): ./lix/bin/nix nar ls linux.nar /
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          2.57s  Â± 8.98ms                              2.56s  â€¦ 2.60s                                     0 ( 0%)        ðŸ’©+  4.5% Â±  0.2%
  peak_rss           3.75GB Â±  145KB                              3.75GB â€¦ 3.75GB                                    1 ( 4%)          -  0.4% Â±  0.0%
  cpu_cycles         2.90G  Â± 19.3M                               2.88G  â€¦ 2.95G                                     0 ( 0%)        ðŸ’©+ 17.1% Â±  0.4%
  instructions       2.18G  Â± 6.30K                               2.18G  â€¦ 2.18G                                     0 ( 0%)        ðŸ’©+ 90.2% Â±  0.0%
  cache_references    128M  Â± 1.56M                                126M  â€¦  134M                                     2 ( 8%)          +  1.3% Â±  0.6%
  cache_misses       70.8M  Â±  215K                               70.4M  â€¦ 71.2M                                     4 (17%)          -  1.0% Â±  0.2%
  branch_misses      4.13M  Â±  414K                               3.76M  â€¦ 5.21M                                     0 ( 0%)        ðŸ’©+105.7% Â± 10.4%
Benchmark 3 (598 runs): ./narser/bin/narser ls linux.nar /
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           100ms Â±  472us                              99.7ms â€¦  105ms                                   47 ( 8%)        âš¡- 95.9% Â±  0.0%
  peak_rss           33.4MB Â± 16.8KB                              33.3MB â€¦ 33.4MB                                   10 ( 2%)        âš¡- 99.1% Â±  0.0%
  cpu_cycles         54.4M  Â±  402K                               54.1M  â€¦ 56.8M                                    47 ( 8%)        âš¡- 97.8% Â±  0.0%
  instructions       98.0M  Â± 4.58                                98.0M  â€¦ 98.0M                                     6 ( 1%)        âš¡- 91.4% Â±  0.0%
  cache_references    852K  Â± 15.1K                                813K  â€¦  902K                                     8 ( 1%)        âš¡- 99.3% Â±  0.1%
  cache_misses       11.3K  Â±  960                                9.32K  â€¦ 15.8K                                    49 ( 8%)        âš¡-100.0% Â±  0.0%
  branch_misses       338K  Â± 3.59K                                336K  â€¦  364K                                    74 (12%)        âš¡- 83.2% Â±  1.2%
Benchmark 4 (116 runs): ./nix-nar/bin/nix-nar ls linux.nar /
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           518ms Â± 3.47ms                               513ms â€¦  529ms                                    2 ( 2%)        âš¡- 79.0% Â±  0.1%
  peak_rss           2.39MB Â± 64.3KB                              2.27MB â€¦ 2.54MB                                    0 ( 0%)        âš¡- 99.9% Â±  0.0%
  cpu_cycles          946M  Â± 8.45M                                933M  â€¦  970M                                     4 ( 3%)        âš¡- 61.8% Â±  0.2%
  instructions       1.52G  Â± 78.7K                               1.52G  â€¦ 1.52G                                     0 ( 0%)        ðŸ’©+ 32.3% Â±  0.0%
  cache_references   8.17M  Â± 2.39M                               4.30M  â€¦ 16.1M                                     1 ( 1%)        âš¡- 93.5% Â±  0.8%
  cache_misses       57.2K  Â± 7.56K                               45.1K  â€¦ 77.7K                                     0 ( 0%)        âš¡- 99.9% Â±  0.1%
  branch_misses      1.18M  Â±  165K                               1.01M  â€¦ 1.75M                                     6 ( 5%)        âš¡- 41.1% Â±  4.2%
Benchmark 5 (17 runs): ./narz/bin/narz ls linux.nar /
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          3.66s  Â± 10.1ms                              3.63s  â€¦ 3.67s                                     2 (12%)        ðŸ’©+ 48.5% Â±  0.2%
  peak_rss           1.85GB Â± 31.8KB                              1.85GB â€¦ 1.85GB                                    1 ( 6%)        âš¡- 51.0% Â±  0.0%
  cpu_cycles          881M  Â± 3.07M                                875M  â€¦  886M                                     0 ( 0%)        âš¡- 64.4% Â±  0.3%
  instructions        869M  Â±  112                                 869M  â€¦  869M                                     4 (24%)        âš¡- 24.1% Â±  0.0%
  cache_references   4.58M  Â±  281K                               4.23M  â€¦ 5.25M                                     0 ( 0%)        âš¡- 96.4% Â±  0.4%
  cache_misses        118K  Â± 4.19K                                112K  â€¦  126K                                     0 ( 0%)        âš¡- 99.8% Â±  0.2%
  branch_misses      1.89M  Â± 52.2K                               1.76M  â€¦ 1.96M                                     1 ( 6%)          -  5.8% Â±  7.5%

poop -d 60000 "./nix/bin/nix nar ls linux.nar / -R" "./lix/bin/nix nar ls linux.nar / -R" "./narser/bin/narser ls linux.nar / -R" "./nix-nar/bin/nix-nar ls linux.nar / -R" "./narz/bin/narz ls linux.nar / -r"
Benchmark 1 (23 runs): ./nix/bin/nix nar ls linux.nar / -R
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          2.69s  Â± 12.1ms                              2.67s  â€¦ 2.71s                                     0 ( 0%)        0%
  peak_rss           3.77GB Â±  103KB                              3.77GB â€¦ 3.77GB                                    0 ( 0%)        0%
  cpu_cycles         2.87G  Â± 29.4M                               2.83G  â€¦ 2.93G                                     0 ( 0%)        0%
  instructions       1.85G  Â±  803K                               1.85G  â€¦ 1.85G                                     0 ( 0%)        0%
  cache_references    135M  Â±  802K                                134M  â€¦  138M                                     1 ( 4%)        0%
  cache_misses       73.9M  Â±  203K                               73.6M  â€¦ 74.3M                                     0 ( 0%)        0%
  branch_misses      4.38M  Â±  639K                               3.88M  â€¦ 5.74M                                     0 ( 0%)        0%
Benchmark 2 (22 runs): ./lix/bin/nix nar ls linux.nar / -R
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          2.84s  Â± 14.9ms                              2.81s  â€¦ 2.87s                                     0 ( 0%)        ðŸ’©+  5.4% Â±  0.3%
  peak_rss           3.75GB Â± 96.4KB                              3.75GB â€¦ 3.75GB                                    0 ( 0%)          -  0.4% Â±  0.0%
  cpu_cycles         3.39G  Â± 32.5M                               3.34G  â€¦ 3.47G                                     0 ( 0%)        ðŸ’©+ 18.2% Â±  0.6%
  instructions       3.03G  Â±  767K                               3.03G  â€¦ 3.03G                                     0 ( 0%)        ðŸ’©+ 63.7% Â±  0.0%
  cache_references    130M  Â± 2.03M                                128M  â€¦  137M                                     1 ( 5%)        âš¡-  4.0% Â±  0.7%
  cache_misses       71.5M  Â±  130K                               71.3M  â€¦ 71.8M                                     0 ( 0%)        âš¡-  3.3% Â±  0.1%
  branch_misses      6.25M  Â±  686K                               5.31M  â€¦ 7.76M                                     0 ( 0%)        ðŸ’©+ 42.7% Â±  9.1%
Benchmark 3 (491 runs): ./narser/bin/narser ls linux.nar / -R
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           122ms Â± 1.82ms                               121ms â€¦  139ms                                   57 (12%)        âš¡- 95.5% Â±  0.0%
  peak_rss           33.4MB Â± 24.0KB                              33.3MB â€¦ 33.4MB                                   17 ( 3%)        âš¡- 99.1% Â±  0.0%
  cpu_cycles          128M  Â± 2.47M                                126M  â€¦  146M                                   103 (21%)        âš¡- 95.5% Â±  0.1%
  instructions        272M  Â± 6.36                                 272M  â€¦  272M                                    15 ( 3%)        âš¡- 85.3% Â±  0.0%
  cache_references   1.97M  Â± 30.8K                               1.81M  â€¦ 2.04M                                     8 ( 2%)        âš¡- 98.5% Â±  0.1%
  cache_misses        916K  Â± 17.9K                                792K  â€¦  989K                                    32 ( 7%)        âš¡- 98.8% Â±  0.0%
  branch_misses       492K  Â± 7.68K                                488K  â€¦  553K                                    68 (14%)        âš¡- 88.8% Â±  1.3%
Benchmark 4 (94 runs): ./nix-nar/bin/nix-nar ls linux.nar / -R
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           640ms Â± 5.10ms                               633ms â€¦  660ms                                    1 ( 1%)        âš¡- 76.2% Â±  0.1%
  peak_rss           14.0MB Â± 82.6KB                              13.8MB â€¦ 14.1MB                                    0 ( 0%)        âš¡- 99.6% Â±  0.0%
  cpu_cycles         1.14G  Â± 13.0M                               1.12G  â€¦ 1.18G                                     2 ( 2%)        âš¡- 60.3% Â±  0.3%
  instructions       1.96G  Â± 79.6K                               1.96G  â€¦ 1.96G                                     0 ( 0%)        ðŸ’©+  6.1% Â±  0.0%
  cache_references   13.6M  Â± 4.02M                               8.62M  â€¦ 32.2M                                     4 ( 4%)        âš¡- 90.0% Â±  1.2%
  cache_misses        183K  Â± 8.60K                                168K  â€¦  203K                                     0 ( 0%)        âš¡- 99.8% Â±  0.1%
  branch_misses      1.79M  Â±  291K                               1.45M  â€¦ 2.89M                                     1 ( 1%)        âš¡- 59.2% Â±  4.0%
Benchmark 5 (16 runs): ./narz/bin/narz ls linux.nar / -r
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          3.84s  Â± 17.0ms                              3.82s  â€¦ 3.87s                                     0 ( 0%)        ðŸ’©+ 42.5% Â±  0.4%
  peak_rss           1.85GB Â± 56.6KB                              1.85GB â€¦ 1.85GB                                    0 ( 0%)        âš¡- 51.0% Â±  0.0%
  cpu_cycles          967M  Â± 4.17M                                961M  â€¦  974M                                     0 ( 0%)        âš¡- 66.3% Â±  0.5%
  instructions        951M  Â±  200                                 951M  â€¦  951M                                     1 ( 6%)        âš¡- 48.6% Â±  0.0%
  cache_references   5.41M  Â±  100K                               5.26M  â€¦ 5.56M                                     0 ( 0%)        âš¡- 96.0% Â±  0.3%
  cache_misses        864K  Â± 6.74K                                851K  â€¦  880K                                     2 (13%)        âš¡- 98.8% Â±  0.1%
  branch_misses      2.18M  Â± 69.4K                               2.06M  â€¦ 2.28M                                     0 ( 0%)        âš¡- 50.1% Â±  7.5%

poop -d 60000 "./nix/bin/nix nar ls linux.nar / -Rl" "./lix/bin/nix nar ls linux.nar / -Rl" "./narser/bin/narser ls linux.nar / -Rl" "./nix-nar/bin/nix-nar ls linux.nar / -Rl" "./narz/bin/narz ls linux.nar / -rl"
Benchmark 1 (22 runs): ./nix/bin/nix nar ls linux.nar / -Rl
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          2.78s  Â± 15.2ms                              2.76s  â€¦ 2.81s                                     0 ( 0%)        0%
  peak_rss           3.77GB Â±  128KB                              3.77GB â€¦ 3.77GB                                    0 ( 0%)        0%
  cpu_cycles         3.18G  Â± 48.1M                               3.13G  â€¦ 3.28G                                     0 ( 0%)        0%
  instructions       2.54G  Â±  475K                               2.54G  â€¦ 2.55G                                     0 ( 0%)        0%
  cache_references    137M  Â± 2.96M                                135M  â€¦  146M                                     3 (14%)        0%
  cache_misses       74.0M  Â±  247K                               73.5M  â€¦ 74.3M                                     0 ( 0%)        0%
  branch_misses      5.11M  Â± 1.05M                               4.35M  â€¦ 7.64M                                     0 ( 0%)        0%
Benchmark 2 (21 runs): ./lix/bin/nix nar ls linux.nar / -Rl
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          2.96s  Â± 19.7ms                              2.93s  â€¦ 3.00s                                     0 ( 0%)        ðŸ’©+  6.3% Â±  0.4%
  peak_rss           3.75GB Â±  146KB                              3.75GB â€¦ 3.75GB                                    0 ( 0%)          -  0.4% Â±  0.0%
  cpu_cycles         3.79G  Â± 59.3M                               3.73G  â€¦ 3.92G                                     0 ( 0%)        ðŸ’©+ 19.2% Â±  1.0%
  instructions       3.92G  Â± 1.46M                               3.92G  â€¦ 3.92G                                     1 ( 5%)        ðŸ’©+ 54.0% Â±  0.0%
  cache_references    131M  Â± 3.16M                                130M  â€¦  145M                                     1 ( 5%)        âš¡-  4.2% Â±  1.4%
  cache_misses       71.6M  Â±  334K                               70.6M  â€¦ 72.2M                                     1 ( 5%)        âš¡-  3.3% Â±  0.2%
  branch_misses      6.87M  Â± 1.35M                               5.86M  â€¦ 10.5M                                     0 ( 0%)        ðŸ’©+ 34.3% Â± 14.5%
Benchmark 3 (476 runs): ./narser/bin/narser ls linux.nar / -Rl
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           126ms Â± 2.41ms                               124ms â€¦  143ms                                   67 (14%)        âš¡- 95.5% Â±  0.1%
  peak_rss           33.4MB Â± 17.9KB                              33.3MB â€¦ 33.4MB                                    9 ( 2%)        âš¡- 99.1% Â±  0.0%
  cpu_cycles          141M  Â± 4.36M                                138M  â€¦  177M                                    83 (17%)        âš¡- 95.6% Â±  0.1%
  instructions        312M  Â± 10.0                                 312M  â€¦  312M                                    31 ( 7%)        âš¡- 87.8% Â±  0.0%
  cache_references   2.11M  Â± 39.6K                               1.94M  â€¦ 2.19M                                    27 ( 6%)        âš¡- 98.5% Â±  0.2%
  cache_misses        926K  Â± 31.6K                                789K  â€¦  992K                                    46 (10%)        âš¡- 98.7% Â±  0.0%
  branch_misses       537K  Â± 9.22K                                532K  â€¦  595K                                    78 (16%)        âš¡- 89.5% Â±  1.8%
Benchmark 4 (90 runs): ./nix-nar/bin/nix-nar ls linux.nar / -Rl
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           670ms Â± 4.88ms                               661ms â€¦  690ms                                    1 ( 1%)        âš¡- 75.9% Â±  0.1%
  peak_rss           14.0MB Â± 79.7KB                              13.8MB â€¦ 14.2MB                                    1 ( 1%)        âš¡- 99.6% Â±  0.0%
  cpu_cycles         1.25G  Â± 13.9M                               1.22G  â€¦ 1.30G                                     1 ( 1%)        âš¡- 60.8% Â±  0.4%
  instructions       2.23G  Â± 86.0K                               2.23G  â€¦ 2.23G                                     1 ( 1%)        âš¡- 12.5% Â±  0.0%
  cache_references   13.3M  Â± 3.47M                               7.86M  â€¦ 33.4M                                     2 ( 2%)        âš¡- 90.3% Â±  1.2%
  cache_misses        302K  Â± 8.39K                                283K  â€¦  317K                                     0 ( 0%)        âš¡- 99.6% Â±  0.1%
  branch_misses      2.08M  Â±  271K                               1.64M  â€¦ 2.80M                                     0 ( 0%)        âš¡- 59.2% Â±  4.8%
Benchmark 5 (12 runs): ./narz/bin/narz ls linux.nar / -rl
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          5.04s  Â± 19.3ms                              5.01s  â€¦ 5.06s                                     0 ( 0%)        ðŸ’©+ 81.1% Â±  0.4%
  peak_rss           1.85GB Â± 83.2KB                              1.85GB â€¦ 1.85GB                                    0 ( 0%)        âš¡- 51.0% Â±  0.0%
  cpu_cycles         1.14G  Â± 2.90M                               1.14G  â€¦ 1.15G                                     0 ( 0%)        âš¡- 64.1% Â±  0.9%
  instructions       1.12G  Â±  122                                1.12G  â€¦ 1.12G                                     1 ( 8%)        âš¡- 56.1% Â±  0.0%
  cache_references   5.74M  Â±  270K                               5.38M  â€¦ 6.22M                                     0 ( 0%)        âš¡- 95.8% Â±  1.3%
  cache_misses        866K  Â± 7.77K                                854K  â€¦  878K                                     0 ( 0%)        âš¡- 98.8% Â±  0.2%
  branch_misses      2.47M  Â± 79.1K                               2.36M  â€¦ 2.61M                                     0 ( 0%)        âš¡- 51.7% Â± 12.2%

poop -d 60000 "./nix/bin/nix nar ls linux.nar / -l" "./lix/bin/nix nar ls linux.nar / -l" "./narser/bin/narser ls linux.nar / -l" "./nix-nar/bin/nix-nar ls linux.nar / -l" "./narz/bin/narz ls linux.nar / -l"
Benchmark 1 (25 runs): ./nix/bin/nix nar ls linux.nar / -l
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          2.46s  Â± 10.2ms                              2.44s  â€¦ 2.49s                                     1 ( 4%)        0%
  peak_rss           3.77GB Â±  113KB                              3.77GB â€¦ 3.77GB                                    1 ( 4%)        0%
  cpu_cycles         2.48G  Â± 18.3M                               2.46G  â€¦ 2.53G                                     1 ( 4%)        0%
  instructions       1.15G  Â±  125K                               1.15G  â€¦ 1.15G                                     0 ( 0%)        0%
  cache_references    125M  Â± 1.08M                                124M  â€¦  130M                                     1 ( 4%)        0%
  cache_misses       71.5M  Â±  160K                               71.2M  â€¦ 71.7M                                     4 (16%)        0%
  branch_misses      1.92M  Â±  267K                               1.70M  â€¦ 2.60M                                     0 ( 0%)        0%
Benchmark 2 (24 runs): ./lix/bin/nix nar ls linux.nar / -l
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          2.58s  Â± 12.0ms                              2.56s  â€¦ 2.62s                                     1 ( 4%)        ðŸ’©+  4.8% Â±  0.3%
  peak_rss           3.75GB Â±  153KB                              3.75GB â€¦ 3.75GB                                    0 ( 0%)          -  0.4% Â±  0.0%
  cpu_cycles         2.91G  Â± 30.0M                               2.88G  â€¦ 3.01G                                     1 ( 4%)        ðŸ’©+ 17.5% Â±  0.6%
  instructions       2.18G  Â± 7.76K                               2.18G  â€¦ 2.18G                                     0 ( 0%)        ðŸ’©+ 90.1% Â±  0.0%
  cache_references    128M  Â± 2.23M                                126M  â€¦  136M                                     4 (17%)        ðŸ’©+  2.1% Â±  0.8%
  cache_misses       70.8M  Â±  194K                               70.2M  â€¦ 71.1M                                     2 ( 8%)          -  1.0% Â±  0.1%
  branch_misses      4.20M  Â±  589K                               3.75M  â€¦ 6.02M                                     2 ( 8%)        ðŸ’©+118.6% Â± 13.6%
Benchmark 3 (594 runs): ./narser/bin/narser ls linux.nar / -l
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           101ms Â± 2.01ms                              99.6ms â€¦  119ms                                   75 (13%)        âš¡- 95.9% Â±  0.0%
  peak_rss           33.4MB Â± 16.0KB                              33.3MB â€¦ 33.4MB                                    9 ( 2%)        âš¡- 99.1% Â±  0.0%
  cpu_cycles         54.6M  Â±  733K                               54.1M  â€¦ 60.7M                                    75 (13%)        âš¡- 97.8% Â±  0.1%
  instructions       98.0M  Â± 6.99                                98.0M  â€¦ 98.0M                                    27 ( 5%)        âš¡- 91.4% Â±  0.0%
  cache_references    868K  Â± 20.7K                                817K  â€¦  933K                                     1 ( 0%)        âš¡- 99.3% Â±  0.1%
  cache_misses       11.7K  Â± 1.07K                               9.49K  â€¦ 16.0K                                    49 ( 8%)        âš¡-100.0% Â±  0.0%
  branch_misses       340K  Â± 8.53K                                336K  â€¦  426K                                    85 (14%)        âš¡- 82.3% Â±  1.1%
Benchmark 4 (116 runs): ./nix-nar/bin/nix-nar ls linux.nar / -l
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           520ms Â± 4.63ms                               513ms â€¦  536ms                                    4 ( 3%)        âš¡- 78.9% Â±  0.1%
  peak_rss           2.39MB Â± 60.2KB                              2.28MB â€¦ 2.56MB                                    0 ( 0%)        âš¡- 99.9% Â±  0.0%
  cpu_cycles          949M  Â± 10.9M                                935M  â€¦ 1.01G                                     3 ( 3%)        âš¡- 61.7% Â±  0.2%
  instructions       1.52G  Â± 78.9K                               1.52G  â€¦ 1.52G                                     0 ( 0%)        ðŸ’©+ 32.3% Â±  0.0%
  cache_references   8.54M  Â± 2.68M                               4.95M  â€¦ 16.9M                                     7 ( 6%)        âš¡- 93.2% Â±  0.9%
  cache_misses       59.3K  Â± 8.42K                               45.1K  â€¦ 76.5K                                     0 ( 0%)        âš¡- 99.9% Â±  0.0%
  branch_misses      1.22M  Â±  197K                                988K  â€¦ 1.79M                                     2 ( 2%)        âš¡- 36.4% Â±  4.7%
Benchmark 5 (17 runs): ./narz/bin/narz ls linux.nar / -l
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          3.64s  Â± 7.09ms                              3.63s  â€¦ 3.65s                                     0 ( 0%)        ðŸ’©+ 47.6% Â±  0.2%
  peak_rss           1.85GB Â± 31.8KB                              1.85GB â€¦ 1.85GB                                    1 ( 6%)        âš¡- 51.0% Â±  0.0%
  cpu_cycles          877M  Â± 2.27M                                874M  â€¦  882M                                     0 ( 0%)        âš¡- 64.6% Â±  0.4%
  instructions        869M  Â±  131                                 869M  â€¦  869M                                     0 ( 0%)        âš¡- 24.1% Â±  0.0%
  cache_references   4.38M  Â±  223K                               4.20M  â€¦ 5.10M                                     1 ( 6%)        âš¡- 96.5% Â±  0.4%
  cache_misses        116K  Â± 5.46K                                105K  â€¦  123K                                     0 ( 0%)        âš¡- 99.8% Â±  0.1%
  branch_misses      1.80M  Â± 49.8K                               1.75M  â€¦ 1.88M                                     0 ( 0%)          -  6.1% Â±  6.9%

poop -d 60000 "./nix/bin/nix nar cat linux.nar /README" "./lix/bin/nix nar cat linux.nar /README" "./narser/bin/narser cat linux.nar /README" "./narser/bin/narser cat linux.nar /README -L" "./nix-nar/bin/nix-nar cat linux.nar /README " "./narz/bin/narz cat linux.nar /README"
Benchmark 1 (25 runs): ./nix/bin/nix nar cat linux.nar /README
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          2.44s  Â± 9.08ms                              2.42s  â€¦ 2.46s                                     0 ( 0%)        0%
  peak_rss           3.75GB Â±  155KB                              3.75GB â€¦ 3.75GB                                    0 ( 0%)        0%
  cpu_cycles         2.42G  Â± 11.4M                               2.40G  â€¦ 2.45G                                     0 ( 0%)        0%
  instructions       1.07G  Â±  298K                               1.07G  â€¦ 1.07G                                     0 ( 0%)        0%
  cache_references    125M  Â± 1.48M                                123M  â€¦  130M                                     3 (12%)        0%
  cache_misses       70.3M  Â±  248K                               69.6M  â€¦ 70.7M                                     4 (16%)        0%
  branch_misses      1.74M  Â±  224K                               1.52M  â€¦ 2.13M                                     0 ( 0%)        0%
Benchmark 2 (24 runs): ./lix/bin/nix nar cat linux.nar /README
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          2.58s  Â± 9.85ms                              2.57s  â€¦ 2.60s                                     0 ( 0%)        ðŸ’©+  6.0% Â±  0.2%
  peak_rss           3.75GB Â±  117KB                              3.75GB â€¦ 3.75GB                                    0 ( 0%)          +  0.2% Â±  0.0%
  cpu_cycles         2.91G  Â± 26.0M                               2.88G  â€¦ 2.98G                                     2 ( 8%)        ðŸ’©+ 20.2% Â±  0.5%
  instructions       2.19G  Â± 7.16K                               2.19G  â€¦ 2.19G                                     0 ( 0%)        ðŸ’©+103.9% Â±  0.0%
  cache_references    128M  Â± 1.24M                                127M  â€¦  132M                                     2 ( 8%)        ðŸ’©+  2.4% Â±  0.6%
  cache_misses       70.7M  Â±  337K                               69.5M  â€¦ 71.3M                                     1 ( 4%)          +  0.6% Â±  0.2%
  branch_misses      4.36M  Â±  562K                               3.79M  â€¦ 5.86M                                     3 (13%)        ðŸ’©+151.0% Â± 14.1%
Benchmark 3 (6485 runs): ./narser/bin/narser cat linux.nar /README
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          9.21ms Â±  381us                              9.06ms â€¦ 22.3ms                                  393 ( 6%)        âš¡- 99.6% Â±  0.0%
  peak_rss           1.05MB Â± 1.15KB                               983KB â€¦ 1.05MB                                    2 ( 0%)        âš¡-100.0% Â±  0.0%
  cpu_cycles         5.22M  Â±  202K                               5.13M  â€¦ 8.15M                                   409 ( 6%)        âš¡- 99.8% Â±  0.0%
  instructions       9.41M  Â± 1.91                                9.41M  â€¦ 9.41M                                    55 ( 1%)        âš¡- 99.1% Â±  0.0%
  cache_references   18.5K  Â± 1.39K                               15.4K  â€¦ 43.0K                                   204 ( 3%)        âš¡-100.0% Â±  0.0%
  cache_misses       1.60K  Â±  267                                1.16K  â€¦ 4.96K                                   224 ( 3%)        âš¡-100.0% Â±  0.0%
  branch_misses      45.1K  Â± 2.43K                               43.8K  â€¦ 76.9K                                   329 ( 5%)        âš¡- 97.4% Â±  0.3%
Benchmark 4 (52 runs): ./narser/bin/narser cat linux.nar /README -L
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          1.17s  Â± 7.37ms                              1.16s  â€¦ 1.19s                                     0 ( 0%)        âš¡- 52.0% Â±  0.2%
  peak_rss           1.87GB Â± 70.9KB                              1.86GB â€¦ 1.87GB                                    0 ( 0%)        âš¡- 50.2% Â±  0.0%
  cpu_cycles          431M  Â± 1.43M                                428M  â€¦  435M                                     0 ( 0%)        âš¡- 82.2% Â±  0.1%
  instructions        404M  Â± 10.9                                 404M  â€¦  404M                                     0 ( 0%)        âš¡- 62.3% Â±  0.0%
  cache_references   11.5M  Â±  342K                               10.8M  â€¦ 12.1M                                     0 ( 0%)        âš¡- 90.8% Â±  0.3%
  cache_misses       2.47M  Â± 13.7K                               2.43M  â€¦ 2.50M                                     4 ( 8%)        âš¡- 96.5% Â±  0.1%
  branch_misses       711K  Â± 14.4K                                694K  â€¦  755K                                     3 ( 6%)        âš¡- 59.1% Â±  3.6%
Benchmark 5 (767 runs): ./nix-nar/bin/nix-nar cat linux.nar /README
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          78.3ms Â± 1.57ms                              77.0ms â€¦ 95.3ms                                   77 (10%)        âš¡- 96.8% Â±  0.0%
  peak_rss           2.40MB Â± 61.4KB                              2.24MB â€¦ 2.56MB                                    0 ( 0%)        âš¡- 99.9% Â±  0.0%
  cpu_cycles          115M  Â± 2.87M                                113M  â€¦  152M                                    62 ( 8%)        âš¡- 95.3% Â±  0.1%
  instructions        166M  Â± 10.1K                                166M  â€¦  166M                                     0 ( 0%)        âš¡- 84.6% Â±  0.0%
  cache_references   1.33M  Â±  432K                                490K  â€¦ 4.99M                                    14 ( 2%)        âš¡- 98.9% Â±  0.2%
  cache_misses       21.6K  Â± 1.93K                               18.8K  â€¦ 33.8K                                    67 ( 9%)        âš¡-100.0% Â±  0.0%
  branch_misses       127K  Â± 61.2K                                106K  â€¦  820K                                    77 (10%)        âš¡- 92.7% Â±  1.6%
Benchmark 6 (17 runs): ./narz/bin/narz cat linux.nar /README
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          3.67s  Â± 12.4ms                              3.65s  â€¦ 3.69s                                     0 ( 0%)        ðŸ’©+ 50.5% Â±  0.3%
  peak_rss           1.85GB Â± 43.5KB                              1.85GB â€¦ 1.85GB                                    2 (12%)        âš¡- 50.7% Â±  0.0%
  cpu_cycles          879M  Â± 3.07M                                873M  â€¦  885M                                     0 ( 0%)        âš¡- 63.6% Â±  0.2%
  instructions        869M  Â± 8.34K                                869M  â€¦  869M                                     0 ( 0%)        âš¡- 18.9% Â±  0.0%
  cache_references   4.42M  Â±  261K                               3.83M  â€¦ 4.85M                                     5 (29%)        âš¡- 96.5% Â±  0.6%
  cache_misses        118K  Â± 5.25K                                106K  â€¦  126K                                     0 ( 0%)        âš¡- 99.8% Â±  0.2%
  branch_misses      1.87M  Â± 62.0K                               1.79M  â€¦ 1.96M                                     0 ( 0%)        ðŸ’©+  7.8% Â±  6.5%

poop -d 60000 "./nix/bin/nix nar cat linux.nar /virt/lib/irqbypass.c" "./lix/bin/nix nar cat linux.nar /virt/lib/irqbypass.c" "./narser/bin/narser cat linux.nar /virt/lib/irqbypass.c" "./narser/bin/narser cat linux.nar /virt/lib/irqbypass.c -L" "./nix-nar/bin/nix-nar cat linux.nar /virt/lib/irqbypass.c " "./narz/bin/narz cat linux.nar /virt/lib/irqbypass.c"
Benchmark 1 (25 runs): ./nix/bin/nix nar cat linux.nar /virt/lib/irqbypass.c
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          2.44s  Â± 8.96ms                              2.42s  â€¦ 2.45s                                     0 ( 0%)        0%
  peak_rss           3.75GB Â±  129KB                              3.75GB â€¦ 3.75GB                                    0 ( 0%)        0%
  cpu_cycles         2.42G  Â± 13.1M                               2.41G  â€¦ 2.45G                                     0 ( 0%)        0%
  instructions       1.07G  Â±  320K                               1.07G  â€¦ 1.07G                                     0 ( 0%)        0%
  cache_references    125M  Â± 1.87M                                123M  â€¦  131M                                     2 ( 8%)        0%
  cache_misses       70.3M  Â±  203K                               69.8M  â€¦ 70.5M                                     0 ( 0%)        0%
  branch_misses      1.82M  Â±  284K                               1.53M  â€¦ 2.45M                                     0 ( 0%)        0%
Benchmark 2 (24 runs): ./lix/bin/nix nar cat linux.nar /virt/lib/irqbypass.c
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          2.58s  Â± 10.2ms                              2.57s  â€¦ 2.61s                                     0 ( 0%)        ðŸ’©+  6.0% Â±  0.2%
  peak_rss           3.75GB Â±  102KB                              3.75GB â€¦ 3.75GB                                    1 ( 4%)          +  0.2% Â±  0.0%
  cpu_cycles         2.93G  Â± 24.4M                               2.90G  â€¦ 3.00G                                     0 ( 0%)        ðŸ’©+ 20.9% Â±  0.5%
  instructions       2.21G  Â± 9.47K                               2.21G  â€¦ 2.21G                                     0 ( 0%)        ðŸ’©+105.9% Â±  0.0%
  cache_references    129M  Â±  976K                                127M  â€¦  132M                                     2 ( 8%)        ðŸ’©+  3.0% Â±  0.7%
  cache_misses       71.8M  Â±  186K                               71.4M  â€¦ 72.0M                                     0 ( 0%)        ðŸ’©+  2.1% Â±  0.2%
  branch_misses      4.27M  Â±  538K                               3.77M  â€¦ 5.88M                                     1 ( 4%)        ðŸ’©+135.2% Â± 13.6%
Benchmark 3 (728 runs): ./narser/bin/narser cat linux.nar /virt/lib/irqbypass.c
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          82.4ms Â±  822us                              81.9ms â€¦ 99.6ms                                   21 ( 3%)        âš¡- 96.6% Â±  0.0%
  peak_rss           1.04MB Â±    0                                1.04MB â€¦ 1.04MB                                    0 ( 0%)        âš¡-100.0% Â±  0.0%
  cpu_cycles         42.7M  Â±  492K                               42.3M  â€¦ 46.9M                                    59 ( 8%)        âš¡- 98.2% Â±  0.0%
  instructions       80.8M  Â± 4.74                                80.8M  â€¦ 80.8M                                     5 ( 1%)        âš¡- 92.5% Â±  0.0%
  cache_references   69.0K  Â± 6.67K                               52.5K  â€¦  104K                                    44 ( 6%)        âš¡- 99.9% Â±  0.1%
  cache_misses       4.63K  Â±  892                                3.44K  â€¦ 9.06K                                    64 ( 9%)        âš¡-100.0% Â±  0.0%
  branch_misses       345K  Â± 5.50K                                341K  â€¦  401K                                    70 (10%)        âš¡- 81.0% Â±  1.1%
Benchmark 4 (52 runs): ./narser/bin/narser cat linux.nar /virt/lib/irqbypass.c -L
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          1.17s  Â± 6.50ms                              1.16s  â€¦ 1.20s                                     3 ( 6%)        âš¡- 52.2% Â±  0.1%
  peak_rss           1.87GB Â± 52.2KB                              1.87GB â€¦ 1.87GB                                   10 (19%)        âš¡- 50.2% Â±  0.0%
  cpu_cycles          430M  Â±  806K                                429M  â€¦  432M                                     0 ( 0%)        âš¡- 82.2% Â±  0.1%
  instructions        404M  Â± 12.2                                 404M  â€¦  404M                                     0 ( 0%)        âš¡- 62.3% Â±  0.0%
  cache_references   11.1M  Â±  220K                               10.7M  â€¦ 11.7M                                     1 ( 2%)        âš¡- 91.1% Â±  0.4%
  cache_misses       2.47M  Â± 15.9K                               2.41M  â€¦ 2.49M                                     4 ( 8%)        âš¡- 96.5% Â±  0.1%
  branch_misses       700K  Â± 5.41K                                694K  â€¦  723K                                     2 ( 4%)        âš¡- 61.5% Â±  4.3%
Benchmark 5 (120 runs): ./nix-nar/bin/nix-nar cat linux.nar /virt/lib/irqbypass.c
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           501ms Â± 4.11ms                               497ms â€¦  526ms                                    8 ( 7%)        âš¡- 79.5% Â±  0.1%
  peak_rss           2.40MB Â± 58.5KB                              2.28MB â€¦ 2.54MB                                    0 ( 0%)        âš¡- 99.9% Â±  0.0%
  cpu_cycles          890M  Â± 11.1M                                880M  â€¦  973M                                    10 ( 8%)        âš¡- 63.2% Â±  0.2%
  instructions       1.38G  Â± 79.9K                               1.38G  â€¦ 1.38G                                     0 ( 0%)        ðŸ’©+ 29.1% Â±  0.0%
  cache_references   7.82M  Â± 3.46M                               3.45M  â€¦ 23.0M                                     3 ( 3%)        âš¡- 93.7% Â±  1.1%
  cache_misses       46.3K  Â± 6.25K                               36.1K  â€¦ 61.7K                                     0 ( 0%)        âš¡- 99.9% Â±  0.1%
  branch_misses      1.01M  Â±  166K                                878K  â€¦ 1.99M                                    11 ( 9%)        âš¡- 44.5% Â±  4.5%
Benchmark 6 (17 runs): ./narz/bin/narz cat linux.nar /virt/lib/irqbypass.c
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          3.65s  Â± 6.68ms                              3.64s  â€¦ 3.67s                                     3 (18%)        ðŸ’©+ 49.6% Â±  0.2%
  peak_rss           1.85GB Â± 31.8KB                              1.85GB â€¦ 1.85GB                                    1 ( 6%)        âš¡- 50.7% Â±  0.0%
  cpu_cycles          876M  Â± 2.06M                                871M  â€¦  880M                                     1 ( 6%)        âš¡- 63.8% Â±  0.3%
  instructions        869M  Â± 8.88K                                869M  â€¦  869M                                     0 ( 0%)        âš¡- 18.9% Â±  0.0%
  cache_references   4.30M  Â±  408K                               3.65M  â€¦ 5.19M                                     0 ( 0%)        âš¡- 96.6% Â±  0.7%
  cache_misses        118K  Â± 5.40K                                111K  â€¦  130K                                     0 ( 0%)        âš¡- 99.8% Â±  0.1%
  branch_misses      1.81M  Â± 51.5K                               1.74M  â€¦ 1.89M                                     0 ( 0%)          -  0.3% Â±  7.8%

./nix/bin/nix-store --restore out < linux.nar
cmp <(./nix/bin/nix nar pack out) linux.nar
rm -rf out

./lix/bin/nix-store --restore out < linux.nar
cmp <(./nix/bin/nix nar pack out) linux.nar
rm -rf out

./narser/bin/narser unpack linux.nar out
cmp <(./nix/bin/nix nar pack out) linux.nar || exit 1
rm -rf out

rm -rf out ; time ./nix/bin/nix-store --restore out < linux.nar

real	0m1.489s
user	0m0.305s
sys	0m1.178s
rm -rf out ; time ./nix/bin/nix-store --restore out < linux.nar

real	0m1.491s
user	0m0.350s
sys	0m1.135s
rm -rf out ; time ./nix/bin/nix-store --restore out < linux.nar

real	0m1.508s
user	0m0.346s
sys	0m1.156s

rm -rf out ; time ./lix/bin/nix-store --restore out < linux.nar

real	0m1.645s
user	0m0.463s
sys	0m1.176s
rm -rf out ; time ./lix/bin/nix-store --restore out < linux.nar

real	0m1.650s
user	0m0.469s
sys	0m1.174s
rm -rf out ; time ./lix/bin/nix-store --restore out < linux.nar

real	0m1.642s
user	0m0.467s
sys	0m1.169s

rm -rf out ; time ./narser/bin/narser unpack linux.nar out

real	0m1.331s
user	0m0.208s
sys	0m1.115s
rm -rf out ; time ./narser/bin/narser unpack linux.nar out

real	0m1.332s
user	0m0.230s
sys	0m1.096s
rm -rf out ; time ./narser/bin/narser unpack linux.nar out

real	0m1.331s
user	0m0.198s
sys	0m1.127s
