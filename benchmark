[clevor@clevor-laptop-nixos:~/Code/zig/narser]$ nix build nixpkgs#nixVersions.latest -o nix --print-out-paths
/nix/store/r36d4dm29i5pbghrs595n3mqffyp9mgy-nix-2.30.2-man
/nix/store/9y2fzymgsnmyyw3h0828k1sdg61h2y67-nix-2.30.2
[clevor@clevor-laptop-nixos:~/Code/zig/narser]$ rm nix-man
[clevor@clevor-laptop-nixos:~/Code/zig/narser]$ rm -rf linux/
[clevor@clevor-laptop-nixos:~/Code/zig/narser]$ git clone --depth=1 https://github.com/torvalds/linux
Cloning into 'linux'...
remote: Enumerating objects: 95889, done.
remote: Counting objects: 100% (95889/95889), done.
remote: Compressing objects: 100% (85853/85853), done.
remote: Total 95889 (delta 10086), reused 70946 (delta 9021), pack-reused 0 (from 0)
Receiving objects: 100% (95889/95889), 265.57 MiB | 8.49 MiB/s, done.
Resolving deltas: 100% (10086/10086), done.
Updating files: 100% (90500/90500), done.
[clevor@clevor-laptop-nixos:~/Code/zig/narser]$ nix build . -o safe
[clevor@clevor-laptop-nixos:~/Code/zig/narser]$ nix build .#fast -o fast
[clevor@clevor-laptop-nixos:~/Code/zig/narser]$ nix build .#small -o small
[clevor@clevor-laptop-nixos:~/Code/zig/narser]$ cmp <(./nix/bin/nix nar pack linux) <(./safe/bin/narser pack linux)
[clevor@clevor-laptop-nixos:~/Code/zig/narser]$ cmp <(./nix/bin/nix nar pack linux) <(./small/bin/narser pack linux)
[clevor@clevor-laptop-nixos:~/Code/zig/narser]$ cmp <(./nix/bin/nix nar pack linux) <(./fast/bin/narser pack linux)
[clevor@clevor-laptop-nixos:~/Code/zig/narser]$ poop "./nix/bin/nix nar pack linux" "./safe/bin/narser pack linux" "./fast/bin/narser pack linux" "./small/bin/narser pack linux"
Benchmark 1 (3 runs): ./nix/bin/nix nar pack linux
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          2.24s  Â± 9.14ms    2.23s  â€¦ 2.25s           0 ( 0%)        0%
  peak_rss           40.3MB Â±  203KB    40.1MB â€¦ 40.5MB          0 ( 0%)        0%
  cpu_cycles         4.46G  Â± 10.1M     4.45G  â€¦ 4.47G           0 ( 0%)        0%
  instructions       9.55G  Â± 11.8K     9.55G  â€¦ 9.55G           0 ( 0%)        0%
  cache_references   61.8M  Â±  655K     61.3M  â€¦ 62.5M           0 ( 0%)        0%
  cache_misses       5.04M  Â±  107K     4.93M  â€¦ 5.15M           0 ( 0%)        0%
  branch_misses      12.6M  Â±  171K     12.4M  â€¦ 12.8M           0 ( 0%)        0%
Benchmark 2 (7 runs): ./safe/bin/narser pack linux
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           806ms Â± 4.45ms     803ms â€¦  816ms          0 ( 0%)        âš¡- 64.1% Â±  0.4%
  peak_rss           7.05MB Â± 64.0KB    6.96MB â€¦ 7.09MB          0 ( 0%)        âš¡- 82.5% Â±  0.5%
  cpu_cycles          354M  Â± 3.30M      352M  â€¦  362M           0 ( 0%)        âš¡- 92.1% Â±  0.2%
  instructions        547M  Â±  182       547M  â€¦  547M           0 ( 0%)        âš¡- 94.3% Â±  0.0%
  cache_references   30.4M  Â±  712K     29.0M  â€¦ 31.4M           0 ( 0%)        âš¡- 50.8% Â±  1.8%
  cache_misses       3.74M  Â±  194K     3.48M  â€¦ 3.97M           0 ( 0%)        âš¡- 25.7% Â±  5.6%
  branch_misses      1.60M  Â± 7.39K     1.59M  â€¦ 1.62M           0 ( 0%)        âš¡- 87.3% Â±  1.1%
Benchmark 3 (7 runs): ./fast/bin/narser pack linux
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           749ms Â± 2.11ms     747ms â€¦  753ms          0 ( 0%)        âš¡- 66.6% Â±  0.3%
  peak_rss           6.80MB Â± 49.5KB    6.68MB â€¦ 6.82MB          1 (14%)        âš¡- 83.1% Â±  0.4%
  cpu_cycles          169M  Â± 1.89M      166M  â€¦  172M           0 ( 0%)        âš¡- 96.2% Â±  0.2%
  instructions        239M  Â±  121       239M  â€¦  239M           0 ( 0%)        âš¡- 97.5% Â±  0.0%
  cache_references   8.59M  Â±  377K     8.16M  â€¦ 9.12M           0 ( 0%)        âš¡- 86.1% Â±  1.2%
  cache_misses       1.36M  Â± 16.3K     1.34M  â€¦ 1.37M           0 ( 0%)        âš¡- 73.0% Â±  1.8%
  branch_misses      1.01M  Â± 2.12K     1.01M  â€¦ 1.01M           0 ( 0%)        âš¡- 92.0% Â±  1.1%
Benchmark 4 (7 runs): ./small/bin/narser pack linux
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           788ms Â± 9.35ms     783ms â€¦  809ms          0 ( 0%)        âš¡- 64.9% Â±  0.7%
  peak_rss           6.82MB Â±    0      6.82MB â€¦ 6.82MB          0 ( 0%)        âš¡- 83.1% Â±  0.4%
  cpu_cycles          279M  Â± 5.86M      275M  â€¦  292M           0 ( 0%)        âš¡- 93.7% Â±  0.3%
  instructions        332M  Â±  310       332M  â€¦  332M           0 ( 0%)        âš¡- 96.5% Â±  0.0%
  cache_references   11.2M  Â±  341K     10.7M  â€¦ 11.6M           0 ( 0%)        âš¡- 81.9% Â±  1.1%
  cache_misses       1.52M  Â±  235K     1.35M  â€¦ 2.03M           0 ( 0%)        âš¡- 69.8% Â±  6.6%
  branch_misses      1.21M  Â± 3.03K     1.21M  â€¦ 1.21M           0 ( 0%)        âš¡- 90.4% Â±  1.1%
[clevor@clevor-laptop-nixos:~/Code/zig/narser]$ poop "./nix/bin/nix hash path linux" "./safe/bin/narser hash linux" "./fast/bin/narser hash linux" "./small/bin/narser hash linux"
Benchmark 1 (3 runs): ./nix/bin/nix hash path linux
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          6.33s  Â± 18.4ms    6.31s  â€¦ 6.34s           0 ( 0%)        0%
  peak_rss           40.0MB Â± 84.0KB    39.9MB â€¦ 40.1MB          0 ( 0%)        0%
  cpu_cycles         18.7G  Â± 19.9M     18.7G  â€¦ 18.7G           0 ( 0%)        0%
  instructions       60.9G  Â± 72.5K     60.9G  â€¦ 60.9G           0 ( 0%)        0%
  cache_references   89.3M  Â± 2.94M     86.6M  â€¦ 92.4M           0 ( 0%)        0%
  cache_misses       6.20M  Â± 1.84M     5.01M  â€¦ 8.32M           0 ( 0%)        0%
  branch_misses      12.8M  Â±  608K     12.2M  â€¦ 13.4M           0 ( 0%)        0%
Benchmark 2 (3 runs): ./safe/bin/narser hash linux
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          9.17s  Â± 34.8ms    9.13s  â€¦ 9.20s           0 ( 0%)        ðŸ’©+ 44.9% Â±  1.0%
  peak_rss           6.92MB Â± 75.7KB    6.83MB â€¦ 6.96MB          0 ( 0%)        âš¡- 82.7% Â±  0.5%
  cpu_cycles         26.9G  Â± 59.8M     26.8G  â€¦ 26.9G           0 ( 0%)        ðŸ’©+ 43.7% Â±  0.5%
  instructions       97.7G  Â±  128      97.7G  â€¦ 97.7G           0 ( 0%)        ðŸ’©+ 60.5% Â±  0.0%
  cache_references   34.9M  Â±  800K     34.2M  â€¦ 35.8M           0 ( 0%)        âš¡- 60.9% Â±  5.5%
  cache_misses       4.71M  Â± 69.1K     4.65M  â€¦ 4.78M           0 ( 0%)          - 24.0% Â± 47.7%
  branch_misses      3.23M  Â±  356K     2.85M  â€¦ 3.55M           0 ( 0%)        âš¡- 74.8% Â±  8.8%
Benchmark 3 (3 runs): ./fast/bin/narser hash linux
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          9.15s  Â± 4.75ms    9.15s  â€¦ 9.16s           0 ( 0%)        ðŸ’©+ 44.6% Â±  0.5%
  peak_rss           6.60MB Â± 75.7KB    6.55MB â€¦ 6.68MB          0 ( 0%)        âš¡- 83.5% Â±  0.5%
  cpu_cycles         26.9G  Â± 13.7M     26.9G  â€¦ 26.9G           0 ( 0%)        ðŸ’©+ 43.8% Â±  0.2%
  instructions       98.2G  Â± 38.1      98.2G  â€¦ 98.2G           0 ( 0%)        ðŸ’©+ 61.3% Â±  0.0%
  cache_references   10.2M  Â± 62.1K     10.1M  â€¦ 10.2M           0 ( 0%)        âš¡- 88.6% Â±  5.3%
  cache_misses       1.66M  Â± 28.0K     1.64M  â€¦ 1.69M           0 ( 0%)        âš¡- 73.2% Â± 47.7%
  branch_misses      2.21M  Â± 15.5K     2.19M  â€¦ 2.22M           0 ( 0%)        âš¡- 82.8% Â±  7.6%
Benchmark 4 (3 runs): ./small/bin/narser hash linux
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          9.56s  Â± 9.26ms    9.55s  â€¦ 9.57s           0 ( 0%)        ðŸ’©+ 51.0% Â±  0.5%
  peak_rss           6.64MB Â± 75.7KB    6.55MB â€¦ 6.68MB          0 ( 0%)        âš¡- 83.4% Â±  0.5%
  cpu_cycles         28.3G  Â± 26.6M     28.3G  â€¦ 28.3G           0 ( 0%)        ðŸ’©+ 51.5% Â±  0.3%
  instructions        102G  Â±  148       102G  â€¦  102G           0 ( 0%)        ðŸ’©+ 67.6% Â±  0.0%
  cache_references   13.8M  Â±  909K     13.1M  â€¦ 14.8M           0 ( 0%)        âš¡- 84.6% Â±  5.5%
  cache_misses       1.75M  Â± 14.7K     1.73M  â€¦ 1.76M           0 ( 0%)        âš¡- 71.8% Â± 47.7%
  branch_misses      2.61M  Â± 58.4K     2.55M  â€¦ 2.67M           0 ( 0%)        âš¡- 79.6% Â±  7.7%
[clevor@clevor-laptop-nixos:~/Code/zig/narser]$ git log | head -1
commit 8cd0ba99de33cbf4b1091e26dcfe93097d2579d1
