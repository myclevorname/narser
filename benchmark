
echo $1
/tmp/clevor/tests/

mkdir $1 || exit 1
cd $1

nix build git+https://git.lix.systems/lix-project/lix?rev=6ea1d8e37e81104a2ee81f808605156f022c7a79 -o lix >& /dev/null || exit 1
nix build github:NixOS/nix/ad2360c59f7460c48ea982c32e55bfc01bfe527c -o nix >& /dev/null || exit 1
# narz fails in f790364c93142affa3cc699365545d6a11916a76
nix build git+https://git.sr.ht/~watersucks/narz?rev=760736b98e08c7c741838f5ad020d6d2e33b5e57 -o narz >& /dev/null || exit 1
nix build git+https://codeberg.org/clevor/narser?rev=56b4532df21b6983f4d5f10aee599fb4a8f75992 -o narser >& /dev/null || exit 1
nix build gitlab:abstract-binary/nix-nar-rs/c8d9250b9be837abafa0046cb9c2a852b846da6a -o nix-nar >& /dev/null || exit 1

git clone https://github.com/torvalds/linux --depth=1 -q
cd linux
git log | head
commit 6f3b6e91f7201e248d83232538db14d30100e9c7
Author: Linus Torvalds <torvalds@linux-foundation.org>
Date:   Fri Oct 17 08:45:54 2025 -0700

    Merge tag 'io_uring-6.18-20251016' of git://git.kernel.org/pub/scm/linux/kernel/git/axboe/linux
    
    Pull io_uring fixes from Jens Axboe:
    
     - Revert of a change that went into an older kernel, and which has been
       reported to cause a regression for some write workloads on LVM while
cd ..

nix nar pack linux > linux.nar

cmp <(./nix/bin/nix nar pack linux) <(./lix/bin/nix nar dump-path linux)
cmp <(./nix/bin/nix nar pack linux) <(./narser/bin/narser pack linux) || exit 1
cmp <(./nix/bin/nix nar pack linux) <(./nix-nar/bin/nix-nar dump-path linux)

cmp <(./nix/bin/nix nar cat linux.nar /README) <(./lix/bin/nix nar cat linux.nar /README)
cmp <(./nix/bin/nix nar cat linux.nar /README) <(./narser/bin/narser cat linux.nar /README) || exit 1
cmp <(./nix/bin/nix nar cat linux.nar /README) <(./narz/bin/narz cat linux.nar /README)
cmp <(./nix/bin/nix nar cat linux.nar /README) <(./nix-nar/bin/nix-nar cat linux.nar /README)

cmp <(./nix/bin/nix nar ls linux.nar /) <(./lix/bin/nix nar ls linux.nar /)
cmp <(./nix/bin/nix nar ls linux.nar /) <(./narser/bin/narser ls linux.nar /) || exit 1
cmp <(./nix/bin/nix nar ls linux.nar / 2> /dev/null) <(./narz/bin/narz ls linux.nar / 2> /dev/null)
/dev/fd/63 /dev/fd/62 differ: byte 1, line 1
cmp <(./nix/bin/nix nar ls linux.nar /) <(./nix-nar/bin/nix-nar ls linux.nar /)

cmp <(./nix/bin/nix nar ls linux.nar / -l) <(./lix/bin/nix nar ls linux.nar / -l)
cmp <(./nix/bin/nix nar ls linux.nar / -l) <(./narser/bin/narser ls linux.nar / -l) || exit 1
cmp <(./nix/bin/nix nar ls linux.nar / -l 2> /dev/null) <(./narz/bin/narz ls linux.nar / -l 2> /dev/null)
/dev/fd/63 /dev/fd/62 differ: byte 1, line 1
cmp <(./nix/bin/nix nar ls linux.nar / -l) <(./nix-nar/bin/nix-nar ls linux.nar / -l)

cmp <(./nix/bin/nix nar ls linux.nar / -lR) <(./lix/bin/nix nar ls linux.nar / -lR)
cmp <(./nix/bin/nix nar ls linux.nar / -lR) <(./narser/bin/narser ls linux.nar / -lR) || exit 1
cmp <(./nix/bin/nix nar ls linux.nar / -lR 2> /dev/null) <(./narz/bin/narz ls linux.nar / -lr 2> /dev/null)
/dev/fd/63 /dev/fd/62 differ: byte 3, line 1
cmp <(./nix/bin/nix nar ls linux.nar / -lR) <(./nix-nar/bin/nix-nar ls linux.nar / -lR)

cmp <(./nix/bin/nix nar ls linux.nar / -R) <(./lix/bin/nix nar ls linux.nar / -R)
cmp <(./nix/bin/nix nar ls linux.nar / -R) <(./narser/bin/narser ls linux.nar / -R) || exit 1
cmp <(./nix/bin/nix nar ls linux.nar / -R 2> /dev/null) <(./narz/bin/narz ls linux.nar / -r 2> /dev/null)
/dev/fd/63 /dev/fd/62 differ: byte 2, line 1
cmp <(./nix/bin/nix nar ls linux.nar / -R) <(./nix-nar/bin/nix-nar ls linux.nar / -R)


poop -d 60000 "./nix/bin/nix nar pack linux" "./lix/bin/nix nar dump-path linux" "./narser/bin/narser pack linux" "./nix-nar/bin/nix-nar dump-path linux"
Benchmark 1 (32 runs): ./nix/bin/nix nar pack linux
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          1.90s  Â± 51.5ms                              1.85s  â€¦ 2.01s                                     6 (19%)        0%
  peak_rss           38.2MB Â± 85.0KB                              38.0MB â€¦ 38.4MB                                    0 ( 0%)        0%
  cpu_cycles         3.46G  Â±  173M                               3.32G  â€¦ 3.83G                                     6 (19%)        0%
  instructions       7.41G  Â±  172K                               7.41G  â€¦ 7.41G                                     0 ( 0%)        0%
  cache_references   51.8M  Â± 2.25M                               48.7M  â€¦ 57.3M                                     0 ( 0%)        0%
  cache_misses       4.39M  Â± 36.4K                               4.31M  â€¦ 4.46M                                     1 ( 3%)        0%
  branch_misses      10.9M  Â± 3.73M                               8.06M  â€¦ 18.8M                                     6 (19%)        0%
Benchmark 2 (52 runs): ./lix/bin/nix nar dump-path linux
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          1.17s  Â± 18.0ms                              1.15s  â€¦ 1.22s                                     0 ( 0%)        âš¡- 38.1% Â±  0.8%
  peak_rss           34.1MB Â±  150KB                              33.8MB â€¦ 34.5MB                                    0 ( 0%)        âš¡- 10.7% Â±  0.2%
  cpu_cycles         1.39G  Â± 52.0M                               1.34G  â€¦ 1.50G                                     0 ( 0%)        âš¡- 59.8% Â±  1.5%
  instructions       1.84G  Â± 8.93K                               1.84G  â€¦ 1.84G                                     0 ( 0%)        âš¡- 75.2% Â±  0.0%
  cache_references   86.2M  Â± 3.19M                               80.8M  â€¦ 95.0M                                     1 ( 2%)        ðŸ’©+ 66.4% Â±  2.5%
  cache_misses        762K  Â± 24.7K                                733K  â€¦  893K                                     3 ( 6%)        âš¡- 82.6% Â±  0.3%
  branch_misses      4.37M  Â± 1.08M                               3.36M  â€¦ 6.75M                                     0 ( 0%)        âš¡- 59.9% Â± 10.0%
Benchmark 3 (80 runs): ./narser/bin/narser pack linux
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           751ms Â± 4.33ms                               743ms â€¦  770ms                                    2 ( 3%)        âš¡- 60.4% Â±  0.6%
  peak_rss           1.19MB Â±    0                                1.19MB â€¦ 1.19MB                                    0 ( 0%)        âš¡- 96.9% Â±  0.0%
  cpu_cycles          239M  Â± 1.94M                                235M  â€¦  244M                                     0 ( 0%)        âš¡- 93.1% Â±  1.1%
  instructions        432M  Â± 13.7                                 432M  â€¦  432M                                     2 ( 3%)        âš¡- 94.2% Â±  0.0%
  cache_references   6.72M  Â±  889K                               5.50M  â€¦ 9.96M                                     5 ( 6%)        âš¡- 87.0% Â±  1.1%
  cache_misses        177K  Â± 8.88K                                157K  â€¦  199K                                     0 ( 0%)        âš¡- 96.0% Â±  0.2%
  branch_misses       759K  Â± 7.64K                                748K  â€¦  791K                                     1 ( 1%)        âš¡- 93.0% Â±  7.5%
Benchmark 4 (39 runs): ./nix-nar/bin/nix-nar dump-path linux
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          1.56s  Â± 6.68ms                              1.55s  â€¦ 1.58s                                     0 ( 0%)        âš¡- 17.6% Â±  0.9%
  peak_rss           2.91MB Â± 72.8KB                              2.73MB â€¦ 3.05MB                                    0 ( 0%)        âš¡- 92.4% Â±  0.1%
  cpu_cycles          553M  Â± 12.6M                                533M  â€¦  585M                                     0 ( 0%)        âš¡- 84.0% Â±  1.6%
  instructions        834M  Â±  317K                                834M  â€¦  836M                                     1 ( 3%)        âš¡- 88.7% Â±  0.0%
  cache_references   11.5M  Â±  672K                               10.1M  â€¦ 13.7M                                     1 ( 3%)        âš¡- 77.8% Â±  1.5%
  cache_misses        397K  Â± 17.7K                                357K  â€¦  432K                                     0 ( 0%)        âš¡- 91.0% Â±  0.3%
  branch_misses      2.87M  Â±  205K                               2.56M  â€¦ 3.42M                                     0 ( 0%)        âš¡- 73.6% Â± 11.0%

poop -d 60000 "./nix/bin/nix nar ls linux.nar /" "./lix/bin/nix nar ls linux.nar /" "./narser/bin/narser ls linux.nar /" "./nix-nar/bin/nix-nar ls linux.nar /" "./narz/bin/narz ls linux.nar /"
Benchmark 1 (84 runs): ./nix/bin/nix nar ls linux.nar /
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           715ms Â± 12.0ms                               701ms â€¦  751ms                                    0 ( 0%)        0%
  peak_rss            142MB Â± 88.0KB                               141MB â€¦  142MB                                    1 ( 1%)        0%
  cpu_cycles         1.54G  Â± 40.7M                               1.50G  â€¦ 1.65G                                     0 ( 0%)        0%
  instructions       2.61G  Â±  937K                               2.60G  â€¦ 2.61G                                     0 ( 0%)        0%
  cache_references   41.9M  Â± 2.58M                               37.7M  â€¦ 51.1M                                     4 ( 5%)        0%
  cache_misses       13.3M  Â± 74.2K                               13.1M  â€¦ 13.5M                                     4 ( 5%)        0%
  branch_misses      6.61M  Â±  987K                               5.71M  â€¦ 8.95M                                     0 ( 0%)        0%
Benchmark 2 (23 runs): ./lix/bin/nix nar ls linux.nar /
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          2.62s  Â± 15.3ms                              2.60s  â€¦ 2.66s                                     0 ( 0%)        ðŸ’©+266.3% Â±  0.8%
  peak_rss           3.75GB Â±  115KB                              3.75GB â€¦ 3.75GB                                    0 ( 0%)        ðŸ’©+2551.4% Â±  0.0%
  cpu_cycles         2.92G  Â± 30.2M                               2.88G  â€¦ 3.02G                                     1 ( 4%)        ðŸ’©+ 89.9% Â±  1.2%
  instructions       2.18G  Â± 8.80K                               2.18G  â€¦ 2.18G                                     0 ( 0%)        âš¡- 16.4% Â±  0.0%
  cache_references    131M  Â± 1.74M                                129M  â€¦  136M                                     1 ( 4%)        ðŸ’©+212.4% Â±  2.7%
  cache_misses       70.6M  Â±  169K                               70.3M  â€¦ 71.0M                                     0 ( 0%)        ðŸ’©+431.8% Â±  0.4%
  branch_misses      4.39M  Â±  575K                               3.77M  â€¦ 6.08M                                     1 ( 4%)        âš¡- 33.7% Â±  6.5%
Benchmark 3 (567 runs): ./narser/bin/narser ls linux.nar /
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           106ms Â± 1.97ms                               104ms â€¦  127ms                                   55 (10%)        âš¡- 85.2% Â±  0.1%
  peak_rss           33.4MB Â± 9.52KB                              33.3MB â€¦ 33.4MB                                    3 ( 1%)        âš¡- 76.4% Â±  0.0%
  cpu_cycles         66.5M  Â± 1.03M                               65.7M  â€¦ 73.5M                                    57 (10%)        âš¡- 95.7% Â±  0.2%
  instructions        121M  Â± 7.17                                 121M  â€¦  121M                                    24 ( 4%)        âš¡- 95.4% Â±  0.0%
  cache_references   1.19M  Â± 29.4K                               1.10M  â€¦ 1.30M                                    11 ( 2%)        âš¡- 97.2% Â±  0.5%
  cache_misses       16.2K  Â± 1.42K                               12.2K  â€¦ 21.1K                                    48 ( 8%)        âš¡- 99.9% Â±  0.0%
  branch_misses       448K  Â± 9.15K                                442K  â€¦  521K                                    77 (14%)        âš¡- 93.2% Â±  1.2%
Benchmark 4 (114 runs): ./nix-nar/bin/nix-nar ls linux.nar /
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           530ms Â± 4.88ms                               522ms â€¦  554ms                                    3 ( 3%)        âš¡- 26.0% Â±  0.3%
  peak_rss           2.39MB Â± 53.1KB                              2.29MB â€¦ 2.54MB                                    0 ( 0%)        âš¡- 98.3% Â±  0.0%
  cpu_cycles          950M  Â± 11.7M                                935M  â€¦ 1.01G                                     1 ( 1%)        âš¡- 38.2% Â±  0.5%
  instructions       1.52G  Â± 77.9K                               1.52G  â€¦ 1.52G                                     0 ( 0%)        âš¡- 41.9% Â±  0.0%
  cache_references   9.67M  Â± 3.39M                               5.11M  â€¦ 24.8M                                     8 ( 7%)        âš¡- 76.9% Â±  2.1%
  cache_misses       60.8K  Â± 8.68K                               46.0K  â€¦ 81.1K                                     0 ( 0%)        âš¡- 99.5% Â±  0.1%
  branch_misses      1.28M  Â±  232K                                995K  â€¦ 2.24M                                     1 ( 1%)        âš¡- 80.6% Â±  2.8%
Benchmark 5 (17 runs): ./narz/bin/narz ls linux.nar /
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          3.69s  Â± 9.82ms                              3.66s  â€¦ 3.70s                                     2 (12%)        ðŸ’©+415.3% Â±  0.9%
  peak_rss           1.85GB Â± 73.7KB                              1.85GB â€¦ 1.85GB                                    0 ( 0%)        ðŸ’©+1204.0% Â±  0.0%
  cpu_cycles          881M  Â± 2.80M                                875M  â€¦  885M                                     0 ( 0%)        âš¡- 42.7% Â±  1.3%
  instructions        870M  Â±  180                                 870M  â€¦  870M                                     0 ( 0%)        âš¡- 66.6% Â±  0.0%
  cache_references   4.44M  Â±  381K                               3.92M  â€¦ 5.38M                                     0 ( 0%)        âš¡- 89.4% Â±  3.0%
  cache_misses        119K  Â± 4.09K                                111K  â€¦  127K                                     0 ( 0%)        âš¡- 99.1% Â±  0.3%
  branch_misses      1.98M  Â± 63.4K                               1.84M  â€¦ 2.06M                                     0 ( 0%)        âš¡- 70.1% Â±  7.2%

poop -d 60000 "./nix/bin/nix nar ls linux.nar / -R" "./lix/bin/nix nar ls linux.nar / -R" "./narser/bin/narser ls linux.nar / -R" "./nix-nar/bin/nix-nar ls linux.nar / -R" "./narz/bin/narz ls linux.nar / -r"
Benchmark 1 (64 runs): ./nix/bin/nix nar ls linux.nar / -R
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           941ms Â± 15.0ms                               925ms â€¦  977ms                                    0 ( 0%)        0%
  peak_rss            142MB Â± 95.0KB                               141MB â€¦  142MB                                    0 ( 0%)        0%
  cpu_cycles         1.92G  Â± 51.1M                               1.88G  â€¦ 2.04G                                    12 (19%)        0%
  instructions       3.32G  Â± 1.11M                               3.31G  â€¦ 3.32G                                     0 ( 0%)        0%
  cache_references   51.4M  Â± 2.54M                               47.4M  â€¦ 60.9M                                     1 ( 2%)        0%
  cache_misses       15.7M  Â± 96.9K                               15.5M  â€¦ 16.0M                                     0 ( 0%)        0%
  branch_misses      8.80M  Â± 1.25M                               7.81M  â€¦ 11.7M                                    12 (19%)        0%
Benchmark 2 (21 runs): ./lix/bin/nix nar ls linux.nar / -R
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          2.88s  Â± 10.5ms                              2.86s  â€¦ 2.90s                                     0 ( 0%)        ðŸ’©+205.8% Â±  0.7%
  peak_rss           3.75GB Â±  138KB                              3.75GB â€¦ 3.75GB                                    0 ( 0%)        ðŸ’©+2551.2% Â±  0.0%
  cpu_cycles         3.39G  Â± 30.4M                               3.35G  â€¦ 3.44G                                     0 ( 0%)        ðŸ’©+ 76.6% Â±  1.2%
  instructions       3.03G  Â± 1.11M                               3.03G  â€¦ 3.03G                                     0 ( 0%)        âš¡-  8.6% Â±  0.0%
  cache_references    134M  Â± 3.44M                                130M  â€¦  144M                                     1 ( 5%)        ðŸ’©+160.1% Â±  2.7%
  cache_misses       71.5M  Â±  159K                               71.2M  â€¦ 71.7M                                     0 ( 0%)        ðŸ’©+354.1% Â±  0.4%
  branch_misses      6.19M  Â±  655K                               5.31M  â€¦ 7.13M                                     0 ( 0%)        âš¡- 29.7% Â±  6.5%
Benchmark 3 (458 runs): ./narser/bin/narser ls linux.nar / -R
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           131ms Â± 2.16ms                               128ms â€¦  141ms                                   50 (11%)        âš¡- 86.1% Â±  0.2%
  peak_rss           33.4MB Â± 20.1KB                              33.3MB â€¦ 33.4MB                                   11 ( 2%)        âš¡- 76.4% Â±  0.0%
  cpu_cycles          153M  Â± 2.13M                                147M  â€¦  164M                                   115 (25%)        âš¡- 92.0% Â±  0.2%
  instructions        295M  Â± 9.95                                 295M  â€¦  295M                                    30 ( 7%)        âš¡- 91.1% Â±  0.0%
  cache_references   2.21M  Â± 36.8K                               2.07M  â€¦ 2.32M                                    11 ( 2%)        âš¡- 95.7% Â±  0.5%
  cache_misses        836K  Â± 12.9K                                793K  â€¦  915K                                    55 (12%)        âš¡- 94.7% Â±  0.1%
  branch_misses       604K  Â± 9.88K                                597K  â€¦  696K                                    60 (13%)        âš¡- 93.1% Â±  1.3%
Benchmark 4 (93 runs): ./nix-nar/bin/nix-nar ls linux.nar / -R
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           651ms Â± 5.72ms                               641ms â€¦  675ms                                    3 ( 3%)        âš¡- 30.8% Â±  0.4%
  peak_rss           14.0MB Â± 75.1KB                              13.8MB â€¦ 14.2MB                                    2 ( 2%)        âš¡- 90.1% Â±  0.0%
  cpu_cycles         1.14G  Â± 15.4M                               1.12G  â€¦ 1.22G                                     1 ( 1%)        âš¡- 40.5% Â±  0.6%
  instructions       1.96G  Â± 81.5K                               1.96G  â€¦ 1.96G                                     0 ( 0%)        âš¡- 40.8% Â±  0.0%
  cache_references   14.2M  Â± 3.47M                               8.57M  â€¦ 25.6M                                     4 ( 4%)        âš¡- 72.4% Â±  1.9%
  cache_misses        188K  Â± 10.8K                                167K  â€¦  220K                                     1 ( 1%)        âš¡- 98.8% Â±  0.1%
  branch_misses      1.86M  Â±  295K                               1.47M  â€¦ 2.59M                                     0 ( 0%)        âš¡- 78.8% Â±  3.0%
Benchmark 5 (16 runs): ./narz/bin/narz ls linux.nar / -r
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          3.88s  Â± 8.67ms                              3.87s  â€¦ 3.90s                                     0 ( 0%)        ðŸ’©+312.6% Â±  0.8%
  peak_rss           1.85GB Â± 84.1KB                              1.85GB â€¦ 1.85GB                                    0 ( 0%)        ðŸ’©+1204.2% Â±  0.0%
  cpu_cycles          968M  Â± 2.12M                                964M  â€¦  973M                                     2 (13%)        âš¡- 49.6% Â±  1.3%
  instructions        951M  Â±  249                                 951M  â€¦  951M                                     0 ( 0%)        âš¡- 71.3% Â±  0.0%
  cache_references   5.56M  Â±  191K                               5.09M  â€¦ 5.74M                                     1 ( 6%)        âš¡- 89.2% Â±  2.5%
  cache_misses        863K  Â± 6.37K                                853K  â€¦  880K                                     1 ( 6%)        âš¡- 94.5% Â±  0.3%
  branch_misses      2.27M  Â± 48.2K                               2.20M  â€¦ 2.35M                                     0 ( 0%)        âš¡- 74.2% Â±  7.1%

poop -d 60000 "./nix/bin/nix nar ls linux.nar / -Rl" "./lix/bin/nix nar ls linux.nar / -Rl" "./narser/bin/narser ls linux.nar / -Rl" "./nix-nar/bin/nix-nar ls linux.nar / -Rl" "./narz/bin/narz ls linux.nar / -rl"
Benchmark 1 (59 runs): ./nix/bin/nix nar ls linux.nar / -Rl
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          1.03s  Â± 23.1ms                              1.01s  â€¦ 1.08s                                     0 ( 0%)        0%
  peak_rss            142MB Â± 88.5KB                               141MB â€¦  142MB                                    0 ( 0%)        0%
  cpu_cycles         2.24G  Â± 79.8M                               2.17G  â€¦ 2.38G                                     0 ( 0%)        0%
  instructions       4.01G  Â± 1.18M                               4.01G  â€¦ 4.01G                                     0 ( 0%)        0%
  cache_references   52.9M  Â± 2.31M                               49.1M  â€¦ 61.3M                                     1 ( 2%)        0%
  cache_misses       16.0M  Â± 77.8K                               15.8M  â€¦ 16.1M                                     0 ( 0%)        0%
  branch_misses      10.00M  Â± 1.87M                              8.44M  â€¦ 13.2M                                     0 ( 0%)        0%
Benchmark 2 (21 runs): ./lix/bin/nix nar ls linux.nar / -Rl
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          3.00s  Â± 22.2ms                              2.97s  â€¦ 3.05s                                     1 ( 5%)        ðŸ’©+189.7% Â±  1.1%
  peak_rss           3.75GB Â±  157KB                              3.75GB â€¦ 3.75GB                                    0 ( 0%)        ðŸ’©+2551.1% Â±  0.0%
  cpu_cycles         3.81G  Â± 69.0M                               3.74G  â€¦ 3.99G                                     0 ( 0%)        ðŸ’©+ 69.9% Â±  1.7%
  instructions       3.92G  Â±  500K                               3.92G  â€¦ 3.92G                                     2 (10%)        âš¡-  2.3% Â±  0.0%
  cache_references    134M  Â± 2.17M                                131M  â€¦  140M                                     2 (10%)        ðŸ’©+152.6% Â±  2.2%
  cache_misses       71.5M  Â±  199K                               71.2M  â€¦ 71.9M                                     0 ( 0%)        ðŸ’©+348.3% Â±  0.4%
  branch_misses      7.20M  Â± 1.37M                               5.96M  â€¦ 10.9M                                     0 ( 0%)        âš¡- 28.0% Â±  8.9%
Benchmark 3 (448 runs): ./narser/bin/narser ls linux.nar / -Rl
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           134ms Â± 1.92ms                               132ms â€¦  150ms                                   71 (16%)        âš¡- 87.0% Â±  0.2%
  peak_rss           33.4MB Â± 10.7KB                              33.3MB â€¦ 33.4MB                                    3 ( 1%)        âš¡- 76.4% Â±  0.0%
  cpu_cycles          165M  Â± 2.52M                                160M  â€¦  196M                                   119 (27%)        âš¡- 92.6% Â±  0.3%
  instructions        334M  Â± 8.43                                 334M  â€¦  334M                                    24 ( 5%)        âš¡- 91.7% Â±  0.0%
  cache_references   2.33M  Â± 40.1K                               2.20M  â€¦ 2.48M                                    10 ( 2%)        âš¡- 95.6% Â±  0.4%
  cache_misses        834K  Â± 13.6K                                791K  â€¦  913K                                    49 (11%)        âš¡- 94.8% Â±  0.0%
  branch_misses       649K  Â± 8.19K                                642K  â€¦  722K                                    50 (11%)        âš¡- 93.5% Â±  1.7%
Benchmark 4 (89 runs): ./nix-nar/bin/nix-nar ls linux.nar / -Rl
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           680ms Â± 5.91ms                               672ms â€¦  703ms                                    5 ( 6%)        âš¡- 34.2% Â±  0.5%
  peak_rss           14.0MB Â± 73.5KB                              13.8MB â€¦ 14.2MB                                    5 ( 6%)        âš¡- 90.1% Â±  0.0%
  cpu_cycles         1.25G  Â± 15.2M                               1.22G  â€¦ 1.30G                                     4 ( 4%)        âš¡- 44.4% Â±  0.8%
  instructions       2.23G  Â±  829K                               2.23G  â€¦ 2.23G                                     2 ( 2%)        âš¡- 44.5% Â±  0.0%
  cache_references   14.3M  Â± 4.10M                               8.94M  â€¦ 30.0M                                     6 ( 7%)        âš¡- 73.1% Â±  2.2%
  cache_misses        303K  Â± 8.12K                                287K  â€¦  323K                                     0 ( 0%)        âš¡- 98.1% Â±  0.1%
  branch_misses      2.06M  Â±  259K                               1.67M  â€¦ 2.81M                                     0 ( 0%)        âš¡- 79.4% Â±  3.9%
Benchmark 5 (12 runs): ./narz/bin/narz ls linux.nar / -rl
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          5.09s  Â± 7.69ms                              5.08s  â€¦ 5.10s                                     2 (17%)        ðŸ’©+392.0% Â±  1.3%
  peak_rss           1.85GB Â± 64.2KB                              1.85GB â€¦ 1.85GB                                    0 ( 0%)        ðŸ’©+1204.1% Â±  0.0%
  cpu_cycles         1.15G  Â± 4.72M                               1.14G  â€¦ 1.16G                                     2 (17%)        âš¡- 48.7% Â±  2.1%
  instructions       1.12G  Â±  156                                1.12G  â€¦ 1.12G                                     0 ( 0%)        âš¡- 72.1% Â±  0.0%
  cache_references   5.74M  Â±  292K                               5.20M  â€¦ 6.06M                                     0 ( 0%)        âš¡- 89.1% Â±  2.5%
  cache_misses        873K  Â± 4.64K                                865K  â€¦  882K                                     0 ( 0%)        âš¡- 94.5% Â±  0.3%
  branch_misses      2.68M  Â± 51.8K                               2.59M  â€¦ 2.75M                                     1 ( 8%)        âš¡- 73.2% Â± 10.9%

poop -d 60000 "./nix/bin/nix nar ls linux.nar / -l" "./lix/bin/nix nar ls linux.nar / -l" "./narser/bin/narser ls linux.nar / -l" "./nix-nar/bin/nix-nar ls linux.nar / -l" "./narz/bin/narz ls linux.nar / -l"
Benchmark 1 (84 runs): ./nix/bin/nix nar ls linux.nar / -l
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           715ms Â± 12.0ms                               701ms â€¦  747ms                                    0 ( 0%)        0%
  peak_rss            142MB Â± 85.2KB                               141MB â€¦  142MB                                    3 ( 4%)        0%
  cpu_cycles         1.54G  Â± 39.3M                               1.50G  â€¦ 1.64G                                     0 ( 0%)        0%
  instructions       2.61G  Â± 1.02M                               2.60G  â€¦ 2.61G                                     0 ( 0%)        0%
  cache_references   42.2M  Â± 2.51M                               38.0M  â€¦ 49.7M                                     1 ( 1%)        0%
  cache_misses       13.3M  Â± 82.7K                               13.1M  â€¦ 13.5M                                     0 ( 0%)        0%
  branch_misses      6.58M  Â±  959K                               5.75M  â€¦ 8.86M                                     0 ( 0%)        0%
Benchmark 2 (23 runs): ./lix/bin/nix nar ls linux.nar / -l
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          2.62s  Â± 11.9ms                              2.60s  â€¦ 2.65s                                     0 ( 0%)        ðŸ’©+265.9% Â±  0.8%
  peak_rss           3.75GB Â±  108KB                              3.75GB â€¦ 3.75GB                                    0 ( 0%)        ðŸ’©+2551.4% Â±  0.0%
  cpu_cycles         2.91G  Â± 14.6M                               2.89G  â€¦ 2.93G                                     0 ( 0%)        ðŸ’©+ 89.2% Â±  1.1%
  instructions       2.18G  Â± 6.94K                               2.18G  â€¦ 2.18G                                     0 ( 0%)        âš¡- 16.4% Â±  0.0%
  cache_references    132M  Â± 3.65M                                128M  â€¦  142M                                     1 ( 4%)        ðŸ’©+212.6% Â±  3.1%
  cache_misses       70.6M  Â±  143K                               70.4M  â€¦ 71.0M                                     0 ( 0%)        ðŸ’©+431.6% Â±  0.3%
  branch_misses      4.14M  Â±  301K                               3.81M  â€¦ 4.77M                                     0 ( 0%)        âš¡- 37.1% Â±  6.1%
Benchmark 3 (567 runs): ./narser/bin/narser ls linux.nar / -l
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           106ms Â± 2.02ms                               104ms â€¦  125ms                                   60 (11%)        âš¡- 85.2% Â±  0.2%
  peak_rss           33.4MB Â± 16.4KB                              33.3MB â€¦ 33.4MB                                    9 ( 2%)        âš¡- 76.4% Â±  0.0%
  cpu_cycles         66.5M  Â±  906K                               65.7M  â€¦ 74.0M                                    54 (10%)        âš¡- 95.7% Â±  0.2%
  instructions        121M  Â± 6.85                                 121M  â€¦  121M                                    23 ( 4%)        âš¡- 95.4% Â±  0.0%
  cache_references   1.20M  Â± 30.8K                               1.09M  â€¦ 1.29M                                     4 ( 1%)        âš¡- 97.2% Â±  0.5%
  cache_misses       16.2K  Â± 1.47K                               12.8K  â€¦ 21.3K                                    45 ( 8%)        âš¡- 99.9% Â±  0.1%
  branch_misses       448K  Â± 8.22K                                442K  â€¦  515K                                    86 (15%)        âš¡- 93.2% Â±  1.2%
Benchmark 4 (114 runs): ./nix-nar/bin/nix-nar ls linux.nar / -l
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           528ms Â± 4.57ms                               521ms â€¦  547ms                                    2 ( 2%)        âš¡- 26.2% Â±  0.3%
  peak_rss           2.40MB Â± 59.8KB                              2.28MB â€¦ 2.55MB                                    0 ( 0%)        âš¡- 98.3% Â±  0.0%
  cpu_cycles          945M  Â± 10.7M                                932M  â€¦  991M                                     4 ( 4%)        âš¡- 38.5% Â±  0.5%
  instructions       1.52G  Â± 79.5K                               1.52G  â€¦ 1.52G                                     0 ( 0%)        âš¡- 41.9% Â±  0.0%
  cache_references   10.2M  Â± 3.58M                               5.44M  â€¦ 23.4M                                     2 ( 2%)        âš¡- 75.8% Â±  2.1%
  cache_misses       62.3K  Â± 8.91K                               48.1K  â€¦ 82.2K                                     0 ( 0%)        âš¡- 99.5% Â±  0.1%
  branch_misses      1.16M  Â±  212K                                944K  â€¦ 2.01M                                     9 ( 8%)        âš¡- 82.4% Â±  2.8%
Benchmark 5 (17 runs): ./narz/bin/narz ls linux.nar / -l
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          3.70s  Â± 10.1ms                              3.67s  â€¦ 3.71s                                     1 ( 6%)        ðŸ’©+416.8% Â±  0.9%
  peak_rss           1.85GB Â± 64.6KB                              1.85GB â€¦ 1.85GB                                    0 ( 0%)        ðŸ’©+1203.9% Â±  0.0%
  cpu_cycles          882M  Â± 1.90M                                878M  â€¦  885M                                     1 ( 6%)        âš¡- 42.6% Â±  1.2%
  instructions        870M  Â±  154                                 870M  â€¦  870M                                     0 ( 0%)        âš¡- 66.6% Â±  0.0%
  cache_references   4.46M  Â±  158K                               4.09M  â€¦ 4.64M                                     3 (18%)        âš¡- 89.4% Â±  2.9%
  cache_misses        119K  Â± 6.52K                                106K  â€¦  131K                                     0 ( 0%)        âš¡- 99.1% Â±  0.3%
  branch_misses      1.96M  Â± 57.5K                               1.89M  â€¦ 2.07M                                     0 ( 0%)        âš¡- 70.2% Â±  7.1%

poop -d 60000 "./nix/bin/nix nar cat linux.nar /README" "./lix/bin/nix nar cat linux.nar /README" "./narser/bin/narser cat linux.nar /README" "./narser/bin/narser cat linux.nar /README -L" "./nix-nar/bin/nix-nar cat linux.nar /README " "./narz/bin/narz cat linux.nar /README"
Benchmark 1 (87 runs): ./nix/bin/nix nar cat linux.nar /README
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           691ms Â± 11.5ms                               677ms â€¦  721ms                                    0 ( 0%)        0%
  peak_rss            123MB Â±  150KB                               122MB â€¦  123MB                                    0 ( 0%)        0%
  cpu_cycles         1.49G  Â± 39.2M                               1.45G  â€¦ 1.59G                                     0 ( 0%)        0%
  instructions       2.53G  Â±  938K                               2.53G  â€¦ 2.54G                                     3 ( 3%)        0%
  cache_references   41.0M  Â± 2.79M                               36.1M  â€¦ 52.7M                                     2 ( 2%)        0%
  cache_misses       12.0M  Â± 71.2K                               11.9M  â€¦ 12.3M                                     2 ( 2%)        0%
  branch_misses      6.43M  Â±  957K                               5.54M  â€¦ 8.92M                                     0 ( 0%)        0%
Benchmark 2 (23 runs): ./lix/bin/nix nar cat linux.nar /README
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          2.62s  Â± 13.1ms                              2.60s  â€¦ 2.65s                                     0 ( 0%)        ðŸ’©+279.2% Â±  0.8%
  peak_rss           3.75GB Â±  121KB                              3.75GB â€¦ 3.75GB                                    0 ( 0%)        ðŸ’©+2962.3% Â±  0.1%
  cpu_cycles         2.91G  Â± 21.1M                               2.88G  â€¦ 2.95G                                     0 ( 0%)        ðŸ’©+ 95.7% Â±  1.1%
  instructions       2.19G  Â± 8.28K                               2.19G  â€¦ 2.19G                                     0 ( 0%)        âš¡- 13.7% Â±  0.0%
  cache_references    131M  Â± 2.22M                                128M  â€¦  137M                                     0 ( 0%)        ðŸ’©+219.6% Â±  3.1%
  cache_misses       70.6M  Â±  174K                               70.4M  â€¦ 71.1M                                     0 ( 0%)        ðŸ’©+487.5% Â±  0.4%
  branch_misses      4.19M  Â±  449K                               3.72M  â€¦ 5.21M                                     0 ( 0%)        âš¡- 34.9% Â±  6.3%
Benchmark 3 (7068 runs): ./narser/bin/narser cat linux.nar /README
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          8.44ms Â±  329us                              8.30ms â€¦ 15.9ms                                  383 ( 5%)        âš¡- 98.8% Â±  0.0%
  peak_rss           1.05MB Â±  974                                 967KB â€¦ 1.05MB                                    1 ( 0%)        âš¡- 99.1% Â±  0.0%
  cpu_cycles         5.70M  Â±  186K                               5.62M  â€¦ 8.85M                                   427 ( 6%)        âš¡- 99.6% Â±  0.1%
  instructions       10.6M  Â± 1.71                                10.6M  â€¦ 10.6M                                    43 ( 1%)        âš¡- 99.6% Â±  0.0%
  cache_references   22.8K  Â± 2.00K                               16.7K  â€¦ 52.3K                                   454 ( 6%)        âš¡- 99.9% Â±  0.2%
  cache_misses       1.26K  Â±  261                                 868   â€¦ 4.30K                                   288 ( 4%)        âš¡-100.0% Â±  0.0%
  branch_misses      55.9K  Â± 1.62K                               54.5K  â€¦ 76.7K                                   435 ( 6%)        âš¡- 99.1% Â±  0.3%
Benchmark 4 (51 runs): ./narser/bin/narser cat linux.nar /README -L
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          1.18s  Â± 7.02ms                              1.17s  â€¦ 1.20s                                     0 ( 0%)        ðŸ’©+ 71.4% Â±  0.5%
  peak_rss           1.94GB Â± 31.1KB                              1.94GB â€¦ 1.94GB                                    3 ( 6%)        ðŸ’©+1486.4% Â±  0.0%
  cpu_cycles          514M  Â±  997K                                512M  â€¦  516M                                     0 ( 0%)        âš¡- 65.4% Â±  0.7%
  instructions        511M  Â± 15.5                                 511M  â€¦  511M                                     0 ( 0%)        âš¡- 79.8% Â±  0.0%
  cache_references   19.0M  Â±  605K                               18.0M  â€¦ 20.3M                                     0 ( 0%)        âš¡- 53.7% Â±  1.9%
  cache_misses       2.00M  Â± 14.7K                               1.93M  â€¦ 2.03M                                     1 ( 2%)        âš¡- 83.3% Â±  0.2%
  branch_misses       921K  Â± 4.51K                                913K  â€¦  937K                                     3 ( 6%)        âš¡- 85.7% Â±  4.1%
Benchmark 5 (756 runs): ./nix-nar/bin/nix-nar cat linux.nar /README
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          79.3ms Â± 1.16ms                              78.4ms â€¦  101ms                                   36 ( 5%)        âš¡- 88.5% Â±  0.1%
  peak_rss           2.40MB Â± 62.5KB                              2.26MB â€¦ 2.56MB                                    0 ( 0%)        âš¡- 98.0% Â±  0.0%
  cpu_cycles          114M  Â± 2.49M                                113M  â€¦  164M                                    46 ( 6%)        âš¡- 92.3% Â±  0.2%
  instructions        166M  Â± 9.96K                                166M  â€¦  166M                                     0 ( 0%)        âš¡- 93.5% Â±  0.0%
  cache_references   1.47M  Â±  480K                                566K  â€¦ 3.52M                                    21 ( 3%)        âš¡- 96.4% Â±  0.5%
  cache_misses       21.8K  Â± 2.09K                               19.1K  â€¦ 33.5K                                    79 (10%)        âš¡- 99.8% Â±  0.0%
  branch_misses       119K  Â± 41.5K                                106K  â€¦  965K                                    67 ( 9%)        âš¡- 98.2% Â±  1.1%
Benchmark 6 (17 runs): ./narz/bin/narz cat linux.nar /README
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          3.67s  Â± 6.94ms                              3.67s  â€¦ 3.69s                                     0 ( 0%)        ðŸ’©+431.6% Â±  0.8%
  peak_rss           1.85GB Â± 66.5KB                              1.85GB â€¦ 1.85GB                                    0 ( 0%)        ðŸ’©+1405.7% Â±  0.1%
  cpu_cycles          877M  Â± 2.27M                                871M  â€¦  880M                                     1 ( 6%)        âš¡- 41.0% Â±  1.3%
  instructions        870M  Â± 9.99K                                870M  â€¦  870M                                     0 ( 0%)        âš¡- 65.7% Â±  0.0%
  cache_references   4.49M  Â±  286K                               3.73M  â€¦ 4.82M                                     2 (12%)        âš¡- 89.0% Â±  3.3%
  cache_misses        118K  Â± 5.25K                                109K  â€¦  127K                                     0 ( 0%)        âš¡- 99.0% Â±  0.3%
  branch_misses      1.89M  Â± 46.0K                               1.83M  â€¦ 1.95M                                     0 ( 0%)        âš¡- 70.6% Â±  7.2%

poop -d 60000 "./nix/bin/nix nar cat linux.nar /virt/lib/irqbypass.c" "./lix/bin/nix nar cat linux.nar /virt/lib/irqbypass.c" "./narser/bin/narser cat linux.nar /virt/lib/irqbypass.c" "./narser/bin/narser cat linux.nar /virt/lib/irqbypass.c -L" "./nix-nar/bin/nix-nar cat linux.nar /virt/lib/irqbypass.c " "./narz/bin/narz cat linux.nar /virt/lib/irqbypass.c"
Benchmark 1 (87 runs): ./nix/bin/nix nar cat linux.nar /virt/lib/irqbypass.c
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           691ms Â± 11.5ms                               675ms â€¦  727ms                                    0 ( 0%)        0%
  peak_rss            123MB Â±  149KB                               122MB â€¦  123MB                                    1 ( 1%)        0%
  cpu_cycles         1.48G  Â± 37.7M                               1.45G  â€¦ 1.58G                                     0 ( 0%)        0%
  instructions       2.53G  Â±  952K                               2.53G  â€¦ 2.54G                                     4 ( 5%)        0%
  cache_references   42.2M  Â± 4.74M                               37.2M  â€¦ 60.7M                                     5 ( 6%)        0%
  cache_misses       12.0M  Â± 69.2K                               11.9M  â€¦ 12.2M                                     0 ( 0%)        0%
  branch_misses      6.36M  Â±  924K                               5.58M  â€¦ 8.80M                                     0 ( 0%)        0%
Benchmark 2 (23 runs): ./lix/bin/nix nar cat linux.nar /virt/lib/irqbypass.c
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          2.63s  Â± 11.7ms                              2.61s  â€¦ 2.66s                                     0 ( 0%)        ðŸ’©+280.4% Â±  0.8%
  peak_rss           3.75GB Â±  127KB                              3.75GB â€¦ 3.75GB                                    0 ( 0%)        ðŸ’©+2962.6% Â±  0.1%
  cpu_cycles         2.94G  Â± 16.1M                               2.91G  â€¦ 2.97G                                     0 ( 0%)        ðŸ’©+ 97.9% Â±  1.1%
  instructions       2.21G  Â± 7.87K                               2.21G  â€¦ 2.21G                                     0 ( 0%)        âš¡- 12.8% Â±  0.0%
  cache_references    132M  Â± 2.00M                                129M  â€¦  135M                                     0 ( 0%)        ðŸ’©+212.8% Â±  4.8%
  cache_misses       71.6M  Â±  145K                               71.3M  â€¦ 71.9M                                     0 ( 0%)        ðŸ’©+494.8% Â±  0.3%
  branch_misses      4.31M  Â±  358K                               3.84M  â€¦ 4.87M                                     0 ( 0%)        âš¡- 32.2% Â±  6.1%
Benchmark 3 (713 runs): ./narser/bin/narser cat linux.nar /virt/lib/irqbypass.c
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          84.1ms Â± 1.63ms                              83.1ms â€¦  100ms                                   91 (13%)        âš¡- 87.8% Â±  0.1%
  peak_rss           1.05MB Â±    0                                1.05MB â€¦ 1.05MB                                    0 ( 0%)        âš¡- 99.1% Â±  0.0%
  cpu_cycles         47.1M  Â±  720K                               46.5M  â€¦ 52.7M                                    83 (12%)        âš¡- 96.8% Â±  0.2%
  instructions       91.5M  Â± 6.00                                91.5M  â€¦ 91.5M                                    31 ( 4%)        âš¡- 96.4% Â±  0.0%
  cache_references    134K  Â± 16.7K                               80.7K  â€¦  193K                                    30 ( 4%)        âš¡- 99.7% Â±  0.8%
  cache_misses       4.84K  Â± 1.13K                               3.31K  â€¦ 10.1K                                    63 ( 9%)        âš¡-100.0% Â±  0.0%
  branch_misses       419K  Â± 7.64K                                414K  â€¦  477K                                    76 (11%)        âš¡- 93.4% Â±  1.1%
Benchmark 4 (51 runs): ./narser/bin/narser cat linux.nar /virt/lib/irqbypass.c -L
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          1.18s  Â± 6.93ms                              1.17s  â€¦ 1.21s                                     3 ( 6%)        ðŸ’©+ 71.5% Â±  0.5%
  peak_rss           1.94GB Â± 62.4KB                              1.94GB â€¦ 1.94GB                                    0 ( 0%)        ðŸ’©+1486.5% Â±  0.0%
  cpu_cycles          516M  Â± 2.33M                                510M  â€¦  526M                                     2 ( 4%)        âš¡- 65.3% Â±  0.7%
  instructions        511M  Â± 12.6                                 511M  â€¦  511M                                     2 ( 4%)        âš¡- 79.8% Â±  0.0%
  cache_references   19.1M  Â±  564K                               18.1M  â€¦ 20.3M                                     0 ( 0%)        âš¡- 54.8% Â±  3.1%
  cache_misses       2.00M  Â± 15.5K                               1.94M  â€¦ 2.04M                                     4 ( 8%)        âš¡- 83.4% Â±  0.2%
  branch_misses       933K  Â± 12.3K                                918K  â€¦  972K                                     3 ( 6%)        âš¡- 85.3% Â±  4.0%
Benchmark 5 (117 runs): ./nix-nar/bin/nix-nar cat linux.nar /virt/lib/irqbypass.c
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           514ms Â± 5.38ms                               507ms â€¦  537ms                                    4 ( 3%)        âš¡- 25.6% Â±  0.3%
  peak_rss           2.39MB Â± 64.4KB                              2.23MB â€¦ 2.54MB                                    0 ( 0%)        âš¡- 98.0% Â±  0.0%
  cpu_cycles          897M  Â± 12.9M                                882M  â€¦  975M                                     6 ( 5%)        âš¡- 39.6% Â±  0.5%
  instructions       1.38G  Â± 77.4K                               1.38G  â€¦ 1.38G                                     0 ( 0%)        âš¡- 45.4% Â±  0.0%
  cache_references   9.30M  Â± 3.94M                               4.06M  â€¦ 25.2M                                     8 ( 7%)        âš¡- 77.9% Â±  2.8%
  cache_misses       47.7K  Â± 6.15K                               37.9K  â€¦ 59.0K                                     0 ( 0%)        âš¡- 99.6% Â±  0.1%
  branch_misses      1.14M  Â±  226K                                887K  â€¦ 1.96M                                     4 ( 3%)        âš¡- 82.1% Â±  2.7%
Benchmark 6 (17 runs): ./narz/bin/narz cat linux.nar /virt/lib/irqbypass.c
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          3.70s  Â± 9.38ms                              3.68s  â€¦ 3.72s                                     3 (18%)        ðŸ’©+435.5% Â±  0.9%
  peak_rss           1.85GB Â± 69.3KB                              1.85GB â€¦ 1.85GB                                    0 ( 0%)        ðŸ’©+1405.8% Â±  0.1%
  cpu_cycles          882M  Â± 2.48M                                879M  â€¦  888M                                     1 ( 6%)        âš¡- 40.6% Â±  1.2%
  instructions        870M  Â± 8.21K                                870M  â€¦  870M                                     3 (18%)        âš¡- 65.7% Â±  0.0%
  cache_references   4.50M  Â±  312K                               3.80M  â€¦ 4.78M                                     3 (18%)        âš¡- 89.3% Â±  5.4%
  cache_misses        121K  Â± 4.49K                                111K  â€¦  131K                                     0 ( 0%)        âš¡- 99.0% Â±  0.3%
  branch_misses      1.96M  Â± 52.4K                               1.88M  â€¦ 2.04M                                     0 ( 0%)        âš¡- 69.3% Â±  7.0%

./nix/bin/nix-store --restore out < linux.nar
cmp <(./nix/bin/nix nar pack out) linux.nar
rm -rf out

./lix/bin/nix-store --restore out < linux.nar
cmp <(./nix/bin/nix nar pack out) linux.nar
rm -rf out

./narser/bin/narser unpack linux.nar out
cmp <(./nix/bin/nix nar pack out) linux.nar || exit 1
rm -rf out

rm -rf out ; time ./nix/bin/nix-store --restore out < linux.nar

real	0m1.490s
user	0m0.350s
sys	0m1.134s
rm -rf out ; time ./nix/bin/nix-store --restore out < linux.nar

real	0m1.509s
user	0m0.325s
sys	0m1.176s
rm -rf out ; time ./nix/bin/nix-store --restore out < linux.nar

real	0m1.489s
user	0m0.334s
sys	0m1.148s

rm -rf out ; time ./lix/bin/nix-store --restore out < linux.nar

real	0m1.684s
user	0m0.493s
sys	0m1.185s
rm -rf out ; time ./lix/bin/nix-store --restore out < linux.nar

real	0m1.682s
user	0m0.481s
sys	0m1.195s
rm -rf out ; time ./lix/bin/nix-store --restore out < linux.nar

real	0m1.681s
user	0m0.480s
sys	0m1.193s

rm -rf out ; time ./narser/bin/narser unpack linux.nar out

real	0m1.305s
user	0m0.216s
sys	0m1.075s
rm -rf out ; time ./narser/bin/narser unpack linux.nar out

real	0m1.300s
user	0m0.218s
sys	0m1.075s
rm -rf out ; time ./narser/bin/narser unpack linux.nar out

real	0m1.303s
user	0m0.169s
sys	0m1.127s
