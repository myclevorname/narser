
echo $1
/tmp/clevor/tests

mkdir $1 || exit 1
cd $1

nix build git+https://git.lix.systems/lix-project/lix?rev=992c3ae981e75c902f72e8a04b44e902e9501642 -o lix >& /dev/null || exit 1
nix build github:NixOS/nix/89141f1d675768cf98c757c539108ce663adda01 -o nix >& /dev/null || exit 1
nix build git+https://git.sr.ht/~watersucks/narz?rev=f790364c93142affa3cc699365545d6a11916a76 -o narz >& /dev/null || exit 1
nix build github:myclevorname/narser/5b5239168adfda18d6ec60afeed5cf30c965f58a -o narser >& /dev/null || exit 1
nix build gitlab:abstract-binary/nix-nar-rs/c8d9250b9be837abafa0046cb9c2a852b846da6a -o nix-nar >& /dev/null || exit 1

git clone https://github.com/torvalds/linux --depth=1 -q
cd linux
git log | head
commit 4ff71af020ae59ae2d83b174646fc2ad9fcd4dc4
Author: Linus Torvalds <torvalds@linux-foundation.org>
Date:   Thu Sep 25 08:23:52 2025 -0700

    Merge tag 'net-6.17-rc8' of git://git.kernel.org/pub/scm/linux/kernel/git/netdev/net
    
    Pull networking fixes from Paolo Abeni:
     "Including fixes from Bluetooth, IPsec and CAN.
    
      No known regressions at this point.
cd ..

nix nar pack linux > linux.nar

cmp <(./nix/bin/nix nar pack linux) <(./lix/bin/nix nar dump-path linux)
cmp <(./nix/bin/nix nar pack linux) <(./narser/bin/narser pack linux) || exit 1
cmp <(./nix/bin/nix nar pack linux) <(./nix-nar/bin/nix-nar dump-path linux)

cmp <(./nix/bin/nix nar cat linux.nar /README) <(./lix/bin/nix nar cat linux.nar /README)
cmp <(./nix/bin/nix nar cat linux.nar /README) <(./narser/bin/narser cat linux.nar /README) || exit 1
cmp <(./nix/bin/nix nar cat linux.nar /README) <(./narz/bin/narz cat linux.nar /README)
cmp <(./nix/bin/nix nar cat linux.nar /README) <(./nix-nar/bin/nix-nar cat linux.nar /README)

cmp <(./nix/bin/nix nar ls linux.nar /) <(./lix/bin/nix nar ls linux.nar /)
cmp <(./nix/bin/nix nar ls linux.nar /) <(./narser/bin/narser ls linux.nar /) || exit 1
cmp <(./nix/bin/nix nar ls linux.nar / 2> /dev/null) <(./narz/bin/narz ls linux.nar / 2> /dev/null)
cmp: EOF on â€˜/dev/fd/62â€™ which is empty
cmp <(./nix/bin/nix nar ls linux.nar /) <(./nix-nar/bin/nix-nar ls linux.nar /)

cmp <(./nix/bin/nix nar ls linux.nar / -l) <(./lix/bin/nix nar ls linux.nar / -l)
cmp <(./nix/bin/nix nar ls linux.nar / -l) <(./narser/bin/narser ls linux.nar / -l) || exit 1
cmp <(./nix/bin/nix nar ls linux.nar / -l 2> /dev/null) <(./narz/bin/narz ls linux.nar / -l 2> /dev/null)
cmp: EOF on â€˜/dev/fd/62â€™ which is empty
cmp <(./nix/bin/nix nar ls linux.nar / -l) <(./nix-nar/bin/nix-nar ls linux.nar / -l)

cmp <(./nix/bin/nix nar ls linux.nar / -lR) <(./lix/bin/nix nar ls linux.nar / -lR)
cmp <(./nix/bin/nix nar ls linux.nar / -lR) <(./narser/bin/narser ls linux.nar / -lR) || exit 1
cmp <(./nix/bin/nix nar ls linux.nar / -lR 2> /dev/null) <(./narz/bin/narz ls linux.nar / -lr 2> /dev/null)
cmp: EOF on â€˜/dev/fd/62â€™ which is empty
cmp <(./nix/bin/nix nar ls linux.nar / -lR) <(./nix-nar/bin/nix-nar ls linux.nar / -lR)

cmp <(./nix/bin/nix nar ls linux.nar / -R) <(./lix/bin/nix nar ls linux.nar / -R)
cmp <(./nix/bin/nix nar ls linux.nar / -R) <(./narser/bin/narser ls linux.nar / -R) || exit 1
cmp <(./nix/bin/nix nar ls linux.nar / -R 2> /dev/null) <(./narz/bin/narz ls linux.nar / -r 2> /dev/null)
cmp: EOF on â€˜/dev/fd/62â€™ which is empty
cmp <(./nix/bin/nix nar ls linux.nar / -R) <(./nix-nar/bin/nix-nar ls linux.nar / -R)


poop "./nix/bin/nix nar pack linux" "./lix/bin/nix nar dump-path linux" "./narser/bin/narser pack linux" "./nix-nar/bin/nix-nar dump-path linux"
Benchmark 1 (3 runs): ./nix/bin/nix nar pack linux
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          1.94s  Â± 70.3ms                              1.88s  â€¦ 2.02s                                     0 ( 0%)        0%
  peak_rss           40.4MB Â± 20.5KB                              40.4MB â€¦ 40.4MB                                    0 ( 0%)        0%
  cpu_cycles         3.58G  Â±  231M                               3.40G  â€¦ 3.84G                                     0 ( 0%)        0%
  instructions       7.40G  Â±  109K                               7.40G  â€¦ 7.40G                                     0 ( 0%)        0%
  cache_references   61.9M  Â± 3.61M                               58.7M  â€¦ 65.8M                                     0 ( 0%)        0%
  cache_misses       4.42M  Â± 56.1K                               4.37M  â€¦ 4.48M                                     0 ( 0%)        0%
  branch_misses      12.2M  Â± 5.30M                               8.11M  â€¦ 18.2M                                     0 ( 0%)        0%
Benchmark 2 (5 runs): ./lix/bin/nix nar dump-path linux
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          1.15s  Â± 10.6ms                              1.14s  â€¦ 1.17s                                     0 ( 0%)        âš¡- 40.6% Â±  3.8%
  peak_rss           33.3MB Â±  208KB                              32.9MB â€¦ 33.5MB                                    1 (20%)        âš¡- 17.6% Â±  0.8%
  cpu_cycles         1.31G  Â± 17.1M                               1.29G  â€¦ 1.33G                                     0 ( 0%)        âš¡- 63.3% Â±  6.7%
  instructions       1.81G  Â± 7.67K                               1.81G  â€¦ 1.81G                                     1 (20%)        âš¡- 75.5% Â±  0.0%
  cache_references   83.3M  Â± 2.27M                               81.1M  â€¦ 86.0M                                     0 ( 0%)        ðŸ’©+ 34.6% Â±  8.0%
  cache_misses        746K  Â± 40.5K                                721K  â€¦  818K                                     0 ( 0%)        âš¡- 83.1% Â±  1.9%
  branch_misses      3.72M  Â±  460K                               3.24M  â€¦ 4.36M                                     0 ( 0%)        âš¡- 69.5% Â± 45.1%
Benchmark 3 (7 runs): ./narser/bin/narser pack linux
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           727ms Â± 3.19ms                               723ms â€¦  731ms                                    0 ( 0%)        âš¡- 62.5% Â±  2.9%
  peak_rss           1.58MB Â± 49.5KB                              1.47MB â€¦ 1.60MB                                    1 (14%)        âš¡- 96.1% Â±  0.2%
  cpu_cycles          188M  Â± 2.26M                                185M  â€¦  191M                                     0 ( 0%)        âš¡- 94.7% Â±  5.1%
  instructions        327M  Â± 5.69K                                327M  â€¦  327M                                     0 ( 0%)        âš¡- 95.6% Â±  0.0%
  cache_references   6.32M  Â±  378K                               5.97M  â€¦ 7.06M                                     0 ( 0%)        âš¡- 89.8% Â±  4.7%
  cache_misses        175K  Â± 13.1K                                158K  â€¦  189K                                     0 ( 0%)        âš¡- 96.1% Â±  1.1%
  branch_misses       730K  Â± 5.69K                                724K  â€¦  741K                                     0 ( 0%)        âš¡- 94.0% Â± 34.5%
Benchmark 4 (4 runs): ./nix-nar/bin/nix-nar dump-path linux
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          1.55s  Â± 2.98ms                              1.55s  â€¦ 1.55s                                     0 ( 0%)        âš¡- 20.0% Â±  4.5%
  peak_rss           2.88MB Â± 86.4KB                              2.77MB â€¦ 2.97MB                                    0 ( 0%)        âš¡- 92.9% Â±  0.3%
  cpu_cycles          546M  Â± 11.2M                                535M  â€¦  562M                                     0 ( 0%)        âš¡- 84.7% Â±  8.0%
  instructions        829M  Â± 55.5K                                829M  â€¦  829M                                     0 ( 0%)        âš¡- 88.8% Â±  0.0%
  cache_references   11.8M  Â±  973K                               10.7M  â€¦ 12.7M                                     0 ( 0%)        âš¡- 81.0% Â±  7.6%
  cache_misses        389K  Â± 10.3K                                375K  â€¦  400K                                     0 ( 0%)        âš¡- 91.2% Â±  1.6%
  branch_misses      2.83M  Â±  182K                               2.62M  â€¦ 3.06M                                     0 ( 0%)        âš¡- 76.8% Â± 53.9%
poop "./nix/bin/nix nar ls linux.nar /" "./lix/bin/nix nar ls linux.nar /" "./narser/bin/narser ls linux.nar /" "./nix-nar/bin/nix-nar ls linux.nar /" "./narz/bin/narz ls linux.nar /"
Benchmark 1 (3 runs): ./nix/bin/nix nar ls linux.nar /
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          2.46s  Â± 9.89ms                              2.46s  â€¦ 2.47s                                     0 ( 0%)        0%
  peak_rss           3.75GB Â± 74.7KB                              3.75GB â€¦ 3.75GB                                    0 ( 0%)        0%
  cpu_cycles         2.48G  Â± 14.3M                               2.47G  â€¦ 2.49G                                     0 ( 0%)        0%
  instructions       1.21G  Â±  213K                               1.21G  â€¦ 1.21G                                     0 ( 0%)        0%
  cache_references    127M  Â± 1.53M                                126M  â€¦  129M                                     0 ( 0%)        0%
  cache_misses       70.8M  Â±  440K                               70.3M  â€¦ 71.2M                                     0 ( 0%)        0%
  branch_misses      1.76M  Â± 77.0K                               1.70M  â€¦ 1.85M                                     0 ( 0%)        0%
Benchmark 2 (3 runs): ./lix/bin/nix nar ls linux.nar /
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          2.58s  Â± 11.0ms                              2.56s  â€¦ 2.58s                                     0 ( 0%)        ðŸ’©+  4.5% Â±  1.0%
  peak_rss           3.73GB Â± 75.9KB                              3.73GB â€¦ 3.73GB                                    0 ( 0%)          -  0.4% Â±  0.0%
  cpu_cycles         2.88G  Â± 25.2M                               2.87G  â€¦ 2.91G                                     0 ( 0%)        ðŸ’©+ 16.4% Â±  1.9%
  instructions       2.16G  Â± 15.3K                               2.16G  â€¦ 2.16G                                     0 ( 0%)        ðŸ’©+ 79.0% Â±  0.0%
  cache_references    129M  Â±  784K                                128M  â€¦  129M                                     0 ( 0%)          +  1.0% Â±  2.2%
  cache_misses       70.5M  Â± 33.6K                               70.5M  â€¦ 70.5M                                     0 ( 0%)          -  0.5% Â±  1.0%
  branch_misses      4.07M  Â±  572K                               3.73M  â€¦ 4.73M                                     0 ( 0%)        ðŸ’©+131.3% Â± 52.6%
Benchmark 3 (46 runs): ./narser/bin/narser ls linux.nar /
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           109ms Â±  286us                               108ms â€¦  110ms                                    4 ( 9%)        âš¡- 95.6% Â±  0.1%
  peak_rss           33.5MB Â±    0                                33.5MB â€¦ 33.5MB                                    0 ( 0%)        âš¡- 99.1% Â±  0.0%
  cpu_cycles         78.4M  Â±  345K                               78.1M  â€¦ 80.0M                                     3 ( 7%)        âš¡- 96.8% Â±  0.1%
  instructions        171M  Â±  204                                 171M  â€¦  171M                                     1 ( 2%)        âš¡- 85.8% Â±  0.0%
  cache_references    972K  Â± 18.6K                                938K  â€¦ 1.03M                                     1 ( 2%)        âš¡- 99.2% Â±  0.3%
  cache_misses       15.0K  Â± 1.54K                               13.1K  â€¦ 21.5K                                     5 (11%)        âš¡-100.0% Â±  0.2%
  branch_misses       339K  Â± 1.88K                                337K  â€¦  347K                                     4 ( 9%)        âš¡- 80.7% Â±  1.1%
Benchmark 4 (10 runs): ./nix-nar/bin/nix-nar ls linux.nar /
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           520ms Â± 3.69ms                               515ms â€¦  527ms                                    0 ( 0%)        âš¡- 78.9% Â±  0.3%
  peak_rss           2.38MB Â± 39.5KB                              2.32MB â€¦ 2.44MB                                    0 ( 0%)        âš¡- 99.9% Â±  0.0%
  cpu_cycles          941M  Â± 10.9M                                930M  â€¦  961M                                     0 ( 0%)        âš¡- 62.0% Â±  0.7%
  instructions       1.50G  Â± 82.4K                               1.50G  â€¦ 1.50G                                     0 ( 0%)        ðŸ’©+ 24.5% Â±  0.0%
  cache_references   8.55M  Â± 2.68M                               5.68M  â€¦ 14.6M                                     0 ( 0%)        âš¡- 93.3% Â±  2.9%
  cache_misses       59.6K  Â± 10.9K                               43.7K  â€¦ 76.0K                                     0 ( 0%)        âš¡- 99.9% Â±  0.4%
  branch_misses      1.25M  Â±  241K                                986K  â€¦ 1.65M                                     0 ( 0%)        âš¡- 29.2% Â± 18.2%

error: Benchmark 5 command './narz/bin/narz ls linux.nar /' failed with exit code 1:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ stderr â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
poop "./nix/bin/nix nar ls linux.nar / -R" "./lix/bin/nix nar ls linux.nar / -R" "./narser/bin/narser ls linux.nar / -R" "./nix-nar/bin/nix-nar ls linux.nar / -R" "./narz/bin/narz ls linux.nar / -r"
Benchmark 1 (3 runs): ./nix/bin/nix nar ls linux.nar / -R
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          2.69s  Â± 3.40ms                              2.68s  â€¦ 2.69s                                     0 ( 0%)        0%
  peak_rss           3.75GB Â±  109KB                              3.75GB â€¦ 3.75GB                                    0 ( 0%)        0%
  cpu_cycles         2.86G  Â± 7.81M                               2.85G  â€¦ 2.87G                                     0 ( 0%)        0%
  instructions       1.91G  Â±  730K                               1.91G  â€¦ 1.91G                                     0 ( 0%)        0%
  cache_references    138M  Â± 1.94M                                136M  â€¦  140M                                     0 ( 0%)        0%
  cache_misses       73.5M  Â±  255K                               73.2M  â€¦ 73.7M                                     0 ( 0%)        0%
  branch_misses      3.99M  Â±  170K                               3.88M  â€¦ 4.19M                                     0 ( 0%)        0%
Benchmark 2 (3 runs): ./lix/bin/nix nar ls linux.nar / -R
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          2.83s  Â± 12.0ms                              2.82s  â€¦ 2.84s                                     0 ( 0%)        ðŸ’©+  5.4% Â±  0.7%
  peak_rss           3.73GB Â±  127KB                              3.73GB â€¦ 3.73GB                                    0 ( 0%)          -  0.4% Â±  0.0%
  cpu_cycles         3.36G  Â± 24.5M                               3.34G  â€¦ 3.38G                                     0 ( 0%)        ðŸ’©+ 17.7% Â±  1.4%
  instructions       3.01G  Â± 1.00M                               3.01G  â€¦ 3.01G                                     0 ( 0%)        ðŸ’©+ 57.7% Â±  0.1%
  cache_references    130M  Â±  977K                                129M  â€¦  131M                                     0 ( 0%)        âš¡-  6.2% Â±  2.5%
  cache_misses       71.0M  Â± 97.2K                               70.9M  â€¦ 71.1M                                     0 ( 0%)        âš¡-  3.4% Â±  0.6%
  branch_misses      6.12M  Â±  556K                               5.50M  â€¦ 6.57M                                     0 ( 0%)        ðŸ’©+ 53.3% Â± 23.3%
Benchmark 3 (38 runs): ./narser/bin/narser ls linux.nar / -R
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           132ms Â± 2.63ms                               129ms â€¦  137ms                                    0 ( 0%)        âš¡- 95.1% Â±  0.1%
  peak_rss           33.5MB Â±    0                                33.5MB â€¦ 33.5MB                                    0 ( 0%)        âš¡- 99.1% Â±  0.0%
  cpu_cycles          156M  Â± 6.72M                                151M  â€¦  171M                                     1 ( 3%)        âš¡- 94.5% Â±  0.3%
  instructions        344M  Â±  156                                 344M  â€¦  344M                                     0 ( 0%)        âš¡- 82.0% Â±  0.0%
  cache_references   2.05M  Â± 55.9K                               1.91M  â€¦ 2.12M                                     6 (16%)        âš¡- 98.5% Â±  0.4%
  cache_misses        876K  Â± 45.5K                                764K  â€¦  940K                                     9 (24%)        âš¡- 98.8% Â±  0.1%
  branch_misses       495K  Â± 11.6K                                488K  â€¦  535K                                     6 (16%)        âš¡- 87.6% Â±  1.2%
Benchmark 4 (8 runs): ./nix-nar/bin/nix-nar ls linux.nar / -R
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           637ms Â± 5.62ms                               632ms â€¦  649ms                                    1 (13%)        âš¡- 76.3% Â±  0.3%
  peak_rss           13.9MB Â± 62.3KB                              13.8MB â€¦ 14.0MB                                    0 ( 0%)        âš¡- 99.6% Â±  0.0%
  cpu_cycles         1.13G  Â± 17.8M                               1.12G  â€¦ 1.17G                                     1 (13%)        âš¡- 60.4% Â±  0.9%
  instructions       1.95G  Â± 82.0K                               1.95G  â€¦ 1.95G                                     0 ( 0%)        ðŸ’©+  2.2% Â±  0.0%
  cache_references   12.8M  Â± 2.02M                               9.36M  â€¦ 14.9M                                     1 (13%)        âš¡- 90.7% Â±  2.2%
  cache_misses        181K  Â± 12.1K                                170K  â€¦  207K                                     0 ( 0%)        âš¡- 99.8% Â±  0.3%
  branch_misses      1.66M  Â±  134K                               1.49M  â€¦ 1.85M                                     0 ( 0%)        âš¡- 58.5% Â±  5.5%

error: Benchmark 5 command './narz/bin/narz ls linux.nar / -r' failed with exit code 1:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ stderr â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
error(gpa): memory address 0x7f4b77e40000 leaked: 

error(gpa): memory address 0x7f4b77e40002 leaked: 

error(gpa): memory address 0x7f4b77ec0000 leaked: 

error(gpa): memory address 0x7f4b77ec0004 leaked: 

error(gpa): memory address 0x7f4b77ec0008 leaked: 

error(gpa): memory address 0x7f4b77ec000c leaked: 

error(gpa): memory address 0x7f4b77ec0010 leaked: 

error(gpa): memory address 0x7f4b77ec0014 leaked: 

error(gpa): memory address 0x7f4b77ec0018 leaked: 

error(gpa): memory address 0x7f4b77ec001c leaked: 

error(gpa): memory address 0x7f4b77ec0020 leaked: 

error(gpa): memory address 0x7f4b77ea0000 leaked: 

error(gpa): memory address 0x7f4b77ea0008 leaked: 

error(gpa): memory address 0x7f4b77ea0010 leaked: 

error(gpa): memory address 0x7f4b77ea0018 leaked: 

error(gpa): memory address 0x7f4b77ea0020 leaked: 

error(gpa): memory address 0x7f4b77ea0028 leaked: 

error(gpa): memory address 0x7f4b77ea0030 leaked: 

error(gpa): memory address 0x7f4b77ea0038 leaked: 

error(gpa): memory address 0x7f4b77ea0040 leaked: 

error(gpa): memory address 0x7f4b77ea0048 leaked: 

error(gpa): memory address 0x7f4b77ea0050 leaked: 

error(gpa): memory address 0x7f4b77ea0058 leaked: 

error(gpa): memory address 0x7f4b77ea0060 leaked: 

error(gpa): memory address 0x7f4b77ea0068 leaked: 

error(gpa): memory address 0x7f4b77ea0070 leaked: 

error(gpa): memory address 0x7f4b77ea0078 leaked: 

error(gpa): memory address 0x7f4b77ea0080 leaked: 

error(gpa): memory address 0x7f4b77ea0088 leaked: 

error(gpa): memory address 0x7f4b77ea0090 leaked: 

error(gpa): memory address 0x7f4b77ea0098 leaked: 

error(gpa): memory address 0x7f4b77e20000 leaked: 

error(gpa): memory address 0x7f4b77e20010 leaked: 

error(gpa): memory address 0x7f4b77e20020 leaked: 

error(gpa): memory address 0x7f4b77e20030 leaked: 

error(gpa): memory address 0x7f4b77e20040 leaked: 

error(gpa): memory address 0x7f4b77e20050 leaked: 

error(gpa): memory address 0x7f4b77e20060 leaked: 

error(gpa): memory address 0x7f4b77e20070 leaked: 

error(gpa): memory address 0x7f4b77e20080 leaked: 

error(gpa): memory address 0x7f4b77e00000 leaked: 


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
poop "./nix/bin/nix nar ls linux.nar / -Rl" "./lix/bin/nix nar ls linux.nar / -Rl" "./narser/bin/narser ls linux.nar / -Rl" "./nix-nar/bin/nix-nar ls linux.nar / -Rl" "./narz/bin/narz ls linux.nar / -rl"
Benchmark 1 (3 runs): ./nix/bin/nix nar ls linux.nar / -Rl
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          2.78s  Â± 16.6ms                              2.77s  â€¦ 2.80s                                     0 ( 0%)        0%
  peak_rss           3.75GB Â± 44.2KB                              3.75GB â€¦ 3.75GB                                    0 ( 0%)        0%
  cpu_cycles         3.16G  Â± 26.8M                               3.14G  â€¦ 3.19G                                     0 ( 0%)        0%
  instructions       2.60G  Â±  638K                               2.60G  â€¦ 2.60G                                     0 ( 0%)        0%
  cache_references    142M  Â± 5.77M                                137M  â€¦  148M                                     0 ( 0%)        0%
  cache_misses       73.5M  Â±  201K                               73.3M  â€¦ 73.6M                                     0 ( 0%)        0%
  branch_misses      4.45M  Â±  263K                               4.29M  â€¦ 4.75M                                     0 ( 0%)        0%
Benchmark 2 (3 runs): ./lix/bin/nix nar ls linux.nar / -Rl
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          2.96s  Â± 25.1ms                              2.94s  â€¦ 2.99s                                     0 ( 0%)        ðŸ’©+  6.5% Â±  1.7%
  peak_rss           3.73GB Â±  133KB                              3.73GB â€¦ 3.73GB                                    0 ( 0%)          -  0.4% Â±  0.0%
  cpu_cycles         3.76G  Â± 59.4M                               3.71G  â€¦ 3.83G                                     0 ( 0%)        ðŸ’©+ 19.2% Â±  3.3%
  instructions       3.89G  Â± 1.25M                               3.89G  â€¦ 3.89G                                     0 ( 0%)        ðŸ’©+ 49.8% Â±  0.1%
  cache_references    137M  Â± 2.79M                                135M  â€¦  140M                                     0 ( 0%)          -  3.3% Â±  7.3%
  cache_misses       71.0M  Â± 74.7K                               71.0M  â€¦ 71.1M                                     0 ( 0%)        âš¡-  3.4% Â±  0.5%
  branch_misses      6.90M  Â± 1.26M                               5.82M  â€¦ 8.28M                                     0 ( 0%)        ðŸ’©+ 55.1% Â± 46.2%
Benchmark 3 (38 runs): ./narser/bin/narser ls linux.nar / -Rl
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           134ms Â±  713us                               133ms â€¦  136ms                                    3 ( 8%)        âš¡- 95.2% Â±  0.2%
  peak_rss           33.5MB Â±    0                                33.5MB â€¦ 33.5MB                                    0 ( 0%)        âš¡- 99.1% Â±  0.0%
  cpu_cycles          165M  Â± 1.09M                                163M  â€¦  167M                                    10 (26%)        âš¡- 94.8% Â±  0.2%
  instructions        383M  Â±  188                                 383M  â€¦  383M                                     1 ( 3%)        âš¡- 85.2% Â±  0.0%
  cache_references   2.17M  Â± 18.5K                               2.14M  â€¦ 2.22M                                     0 ( 0%)        âš¡- 98.5% Â±  1.1%
  cache_misses        923K  Â± 13.4K                                909K  â€¦  987K                                     2 ( 5%)        âš¡- 98.7% Â±  0.1%
  branch_misses       541K  Â± 3.48K                                537K  â€¦  555K                                     5 (13%)        âš¡- 87.9% Â±  1.6%
Benchmark 4 (8 runs): ./nix-nar/bin/nix-nar ls linux.nar / -Rl
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           665ms Â± 3.97ms                               660ms â€¦  673ms                                    0 ( 0%)        âš¡- 76.1% Â±  0.5%
  peak_rss           13.9MB Â± 78.4KB                              13.7MB â€¦ 13.9MB                                    1 (13%)        âš¡- 99.6% Â±  0.0%
  cpu_cycles         1.23G  Â± 7.35M                               1.22G  â€¦ 1.24G                                     0 ( 0%)        âš¡- 61.2% Â±  0.7%
  instructions       2.21G  Â±  156K                               2.21G  â€¦ 2.21G                                     1 (13%)        âš¡- 14.9% Â±  0.0%
  cache_references   15.0M  Â± 2.97M                               12.6M  â€¦ 21.6M                                     1 (13%)        âš¡- 89.4% Â±  4.1%
  cache_misses        296K  Â± 11.6K                                279K  â€¦  315K                                     0 ( 0%)        âš¡- 99.6% Â±  0.2%
  branch_misses      1.84M  Â±  190K                               1.65M  â€¦ 2.23M                                     0 ( 0%)        âš¡- 58.6% Â±  7.2%

error: Benchmark 5 command './narz/bin/narz ls linux.nar / -rl' failed with exit code 1:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ stderr â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
error(gpa): memory address 0x7fdea3a20000 leaked: 

error(gpa): memory address 0x7fdea3a20002 leaked: 

error(gpa): memory address 0x7fdea3aa0000 leaked: 

error(gpa): memory address 0x7fdea3aa0004 leaked: 

error(gpa): memory address 0x7fdea3aa0008 leaked: 

error(gpa): memory address 0x7fdea3aa000c leaked: 

error(gpa): memory address 0x7fdea3aa0010 leaked: 

error(gpa): memory address 0x7fdea3aa0014 leaked: 

error(gpa): memory address 0x7fdea3aa0018 leaked: 

error(gpa): memory address 0x7fdea3aa001c leaked: 

error(gpa): memory address 0x7fdea3aa0020 leaked: 

error(gpa): memory address 0x7fdea3a80000 leaked: 

error(gpa): memory address 0x7fdea3a80008 leaked: 

error(gpa): memory address 0x7fdea3a80010 leaked: 

error(gpa): memory address 0x7fdea3a80018 leaked: 

error(gpa): memory address 0x7fdea3a80020 leaked: 

error(gpa): memory address 0x7fdea3a80028 leaked: 

error(gpa): memory address 0x7fdea3a80030 leaked: 

error(gpa): memory address 0x7fdea3a80038 leaked: 

error(gpa): memory address 0x7fdea3a80040 leaked: 

error(gpa): memory address 0x7fdea3a80048 leaked: 

error(gpa): memory address 0x7fdea3a80050 leaked: 

error(gpa): memory address 0x7fdea3a80058 leaked: 

error(gpa): memory address 0x7fdea3a80060 leaked: 

error(gpa): memory address 0x7fdea3a80068 leaked: 

error(gpa): memory address 0x7fdea3a80070 leaked: 

error(gpa): memory address 0x7fdea3a80078 leaked: 

error(gpa): memory address 0x7fdea3a80080 leaked: 

error(gpa): memory address 0x7fdea3a80088 leaked: 

error(gpa): memory address 0x7fdea3a80090 leaked: 

error(gpa): memory address 0x7fdea3a80098 leaked: 

error(gpa): memory address 0x7fdea3a00000 leaked: 

error(gpa): memory address 0x7fdea3a00010 leaked: 

error(gpa): memory address 0x7fdea3a00020 leaked: 

error(gpa): memory address 0x7fdea3a00030 leaked: 

error(gpa): memory address 0x7fdea3a00040 leaked: 

error(gpa): memory address 0x7fdea3a00050 leaked: 

error(gpa): memory address 0x7fdea3a00060 leaked: 

error(gpa): memory address 0x7fdea3a00070 leaked: 

error(gpa): memory address 0x7fdea3a00080 leaked: 

error(gpa): memory address 0x7fdea39e0000 leaked: 


â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
poop "./nix/bin/nix nar ls linux.nar / -l" "./lix/bin/nix nar ls linux.nar / -l" "./narser/bin/narser ls linux.nar / -l" "./nix-nar/bin/nix-nar ls linux.nar / -l" "./narz/bin/narz ls linux.nar / -l"
Benchmark 1 (3 runs): ./nix/bin/nix nar ls linux.nar / -l
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          2.48s  Â± 11.5ms                              2.46s  â€¦ 2.48s                                     0 ( 0%)        0%
  peak_rss           3.75GB Â±  122KB                              3.75GB â€¦ 3.75GB                                    0 ( 0%)        0%
  cpu_cycles         2.49G  Â± 13.9M                               2.48G  â€¦ 2.51G                                     0 ( 0%)        0%
  instructions       1.21G  Â±  246K                               1.21G  â€¦ 1.21G                                     0 ( 0%)        0%
  cache_references    126M  Â±  573K                                126M  â€¦  127M                                     0 ( 0%)        0%
  cache_misses       71.1M  Â±  149K                               71.0M  â€¦ 71.3M                                     0 ( 0%)        0%
  branch_misses      1.90M  Â±  320K                               1.71M  â€¦ 2.27M                                     0 ( 0%)        0%
Benchmark 2 (3 runs): ./lix/bin/nix nar ls linux.nar / -l
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          2.58s  Â± 11.1ms                              2.57s  â€¦ 2.59s                                     0 ( 0%)        ðŸ’©+  4.1% Â±  1.0%
  peak_rss           3.73GB Â± 20.6KB                              3.73GB â€¦ 3.73GB                                    0 ( 0%)          -  0.4% Â±  0.0%
  cpu_cycles         2.89G  Â± 14.5M                               2.88G  â€¦ 2.90G                                     0 ( 0%)        ðŸ’©+ 16.0% Â±  1.3%
  instructions       2.16G  Â± 5.76K                               2.16G  â€¦ 2.16G                                     0 ( 0%)        ðŸ’©+ 79.0% Â±  0.0%
  cache_references    130M  Â± 1.41M                                129M  â€¦  131M                                     0 ( 0%)          +  2.7% Â±  1.9%
  cache_misses       70.1M  Â±  211K                               69.9M  â€¦ 70.3M                                     0 ( 0%)          -  1.5% Â±  0.6%
  branch_misses      4.11M  Â±  358K                               3.85M  â€¦ 4.52M                                     0 ( 0%)        ðŸ’©+116.3% Â± 40.4%
Benchmark 3 (46 runs): ./narser/bin/narser ls linux.nar / -l
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           109ms Â±  518us                               108ms â€¦  110ms                                    0 ( 0%)        âš¡- 95.6% Â±  0.1%
  peak_rss           33.5MB Â±    0                                33.5MB â€¦ 33.5MB                                    0 ( 0%)        âš¡- 99.1% Â±  0.0%
  cpu_cycles         78.7M  Â±  773K                               78.1M  â€¦ 81.1M                                     5 (11%)        âš¡- 96.8% Â±  0.1%
  instructions        171M  Â±  240                                 171M  â€¦  171M                                     0 ( 0%)        âš¡- 85.8% Â±  0.0%
  cache_references    955K  Â± 15.8K                                924K  â€¦ 1.00M                                     1 ( 2%)        âš¡- 99.2% Â±  0.1%
  cache_misses       14.8K  Â± 1.60K                               12.3K  â€¦ 21.3K                                     4 ( 9%)        âš¡-100.0% Â±  0.1%
  branch_misses       341K  Â± 5.29K                                337K  â€¦  364K                                     9 (20%)        âš¡- 82.1% Â±  4.2%
Benchmark 4 (10 runs): ./nix-nar/bin/nix-nar ls linux.nar / -l
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           517ms Â± 2.86ms                               513ms â€¦  524ms                                    1 (10%)        âš¡- 79.1% Â±  0.3%
  peak_rss           2.40MB Â± 56.9KB                              2.34MB â€¦ 2.51MB                                    0 ( 0%)        âš¡- 99.9% Â±  0.0%
  cpu_cycles          936M  Â± 4.10M                                929M  â€¦  942M                                     0 ( 0%)        âš¡- 62.4% Â±  0.4%
  instructions       1.50G  Â± 83.4K                               1.50G  â€¦ 1.50G                                     0 ( 0%)        ðŸ’©+ 24.4% Â±  0.0%
  cache_references   8.55M  Â± 2.67M                               5.93M  â€¦ 13.3M                                     0 ( 0%)        âš¡- 93.2% Â±  2.8%
  cache_misses       54.7K  Â± 7.50K                               46.7K  â€¦ 66.5K                                     0 ( 0%)        âš¡- 99.9% Â±  0.1%
  branch_misses      1.08M  Â± 65.1K                                997K  â€¦ 1.20M                                     0 ( 0%)        âš¡- 43.4% Â± 11.3%

error: Benchmark 5 command './narz/bin/narz ls linux.nar / -l' failed with exit code 1:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ stderr â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
poop "./nix/bin/nix nar cat linux.nar /README" "./lix/bin/nix nar cat linux.nar /README" "./narser/bin/narser cat linux.nar /README" "./narser/bin/narser cat linux.nar /README -L" "./nix-nar/bin/nix-nar cat linux.nar /README " "./narz/bin/narz cat linux.nar /README"
Benchmark 1 (3 runs): ./nix/bin/nix nar cat linux.nar /README
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          2.46s  Â± 14.5ms                              2.44s  â€¦ 2.47s                                     0 ( 0%)        0%
  peak_rss           3.73GB Â± 44.9KB                              3.73GB â€¦ 3.73GB                                    0 ( 0%)        0%
  cpu_cycles         2.45G  Â± 16.5M                               2.44G  â€¦ 2.47G                                     0 ( 0%)        0%
  instructions       1.14G  Â±  195K                               1.14G  â€¦ 1.14G                                     0 ( 0%)        0%
  cache_references    126M  Â±  678K                                125M  â€¦  127M                                     0 ( 0%)        0%
  cache_misses       69.8M  Â±  216K                               69.6M  â€¦ 70.0M                                     0 ( 0%)        0%
  branch_misses      2.02M  Â±  568K                               1.54M  â€¦ 2.65M                                     0 ( 0%)        0%
Benchmark 2 (3 runs): ./lix/bin/nix nar cat linux.nar /README
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          2.59s  Â± 6.02ms                              2.58s  â€¦ 2.59s                                     0 ( 0%)        ðŸ’©+  5.2% Â±  1.0%
  peak_rss           3.73GB Â±  138KB                              3.73GB â€¦ 3.74GB                                    0 ( 0%)          +  0.2% Â±  0.0%
  cpu_cycles         2.88G  Â± 4.89M                               2.88G  â€¦ 2.89G                                     0 ( 0%)        ðŸ’©+ 17.8% Â±  1.1%
  instructions       2.17G  Â± 3.52K                               2.17G  â€¦ 2.17G                                     0 ( 0%)        ðŸ’©+ 91.2% Â±  0.0%
  cache_references    128M  Â±  886K                                127M  â€¦  129M                                     0 ( 0%)          +  1.7% Â±  1.4%
  cache_misses       70.5M  Â±  193K                               70.4M  â€¦ 70.7M                                     0 ( 0%)          +  1.0% Â±  0.7%
  branch_misses      3.97M  Â±  199K                               3.74M  â€¦ 4.13M                                     0 ( 0%)        ðŸ’©+ 96.3% Â± 47.8%
Benchmark 3 (481 runs): ./narser/bin/narser cat linux.nar /README
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          10.4ms Â±  427us                              10.2ms â€¦ 15.2ms                                   26 ( 5%)        âš¡- 99.6% Â±  0.0%
  peak_rss           1.04MB Â±    0                                1.04MB â€¦ 1.04MB                                    0 ( 0%)        âš¡-100.0% Â±  0.0%
  cpu_cycles         8.30M  Â±  185K                               8.22M  â€¦ 10.4M                                    30 ( 6%)        âš¡- 99.7% Â±  0.1%
  instructions       19.3M  Â± 3.73                                19.3M  â€¦ 19.3M                                    32 ( 7%)        âš¡- 98.3% Â±  0.0%
  cache_references   19.8K  Â± 1.70K                               17.1K  â€¦ 39.6K                                    16 ( 3%)        âš¡-100.0% Â±  0.0%
  cache_misses       1.95K  Â±  456                                1.45K  â€¦ 8.44K                                    15 ( 3%)        âš¡-100.0% Â±  0.0%
  branch_misses      43.5K  Â± 1.28K                               42.8K  â€¦ 59.9K                                    24 ( 5%)        âš¡- 97.8% Â±  2.1%
Benchmark 4 (5 runs): ./narser/bin/narser cat linux.nar /README -L
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          1.12s  Â± 2.09ms                              1.12s  â€¦ 1.12s                                     0 ( 0%)        âš¡- 54.5% Â±  0.6%
  peak_rss           1.86GB Â± 58.6KB                              1.85GB â€¦ 1.86GB                                    1 (20%)        âš¡- 50.2% Â±  0.0%
  cpu_cycles          360M  Â± 1.77M                                357M  â€¦  362M                                     0 ( 0%)        âš¡- 85.3% Â±  0.7%
  instructions        419M  Â±  104                                 419M  â€¦  419M                                     0 ( 0%)        âš¡- 63.1% Â±  0.0%
  cache_references   10.5M  Â±  545K                               10.1M  â€¦ 11.5M                                     0 ( 0%)        âš¡- 91.7% Â±  0.8%
  cache_misses       1.71M  Â± 7.41K                               1.70M  â€¦ 1.72M                                     0 ( 0%)        âš¡- 97.6% Â±  0.3%
  branch_misses       696K  Â± 15.9K                                676K  â€¦  719K                                     0 ( 0%)        âš¡- 65.6% Â± 29.1%
Benchmark 5 (64 runs): ./nix-nar/bin/nix-nar cat linux.nar /README
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          78.2ms Â± 1.71ms                              76.9ms â€¦ 86.1ms                                    9 (14%)        âš¡- 96.8% Â±  0.1%
  peak_rss           2.40MB Â± 47.2KB                              2.27MB â€¦ 2.48MB                                    2 ( 3%)        âš¡- 99.9% Â±  0.0%
  cpu_cycles          114M  Â± 3.83M                                112M  â€¦  140M                                     6 ( 9%)        âš¡- 95.3% Â±  0.2%
  instructions        164M  Â± 9.77K                                164M  â€¦  164M                                     0 ( 0%)        âš¡- 85.6% Â±  0.0%
  cache_references   1.60M  Â±  543K                                633K  â€¦ 3.05M                                     2 ( 3%)        âš¡- 98.7% Â±  0.5%
  cache_misses       22.2K  Â± 2.12K                               19.9K  â€¦ 31.2K                                     6 ( 9%)        âš¡-100.0% Â±  0.1%
  branch_misses       134K  Â± 92.2K                                107K  â€¦  750K                                     9 (14%)        âš¡- 93.4% Â±  7.9%
Benchmark 6 (3 runs): ./narz/bin/narz cat linux.nar /README
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          3.07s  Â± 13.5ms                              3.07s  â€¦ 3.09s                                     0 ( 0%)        ðŸ’©+ 25.0% Â±  1.3%
  peak_rss           1.84GB Â± 75.7KB                              1.84GB â€¦ 1.84GB                                    0 ( 0%)        âš¡- 50.7% Â±  0.0%
  cpu_cycles         1.00G  Â± 2.93M                               1.00G  â€¦ 1.01G                                     0 ( 0%)        âš¡- 59.0% Â±  1.1%
  instructions       1.36G  Â± 9.66K                               1.36G  â€¦ 1.36G                                     0 ( 0%)        ðŸ’©+ 19.4% Â±  0.0%
  cache_references   5.42M  Â±  561K                               5.06M  â€¦ 6.07M                                     0 ( 0%)        âš¡- 95.7% Â±  1.1%
  cache_misses        169K  Â± 4.86K                                164K  â€¦  174K                                     0 ( 0%)        âš¡- 99.8% Â±  0.5%
  branch_misses      1.89M  Â± 71.4K                               1.84M  â€¦ 1.97M                                     0 ( 0%)          -  6.3% Â± 45.5%
poop "./nix/bin/nix nar cat linux.nar /virt/lib/irqbypass.c" "./lix/bin/nix nar cat linux.nar /virt/lib/irqbypass.c" "./narser/bin/narser cat linux.nar /virt/lib/irqbypass.c" "./narser/bin/narser cat linux.nar /virt/lib/irqbypass.c -L" "./nix-nar/bin/nix-nar cat linux.nar /virt/lib/irqbypass.c " "./narz/bin/narz cat linux.nar /virt/lib/irqbypass.c"
Benchmark 1 (3 runs): ./nix/bin/nix nar cat linux.nar /virt/lib/irqbypass.c
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          2.45s  Â± 14.2ms                              2.44s  â€¦ 2.46s                                     0 ( 0%)        0%
  peak_rss           3.73GB Â± 65.6KB                              3.73GB â€¦ 3.73GB                                    0 ( 0%)        0%
  cpu_cycles         2.43G  Â± 11.8M                               2.42G  â€¦ 2.45G                                     0 ( 0%)        0%
  instructions       1.14G  Â±  195K                               1.14G  â€¦ 1.14G                                     0 ( 0%)        0%
  cache_references    126M  Â± 1.63M                                125M  â€¦  128M                                     0 ( 0%)        0%
  cache_misses       69.9M  Â±  197K                               69.7M  â€¦ 70.1M                                     0 ( 0%)        0%
  branch_misses      1.63M  Â±  145K                               1.54M  â€¦ 1.80M                                     0 ( 0%)        0%
Benchmark 2 (3 runs): ./lix/bin/nix nar cat linux.nar /virt/lib/irqbypass.c
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          2.60s  Â± 16.7ms                              2.58s  â€¦ 2.62s                                     0 ( 0%)        ðŸ’©+  6.1% Â±  1.4%
  peak_rss           3.73GB Â± 80.7KB                              3.73GB â€¦ 3.74GB                                    0 ( 0%)          +  0.2% Â±  0.0%
  cpu_cycles         2.92G  Â± 15.3M                               2.90G  â€¦ 2.93G                                     0 ( 0%)        ðŸ’©+ 19.9% Â±  1.3%
  instructions       2.19G  Â± 11.8K                               2.19G  â€¦ 2.19G                                     0 ( 0%)        ðŸ’©+ 93.0% Â±  0.0%
  cache_references    129M  Â±  370K                                129M  â€¦  129M                                     0 ( 0%)          +  2.4% Â±  2.1%
  cache_misses       71.3M  Â±  274K                               71.1M  â€¦ 71.6M                                     0 ( 0%)        ðŸ’©+  2.0% Â±  0.8%
  branch_misses      4.26M  Â±  307K                               3.96M  â€¦ 4.57M                                     0 ( 0%)        ðŸ’©+161.2% Â± 33.4%
Benchmark 3 (55 runs): ./narser/bin/narser cat linux.nar /virt/lib/irqbypass.c
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          91.3ms Â± 1.36ms                              90.4ms â€¦ 96.0ms                                   11 (20%)        âš¡- 96.3% Â±  0.1%
  peak_rss           1.04MB Â±    0                                1.04MB â€¦ 1.04MB                                    0 ( 0%)        âš¡-100.0% Â±  0.0%
  cpu_cycles         68.9M  Â± 1.12M                               68.2M  â€¦ 73.7M                                     9 (16%)        âš¡- 97.2% Â±  0.1%
  instructions        164M  Â± 8.13                                 164M  â€¦  164M                                     2 ( 4%)        âš¡- 85.6% Â±  0.0%
  cache_references   88.8K  Â± 7.57K                               77.3K  â€¦  112K                                     1 ( 2%)        âš¡- 99.9% Â±  0.3%
  cache_misses       6.71K  Â± 1.46K                               4.78K  â€¦ 11.9K                                     6 (11%)        âš¡-100.0% Â±  0.1%
  branch_misses       338K  Â± 9.50K                                333K  â€¦  373K                                    10 (18%)        âš¡- 79.3% Â±  2.1%
Benchmark 4 (5 runs): ./narser/bin/narser cat linux.nar /virt/lib/irqbypass.c -L
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          1.11s  Â± 3.33ms                              1.11s  â€¦ 1.12s                                     0 ( 0%)        âš¡- 54.5% Â±  0.6%
  peak_rss           1.86GB Â± 58.6KB                              1.85GB â€¦ 1.86GB                                    1 (20%)        âš¡- 50.2% Â±  0.0%
  cpu_cycles          358M  Â± 1.78M                                357M  â€¦  361M                                     0 ( 0%)        âš¡- 85.3% Â±  0.5%
  instructions        419M  Â± 85.6                                 419M  â€¦  419M                                     0 ( 0%)        âš¡- 63.1% Â±  0.0%
  cache_references   10.0M  Â±  129K                               9.84M  â€¦ 10.2M                                     0 ( 0%)        âš¡- 92.1% Â±  1.3%
  cache_misses       1.71M  Â± 8.64K                               1.70M  â€¦ 1.72M                                     0 ( 0%)        âš¡- 97.6% Â±  0.3%
  branch_misses       686K  Â± 17.0K                                675K  â€¦  715K                                     0 ( 0%)        âš¡- 57.9% Â±  9.3%
Benchmark 5 (10 runs): ./nix-nar/bin/nix-nar cat linux.nar /virt/lib/irqbypass.c
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           505ms Â± 3.19ms                               500ms â€¦  511ms                                    0 ( 0%)        âš¡- 79.4% Â±  0.4%
  peak_rss           2.41MB Â± 54.0KB                              2.31MB â€¦ 2.51MB                                    0 ( 0%)        âš¡- 99.9% Â±  0.0%
  cpu_cycles          888M  Â± 6.88M                                879M  â€¦  903M                                     0 ( 0%)        âš¡- 63.5% Â±  0.5%
  instructions       1.37G  Â± 73.7K                               1.37G  â€¦ 1.37G                                     0 ( 0%)        ðŸ’©+ 20.9% Â±  0.0%
  cache_references   9.35M  Â± 3.23M                               4.51M  â€¦ 15.0M                                     0 ( 0%)        âš¡- 92.6% Â±  3.4%
  cache_misses       45.8K  Â± 6.05K                               40.7K  â€¦ 58.1K                                     0 ( 0%)        âš¡- 99.9% Â±  0.2%
  branch_misses      1.10M  Â±  159K                                912K  â€¦ 1.36M                                     0 ( 0%)        âš¡- 32.4% Â± 13.9%
Benchmark 6 (3 runs): ./narz/bin/narz cat linux.nar /virt/lib/irqbypass.c
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          3.06s  Â± 3.22ms                              3.05s  â€¦ 3.06s                                     0 ( 0%)        ðŸ’©+ 24.9% Â±  1.0%
  peak_rss           1.84GB Â±    0                                1.84GB â€¦ 1.84GB                                    0 ( 0%)        âš¡- 50.7% Â±  0.0%
  cpu_cycles         1.00G  Â± 6.07M                                997M  â€¦ 1.01G                                     0 ( 0%)        âš¡- 58.7% Â±  0.9%
  instructions       1.36G  Â± 11.2K                               1.36G  â€¦ 1.36G                                     0 ( 0%)        ðŸ’©+ 19.4% Â±  0.0%
  cache_references   4.85M  Â±  512K                               4.31M  â€¦ 5.32M                                     0 ( 0%)        âš¡- 96.2% Â±  2.2%
  cache_misses        167K  Â± 8.04K                                159K  â€¦  175K                                     0 ( 0%)        âš¡- 99.8% Â±  0.5%
  branch_misses      1.90M  Â± 44.0K                               1.84M  â€¦ 1.93M                                     0 ( 0%)        ðŸ’©+ 16.2% Â± 14.9%

./nix/bin/nix-store --restore out < linux.nar
cmp <(./nix/bin/nix nar pack out) linux.nar
rm -rf out

./lix/bin/nix-store --restore out < linux.nar
cmp <(./nix/bin/nix nar pack out) linux.nar
rm -rf out

./narser/bin/narser unpack linux.nar out
cmp <(./nix/bin/nix nar pack out) linux.nar || exit 1
rm -rf out

rm -rf out ; time ./nix/bin/nix-store --restore out < linux.nar

real	0m1.535s
user	0m0.364s
sys	0m1.166s
rm -rf out ; time ./nix/bin/nix-store --restore out < linux.nar

real	0m1.541s
user	0m0.346s
sys	0m1.185s
rm -rf out ; time ./nix/bin/nix-store --restore out < linux.nar

real	0m1.516s
user	0m0.325s
sys	0m1.184s

rm -rf out ; time ./lix/bin/nix-store --restore out < linux.nar

real	0m1.660s
user	0m0.487s
sys	0m1.165s
rm -rf out ; time ./lix/bin/nix-store --restore out < linux.nar

real	0m1.685s
user	0m0.468s
sys	0m1.209s
rm -rf out ; time ./lix/bin/nix-store --restore out < linux.nar

real	0m1.675s
user	0m0.491s
sys	0m1.177s

rm -rf out ; time ./narser/bin/narser unpack linux.nar out

real	0m1.390s
user	0m0.209s
sys	0m1.175s
rm -rf out ; time ./narser/bin/narser unpack linux.nar out

real	0m1.392s
user	0m0.235s
sys	0m1.146s
rm -rf out ; time ./narser/bin/narser unpack linux.nar out

real	0m1.386s
user	0m0.214s
sys	0m1.166s
