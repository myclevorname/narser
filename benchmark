
echo $1
/tmp/clevor/tests/

mkdir $1 || exit 1
cd $1

nix build git+https://git.lix.systems/lix-project/lix?rev=a55fe35dac3495fc3f9243b5817ce8a5314a8dd5 -o lix >& /dev/null || exit 1
nix build github:NixOS/nix/ad2360c59f7460c48ea982c32e55bfc01bfe527c -o nix >& /dev/null || exit 1
# narz fails in f790364c93142affa3cc699365545d6a11916a76
nix build git+https://git.sr.ht/~watersucks/narz?rev=760736b98e08c7c741838f5ad020d6d2e33b5e57 -o narz >& /dev/null || exit 1
nix build git+https://codeberg.org/clevor/narser?rev=30f6b71dedad4530826dd689eb86dd80b0db4133 -o narser >& /dev/null || exit 1
nix build gitlab:abstract-binary/nix-nar-rs/c8d9250b9be837abafa0046cb9c2a852b846da6a -o nix-nar >& /dev/null || exit 1

git clone https://github.com/torvalds/linux --depth=1 -q
cd linux
git log | head
commit f406055cb18c6e299c4a783fc1effeb16be41803
Author: Linus Torvalds <torvalds@linux-foundation.org>
Date:   Fri Oct 17 13:04:21 2025 -1000

    Merge tag 'arm64-fixes' of git://git.kernel.org/pub/scm/linux/kernel/git/arm64/linux
    
    Pull arm64 fixes from Catalin Marinas:
    
     - Explicitly encode the XZR register if the value passed to
       write_sysreg_s() is 0.
cd ..

nix nar pack linux > linux.nar

cmp <(./nix/bin/nix nar pack linux) <(./lix/bin/nix nar dump-path linux)
cmp <(./nix/bin/nix nar pack linux) <(./narser/bin/narser pack linux) || exit 1
cmp <(./nix/bin/nix nar pack linux) <(./nix-nar/bin/nix-nar dump-path linux)

cmp <(./nix/bin/nix nar cat linux.nar /README) <(./lix/bin/nix nar cat linux.nar /README)
cmp <(./nix/bin/nix nar cat linux.nar /README) <(./narser/bin/narser cat linux.nar /README) || exit 1
cmp <(./nix/bin/nix nar cat linux.nar /README) <(./narz/bin/narz cat linux.nar /README)
cmp <(./nix/bin/nix nar cat linux.nar /README) <(./nix-nar/bin/nix-nar cat linux.nar /README)

cmp <(./nix/bin/nix nar ls linux.nar /) <(./lix/bin/nix nar ls linux.nar /)
cmp <(./nix/bin/nix nar ls linux.nar /) <(./narser/bin/narser ls linux.nar /) || exit 1
cmp <(./nix/bin/nix nar ls linux.nar / 2> /dev/null) <(./narz/bin/narz ls linux.nar / 2> /dev/null)
/dev/fd/63 /dev/fd/62 differ: byte 1, line 1
cmp <(./nix/bin/nix nar ls linux.nar /) <(./nix-nar/bin/nix-nar ls linux.nar /)

cmp <(./nix/bin/nix nar ls linux.nar / -l) <(./lix/bin/nix nar ls linux.nar / -l)
cmp <(./nix/bin/nix nar ls linux.nar / -l) <(./narser/bin/narser ls linux.nar / -l) || exit 1
cmp <(./nix/bin/nix nar ls linux.nar / -l 2> /dev/null) <(./narz/bin/narz ls linux.nar / -l 2> /dev/null)
/dev/fd/63 /dev/fd/62 differ: byte 1, line 1
cmp <(./nix/bin/nix nar ls linux.nar / -l) <(./nix-nar/bin/nix-nar ls linux.nar / -l)

cmp <(./nix/bin/nix nar ls linux.nar / -lR) <(./lix/bin/nix nar ls linux.nar / -lR)
cmp <(./nix/bin/nix nar ls linux.nar / -lR) <(./narser/bin/narser ls linux.nar / -lR) || exit 1
cmp <(./nix/bin/nix nar ls linux.nar / -lR 2> /dev/null) <(./narz/bin/narz ls linux.nar / -lr 2> /dev/null)
/dev/fd/63 /dev/fd/62 differ: byte 3, line 1
cmp <(./nix/bin/nix nar ls linux.nar / -lR) <(./nix-nar/bin/nix-nar ls linux.nar / -lR)

cmp <(./nix/bin/nix nar ls linux.nar / -R) <(./lix/bin/nix nar ls linux.nar / -R)
cmp <(./nix/bin/nix nar ls linux.nar / -R) <(./narser/bin/narser ls linux.nar / -R) || exit 1
cmp <(./nix/bin/nix nar ls linux.nar / -R 2> /dev/null) <(./narz/bin/narz ls linux.nar / -r 2> /dev/null)
/dev/fd/63 /dev/fd/62 differ: byte 2, line 1
cmp <(./nix/bin/nix nar ls linux.nar / -R) <(./nix-nar/bin/nix-nar ls linux.nar / -R)


poop -d 60000 "./nix/bin/nix nar pack linux" "./lix/bin/nix nar dump-path linux" "./narser/bin/narser pack linux" "./nix-nar/bin/nix-nar dump-path linux"
Benchmark 1 (32 runs): ./nix/bin/nix nar pack linux
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          1.90s  Â± 57.4ms                              1.85s  â€¦ 2.02s                                     0 ( 0%)        0%
  peak_rss           37.6MB Â±  136KB                              37.4MB â€¦ 38.1MB                                    1 ( 3%)        0%
  cpu_cycles         3.49G  Â±  192M                               3.33G  â€¦ 3.85G                                     0 ( 0%)        0%
  instructions       7.41G  Â±  177K                               7.41G  â€¦ 7.41G                                     0 ( 0%)        0%
  cache_references   54.1M  Â± 3.24M                               49.6M  â€¦ 62.9M                                     1 ( 3%)        0%
  cache_misses       4.41M  Â± 35.0K                               4.35M  â€¦ 4.51M                                     1 ( 3%)        0%
  branch_misses      11.5M  Â± 4.20M                               8.12M  â€¦ 19.0M                                     0 ( 0%)        0%
Benchmark 2 (52 runs): ./lix/bin/nix nar dump-path linux
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          1.17s  Â± 14.9ms                              1.14s  â€¦ 1.20s                                     0 ( 0%)        âš¡- 38.6% Â±  0.9%
  peak_rss           33.6MB Â±  175KB                              33.1MB â€¦ 34.3MB                                    3 ( 6%)        âš¡- 10.7% Â±  0.2%
  cpu_cycles         1.39G  Â± 45.8M                               1.33G  â€¦ 1.48G                                     0 ( 0%)        âš¡- 60.2% Â±  1.6%
  instructions       1.84G  Â± 8.45K                               1.84G  â€¦ 1.84G                                     0 ( 0%)        âš¡- 75.2% Â±  0.0%
  cache_references   85.1M  Â± 2.84M                               79.1M  â€¦ 91.5M                                     0 ( 0%)        ðŸ’©+ 57.4% Â±  2.5%
  cache_misses        760K  Â± 25.6K                                729K  â€¦  871K                                     4 ( 8%)        âš¡- 82.8% Â±  0.3%
  branch_misses      4.40M  Â±  941K                               3.34M  â€¦ 6.36M                                     0 ( 0%)        âš¡- 61.7% Â± 10.4%
Benchmark 3 (82 runs): ./narser/bin/narser pack linux
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           734ms Â± 2.07ms                               731ms â€¦  741ms                                    1 ( 1%)        âš¡- 61.3% Â±  0.7%
  peak_rss           1.17MB Â± 36.9KB                              1.05MB â€¦ 1.18MB                                    7 ( 9%)        âš¡- 96.9% Â±  0.1%
  cpu_cycles          236M  Â± 2.31M                                232M  â€¦  246M                                     5 ( 6%)        âš¡- 93.2% Â±  1.2%
  instructions        421M  Â± 12.9                                 421M  â€¦  421M                                     0 ( 0%)        âš¡- 94.3% Â±  0.0%
  cache_references   6.58M  Â± 1.60M                               5.14M  â€¦ 14.1M                                     8 (10%)        âš¡- 87.8% Â±  1.7%
  cache_misses        182K  Â± 13.6K                                156K  â€¦  233K                                     1 ( 1%)        âš¡- 95.9% Â±  0.2%
  branch_misses       734K  Â± 4.02K                                726K  â€¦  753K                                     1 ( 1%)        âš¡- 93.6% Â±  7.9%
Benchmark 4 (39 runs): ./nix-nar/bin/nix-nar dump-path linux
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          1.55s  Â± 8.38ms                              1.54s  â€¦ 1.57s                                     0 ( 0%)        âš¡- 18.4% Â±  1.0%
  peak_rss           2.92MB Â± 87.9KB                              2.70MB â€¦ 3.07MB                                    0 ( 0%)        âš¡- 92.2% Â±  0.1%
  cpu_cycles          546M  Â± 8.06M                                530M  â€¦  567M                                     0 ( 0%)        âš¡- 84.3% Â±  1.8%
  instructions        834M  Â± 83.9K                                834M  â€¦  834M                                     0 ( 0%)        âš¡- 88.8% Â±  0.0%
  cache_references   11.0M  Â±  794K                               9.66M  â€¦ 12.6M                                     0 ( 0%)        âš¡- 79.6% Â±  2.0%
  cache_misses        388K  Â± 16.8K                                355K  â€¦  415K                                     0 ( 0%)        âš¡- 91.2% Â±  0.3%
  branch_misses      2.74M  Â±  132K                               2.50M  â€¦ 3.00M                                     0 ( 0%)        âš¡- 76.2% Â± 11.7%

poop -d 60000 "./nix/bin/nix nar ls linux.nar /" "./lix/bin/nix nar ls linux.nar /" "./narser/bin/narser ls linux.nar /" "./nix-nar/bin/nix-nar ls linux.nar /" "./narz/bin/narz ls linux.nar /"
Benchmark 1 (84 runs): ./nix/bin/nix nar ls linux.nar /
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           714ms Â± 11.7ms                               699ms â€¦  741ms                                    0 ( 0%)        0%
  peak_rss            141MB Â±  127KB                               141MB â€¦  141MB                                    1 ( 1%)        0%
  cpu_cycles         1.54G  Â± 41.5M                               1.50G  â€¦ 1.64G                                     0 ( 0%)        0%
  instructions       2.61G  Â±  811K                               2.60G  â€¦ 2.61G                                     0 ( 0%)        0%
  cache_references   41.9M  Â± 2.60M                               37.8M  â€¦ 49.2M                                     2 ( 2%)        0%
  cache_misses       13.3M  Â± 86.8K                               13.1M  â€¦ 13.6M                                     5 ( 6%)        0%
  branch_misses      6.60M  Â± 1.02M                               5.73M  â€¦ 9.13M                                     2 ( 2%)        0%
Benchmark 2 (24 runs): ./lix/bin/nix nar ls linux.nar /
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          2.60s  Â± 12.7ms                              2.59s  â€¦ 2.64s                                     1 ( 4%)        ðŸ’©+264.6% Â±  0.8%
  peak_rss           3.75GB Â±  101KB                              3.75GB â€¦ 3.75GB                                    0 ( 0%)        ðŸ’©+2560.6% Â±  0.0%
  cpu_cycles         2.91G  Â± 26.3M                               2.89G  â€¦ 2.99G                                     1 ( 4%)        ðŸ’©+ 89.3% Â±  1.2%
  instructions       2.18G  Â± 9.72K                               2.18G  â€¦ 2.18G                                     1 ( 4%)        âš¡- 16.4% Â±  0.0%
  cache_references    131M  Â± 3.02M                                128M  â€¦  138M                                     0 ( 0%)        ðŸ’©+212.2% Â±  3.0%
  cache_misses       70.6M  Â±  122K                               70.4M  â€¦ 70.8M                                     0 ( 0%)        ðŸ’©+431.5% Â±  0.3%
  branch_misses      4.18M  Â±  572K                               3.76M  â€¦ 6.14M                                     1 ( 4%)        âš¡- 36.7% Â±  6.5%
Benchmark 3 (574 runs): ./narser/bin/narser ls linux.nar /
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           105ms Â±  915us                               104ms â€¦  112ms                                   52 ( 9%)        âš¡- 85.3% Â±  0.1%
  peak_rss           33.4MB Â± 10.9KB                              33.3MB â€¦ 33.4MB                                    4 ( 1%)        âš¡- 76.3% Â±  0.0%
  cpu_cycles         65.5M  Â±  717K                               64.7M  â€¦ 70.9M                                    48 ( 8%)        âš¡- 95.7% Â±  0.2%
  instructions        120M  Â± 5.33                                 120M  â€¦  120M                                     8 ( 1%)        âš¡- 95.4% Â±  0.0%
  cache_references   1.15M  Â± 33.8K                               1.07M  â€¦ 1.25M                                     5 ( 1%)        âš¡- 97.3% Â±  0.5%
  cache_misses       15.4K  Â± 1.41K                               11.6K  â€¦ 20.3K                                    53 ( 9%)        âš¡- 99.9% Â±  0.1%
  branch_misses       435K  Â± 5.69K                                429K  â€¦  480K                                    77 (13%)        âš¡- 93.4% Â±  1.3%
Benchmark 4 (114 runs): ./nix-nar/bin/nix-nar ls linux.nar /
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           526ms Â± 4.16ms                               521ms â€¦  547ms                                    2 ( 2%)        âš¡- 26.3% Â±  0.3%
  peak_rss           2.39MB Â± 63.8KB                              2.27MB â€¦ 2.56MB                                    0 ( 0%)        âš¡- 98.3% Â±  0.0%
  cpu_cycles          948M  Â± 10.4M                                935M  â€¦  996M                                     5 ( 4%)        âš¡- 38.3% Â±  0.5%
  instructions       1.52G  Â± 77.0K                               1.52G  â€¦ 1.52G                                     0 ( 0%)        âš¡- 41.9% Â±  0.0%
  cache_references   10.2M  Â± 4.07M                               4.50M  â€¦ 28.3M                                     5 ( 4%)        âš¡- 75.6% Â±  2.4%
  cache_misses       59.8K  Â± 8.32K                               46.4K  â€¦ 77.0K                                     0 ( 0%)        âš¡- 99.6% Â±  0.1%
  branch_misses      1.20M  Â±  183K                               1.00M  â€¦ 1.92M                                     5 ( 4%)        âš¡- 81.8% Â±  2.9%
Benchmark 5 (17 runs): ./narz/bin/narz ls linux.nar /
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          3.69s  Â± 10.2ms                              3.68s  â€¦ 3.72s                                     1 ( 6%)        ðŸ’©+416.8% Â±  0.8%
  peak_rss           1.85GB Â± 79.5KB                              1.85GB â€¦ 1.85GB                                    0 ( 0%)        ðŸ’©+1208.6% Â±  0.0%
  cpu_cycles          883M  Â± 2.62M                                877M  â€¦  888M                                     1 ( 6%)        âš¡- 42.6% Â±  1.3%
  instructions        869M  Â±  244                                 869M  â€¦  869M                                     0 ( 0%)        âš¡- 66.6% Â±  0.0%
  cache_references   4.77M  Â±  277K                               4.17M  â€¦ 5.15M                                     0 ( 0%)        âš¡- 88.6% Â±  3.0%
  cache_misses        121K  Â± 6.78K                                109K  â€¦  132K                                     0 ( 0%)        âš¡- 99.1% Â±  0.3%
  branch_misses      1.96M  Â± 37.4K                               1.87M  â€¦ 2.00M                                     0 ( 0%)        âš¡- 70.3% Â±  7.4%

poop -d 60000 "./nix/bin/nix nar ls linux.nar / -R" "./lix/bin/nix nar ls linux.nar / -R" "./narser/bin/narser ls linux.nar / -R" "./nix-nar/bin/nix-nar ls linux.nar / -R" "./narz/bin/narz ls linux.nar / -r"
Benchmark 1 (64 runs): ./nix/bin/nix nar ls linux.nar / -R
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           949ms Â± 19.3ms                               923ms â€¦  991ms                                    0 ( 0%)        0%
  peak_rss            141MB Â±  115KB                               141MB â€¦  141MB                                    0 ( 0%)        0%
  cpu_cycles         1.95G  Â± 61.5M                               1.88G  â€¦ 2.08G                                     0 ( 0%)        0%
  instructions       3.32G  Â± 1.15M                               3.31G  â€¦ 3.32G                                     0 ( 0%)        0%
  cache_references   51.5M  Â± 2.74M                               47.6M  â€¦ 63.7M                                     2 ( 3%)        0%
  cache_misses       15.8M  Â± 90.8K                               15.6M  â€¦ 16.0M                                     1 ( 2%)        0%
  branch_misses      9.33M  Â± 1.54M                               7.85M  â€¦ 12.2M                                     0 ( 0%)        0%
Benchmark 2 (21 runs): ./lix/bin/nix nar ls linux.nar / -R
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          2.87s  Â± 15.4ms                              2.84s  â€¦ 2.91s                                     2 (10%)        ðŸ’©+202.7% Â±  1.0%
  peak_rss           3.75GB Â±  133KB                              3.75GB â€¦ 3.75GB                                    3 (14%)        ðŸ’©+2560.6% Â±  0.0%
  cpu_cycles         3.39G  Â± 33.5M                               3.34G  â€¦ 3.47G                                     0 ( 0%)        ðŸ’©+ 74.5% Â±  1.4%
  instructions       3.03G  Â±  792K                               3.03G  â€¦ 3.03G                                     0 ( 0%)        âš¡-  8.6% Â±  0.0%
  cache_references    133M  Â± 2.24M                                129M  â€¦  138M                                     0 ( 0%)        ðŸ’©+157.7% Â±  2.6%
  cache_misses       71.4M  Â±  214K                               71.1M  â€¦ 71.9M                                     1 ( 5%)        ðŸ’©+352.9% Â±  0.4%
  branch_misses      6.22M  Â±  737K                               5.33M  â€¦ 7.91M                                     0 ( 0%)        âš¡- 33.3% Â±  7.4%
Benchmark 3 (469 runs): ./narser/bin/narser ls linux.nar / -R
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           128ms Â± 2.62ms                               125ms â€¦  148ms                                   23 ( 5%)        âš¡- 86.5% Â±  0.2%
  peak_rss           33.4MB Â± 19.9KB                              33.3MB â€¦ 33.4MB                                   11 ( 2%)        âš¡- 76.3% Â±  0.0%
  cpu_cycles          143M  Â± 4.78M                                138M  â€¦  190M                                    76 (16%)        âš¡- 92.7% Â±  0.3%
  instructions        294M  Â± 9.19                                 294M  â€¦  294M                                    25 ( 5%)        âš¡- 91.1% Â±  0.0%
  cache_references   2.23M  Â± 46.8K                               2.07M  â€¦ 2.35M                                    26 ( 6%)        âš¡- 95.7% Â±  0.5%
  cache_misses        897K  Â± 24.6K                                794K  â€¦  963K                                    38 ( 8%)        âš¡- 94.3% Â±  0.1%
  branch_misses       593K  Â± 9.93K                                585K  â€¦  642K                                    69 (15%)        âš¡- 93.6% Â±  1.5%
Benchmark 4 (93 runs): ./nix-nar/bin/nix-nar ls linux.nar / -R
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           649ms Â± 5.84ms                               641ms â€¦  673ms                                    6 ( 6%)        âš¡- 31.6% Â±  0.4%
  peak_rss           14.0MB Â± 77.1KB                              13.8MB â€¦ 14.2MB                                    0 ( 0%)        âš¡- 90.1% Â±  0.0%
  cpu_cycles         1.14G  Â± 15.3M                               1.12G  â€¦ 1.22G                                     4 ( 4%)        âš¡- 41.3% Â±  0.7%
  instructions       1.96G  Â± 75.7K                               1.96G  â€¦ 1.96G                                     0 ( 0%)        âš¡- 40.8% Â±  0.0%
  cache_references   14.8M  Â± 4.08M                               9.53M  â€¦ 30.3M                                     4 ( 4%)        âš¡- 71.3% Â±  2.2%
  cache_misses        187K  Â± 9.78K                                166K  â€¦  209K                                     0 ( 0%)        âš¡- 98.8% Â±  0.1%
  branch_misses      1.81M  Â±  245K                               1.43M  â€¦ 2.66M                                     2 ( 2%)        âš¡- 80.7% Â±  3.4%
Benchmark 5 (16 runs): ./narz/bin/narz ls linux.nar / -r
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          3.88s  Â± 11.3ms                              3.86s  â€¦ 3.90s                                     0 ( 0%)        ðŸ’©+308.5% Â±  1.1%
  peak_rss           1.85GB Â± 64.8KB                              1.85GB â€¦ 1.85GB                                    0 ( 0%)        ðŸ’©+1209.0% Â±  0.0%
  cpu_cycles          971M  Â± 2.03M                                968M  â€¦  974M                                     0 ( 0%)        âš¡- 50.1% Â±  1.6%
  instructions        951M  Â±  267                                 951M  â€¦  951M                                     0 ( 0%)        âš¡- 71.3% Â±  0.0%
  cache_references   5.68M  Â±  110K                               5.52M  â€¦ 5.88M                                     0 ( 0%)        âš¡- 89.0% Â±  2.7%
  cache_misses        869K  Â± 3.60K                                861K  â€¦  876K                                     0 ( 0%)        âš¡- 94.5% Â±  0.3%
  branch_misses      2.29M  Â± 46.2K                               2.22M  â€¦ 2.35M                                     0 ( 0%)        âš¡- 75.5% Â±  8.2%

poop -d 60000 "./nix/bin/nix nar ls linux.nar / -Rl" "./lix/bin/nix nar ls linux.nar / -Rl" "./narser/bin/narser ls linux.nar / -Rl" "./nix-nar/bin/nix-nar ls linux.nar / -Rl" "./narz/bin/narz ls linux.nar / -rl"
Benchmark 1 (59 runs): ./nix/bin/nix nar ls linux.nar / -Rl
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          1.03s  Â± 18.9ms                              1.01s  â€¦ 1.08s                                     6 (10%)        0%
  peak_rss            141MB Â±  131KB                               141MB â€¦  141MB                                    0 ( 0%)        0%
  cpu_cycles         2.23G  Â± 65.2M                               2.17G  â€¦ 2.39G                                    11 (19%)        0%
  instructions       4.01G  Â± 1.10M                               4.01G  â€¦ 4.01G                                     0 ( 0%)        0%
  cache_references   53.0M  Â± 2.54M                               48.9M  â€¦ 61.6M                                     1 ( 2%)        0%
  cache_misses       16.0M  Â± 99.0K                               15.7M  â€¦ 16.2M                                     0 ( 0%)        0%
  branch_misses      9.56M  Â± 1.53M                               8.46M  â€¦ 13.3M                                    11 (19%)        0%
Benchmark 2 (21 runs): ./lix/bin/nix nar ls linux.nar / -Rl
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          2.98s  Â± 22.1ms                              2.95s  â€¦ 3.03s                                     0 ( 0%)        ðŸ’©+189.4% Â±  1.0%
  peak_rss           3.75GB Â±  128KB                              3.75GB â€¦ 3.75GB                                    0 ( 0%)        ðŸ’©+2560.8% Â±  0.0%
  cpu_cycles         3.79G  Â± 53.9M                               3.74G  â€¦ 3.91G                                     2 (10%)        ðŸ’©+ 70.0% Â±  1.4%
  instructions       3.92G  Â±  993K                               3.92G  â€¦ 3.92G                                     0 ( 0%)        âš¡-  2.3% Â±  0.0%
  cache_references    134M  Â± 3.19M                                130M  â€¦  143M                                     1 ( 5%)        ðŸ’©+152.6% Â±  2.6%
  cache_misses       71.5M  Â±  178K                               71.2M  â€¦ 72.0M                                     1 ( 5%)        ðŸ’©+348.0% Â±  0.4%
  branch_misses      6.84M  Â± 1.09M                               6.04M  â€¦ 9.25M                                     2 (10%)        âš¡- 28.5% Â±  7.6%
Benchmark 3 (461 runs): ./narser/bin/narser ls linux.nar / -Rl
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           130ms Â± 2.00ms                               129ms â€¦  140ms                                   63 (14%)        âš¡- 87.3% Â±  0.2%
  peak_rss           33.4MB Â± 13.6KB                              33.3MB â€¦ 33.4MB                                    5 ( 1%)        âš¡- 76.3% Â±  0.0%
  cpu_cycles          153M  Â± 3.74M                                150M  â€¦  169M                                    74 (16%)        âš¡- 93.1% Â±  0.3%
  instructions        334M  Â± 10.1                                 334M  â€¦  334M                                    18 ( 4%)        âš¡- 91.7% Â±  0.0%
  cache_references   2.36M  Â± 45.9K                               2.16M  â€¦ 2.46M                                    28 ( 6%)        âš¡- 95.6% Â±  0.4%
  cache_misses        925K  Â± 29.9K                                791K  â€¦  997K                                    55 (12%)        âš¡- 94.2% Â±  0.1%
  branch_misses       633K  Â± 6.51K                                627K  â€¦  689K                                    54 (12%)        âš¡- 93.4% Â±  1.5%
Benchmark 4 (89 runs): ./nix-nar/bin/nix-nar ls linux.nar / -Rl
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           680ms Â± 10.6ms                               670ms â€¦  771ms                                    1 ( 1%)        âš¡- 34.0% Â±  0.5%
  peak_rss           14.0MB Â± 77.2KB                              13.8MB â€¦ 14.2MB                                    0 ( 0%)        âš¡- 90.1% Â±  0.0%
  cpu_cycles         1.25G  Â± 32.6M                               1.23G  â€¦ 1.53G                                     1 ( 1%)        âš¡- 44.0% Â±  0.7%
  instructions       2.23G  Â±  783K                               2.23G  â€¦ 2.23G                                     2 ( 2%)        âš¡- 44.5% Â±  0.0%
  cache_references   14.5M  Â± 3.72M                               8.52M  â€¦ 29.8M                                     6 ( 7%)        âš¡- 72.7% Â±  2.1%
  cache_misses        307K  Â± 11.5K                                288K  â€¦  371K                                     1 ( 1%)        âš¡- 98.1% Â±  0.1%
  branch_misses      2.12M  Â±  809K                               1.67M  â€¦ 9.30M                                     1 ( 1%)        âš¡- 77.8% Â±  4.0%
Benchmark 5 (12 runs): ./narz/bin/narz ls linux.nar / -rl
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          5.09s  Â± 16.7ms                              5.06s  â€¦ 5.12s                                     0 ( 0%)        ðŸ’©+394.7% Â±  1.1%
  peak_rss           1.85GB Â± 58.8KB                              1.85GB â€¦ 1.85GB                                    0 ( 0%)        ðŸ’©+1209.2% Â±  0.1%
  cpu_cycles         1.15G  Â± 8.24M                               1.14G  â€¦ 1.17G                                     0 ( 0%)        âš¡- 48.3% Â±  1.7%
  instructions       1.12G  Â±  306                                1.12G  â€¦ 1.12G                                     0 ( 0%)        âš¡- 72.1% Â±  0.0%
  cache_references   5.81M  Â± 88.6K                               5.70M  â€¦ 5.98M                                     0 ( 0%)        âš¡- 89.0% Â±  2.8%
  cache_misses        868K  Â± 5.19K                                858K  â€¦  875K                                     0 ( 0%)        âš¡- 94.6% Â±  0.4%
  branch_misses      2.78M  Â±  274K                               2.53M  â€¦ 3.50M                                     1 ( 8%)        âš¡- 70.9% Â±  9.3%

poop -d 60000 "./nix/bin/nix nar ls linux.nar / -l" "./lix/bin/nix nar ls linux.nar / -l" "./narser/bin/narser ls linux.nar / -l" "./nix-nar/bin/nix-nar ls linux.nar / -l" "./narz/bin/narz ls linux.nar / -l"
Benchmark 1 (84 runs): ./nix/bin/nix nar ls linux.nar / -l
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           718ms Â± 11.7ms                               701ms â€¦  741ms                                    0 ( 0%)        0%
  peak_rss            141MB Â±  130KB                               141MB â€¦  141MB                                    3 ( 4%)        0%
  cpu_cycles         1.55G  Â± 40.0M                               1.50G  â€¦ 1.62G                                     0 ( 0%)        0%
  instructions       2.61G  Â±  943K                               2.60G  â€¦ 2.61G                                     0 ( 0%)        0%
  cache_references   41.9M  Â± 2.43M                               37.8M  â€¦ 48.8M                                     0 ( 0%)        0%
  cache_misses       13.3M  Â± 72.2K                               13.2M  â€¦ 13.5M                                     1 ( 1%)        0%
  branch_misses      6.86M  Â± 1.01M                               5.72M  â€¦ 8.47M                                     0 ( 0%)        0%
Benchmark 2 (23 runs): ./lix/bin/nix nar ls linux.nar / -l
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          2.61s  Â± 11.9ms                              2.59s  â€¦ 2.64s                                     0 ( 0%)        ðŸ’©+263.6% Â±  0.8%
  peak_rss           3.75GB Â±  142KB                              3.75GB â€¦ 3.75GB                                    0 ( 0%)        ðŸ’©+2560.7% Â±  0.0%
  cpu_cycles         2.92G  Â± 24.3M                               2.89G  â€¦ 2.97G                                     0 ( 0%)        ðŸ’©+ 88.5% Â±  1.1%
  instructions       2.18G  Â± 8.33K                               2.18G  â€¦ 2.18G                                     0 ( 0%)        âš¡- 16.4% Â±  0.0%
  cache_references    130M  Â± 1.73M                                128M  â€¦  134M                                     2 ( 9%)        ðŸ’©+209.5% Â±  2.6%
  cache_misses       70.6M  Â±  208K                               70.3M  â€¦ 71.1M                                     2 ( 9%)        ðŸ’©+430.6% Â±  0.4%
  branch_misses      4.32M  Â±  539K                               3.78M  â€¦ 5.37M                                     0 ( 0%)        âš¡- 36.9% Â±  6.3%
Benchmark 3 (573 runs): ./narser/bin/narser ls linux.nar / -l
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           105ms Â± 1.04ms                               104ms â€¦  111ms                                   31 ( 5%)        âš¡- 85.4% Â±  0.1%
  peak_rss           33.4MB Â± 12.2KB                              33.3MB â€¦ 33.4MB                                    5 ( 1%)        âš¡- 76.3% Â±  0.0%
  cpu_cycles         65.6M  Â±  745K                               64.8M  â€¦ 69.9M                                    34 ( 6%)        âš¡- 95.8% Â±  0.2%
  instructions        120M  Â± 5.52                                 120M  â€¦  120M                                    10 ( 2%)        âš¡- 95.4% Â±  0.0%
  cache_references   1.15M  Â± 32.2K                               1.07M  â€¦ 1.25M                                     9 ( 2%)        âš¡- 97.3% Â±  0.5%
  cache_misses       15.7K  Â± 1.75K                               12.1K  â€¦ 23.1K                                    69 (12%)        âš¡- 99.9% Â±  0.0%
  branch_misses       436K  Â± 5.79K                                430K  â€¦  476K                                    72 (13%)        âš¡- 93.6% Â±  1.2%
Benchmark 4 (115 runs): ./nix-nar/bin/nix-nar ls linux.nar / -l
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           524ms Â± 2.71ms                               520ms â€¦  537ms                                    6 ( 5%)        âš¡- 27.1% Â±  0.3%
  peak_rss           2.40MB Â± 60.3KB                              2.28MB â€¦ 2.55MB                                    0 ( 0%)        âš¡- 98.3% Â±  0.0%
  cpu_cycles          944M  Â± 8.65M                                933M  â€¦  990M                                     6 ( 5%)        âš¡- 39.0% Â±  0.5%
  instructions       1.52G  Â± 79.9K                               1.52G  â€¦ 1.52G                                     0 ( 0%)        âš¡- 41.9% Â±  0.0%
  cache_references   10.1M  Â± 3.03M                               6.07M  â€¦ 21.4M                                     5 ( 4%)        âš¡- 76.0% Â±  1.9%
  cache_misses       63.3K  Â± 9.88K                               46.5K  â€¦  107K                                     1 ( 1%)        âš¡- 99.5% Â±  0.1%
  branch_misses      1.11M  Â±  114K                                975K  â€¦ 1.71M                                     6 ( 5%)        âš¡- 83.8% Â±  2.7%
Benchmark 5 (17 runs): ./narz/bin/narz ls linux.nar / -l
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          3.66s  Â± 3.25ms                              3.66s  â€¦ 3.67s                                     0 ( 0%)        ðŸ’©+410.2% Â±  0.8%
  peak_rss           1.85GB Â± 31.8KB                              1.85GB â€¦ 1.85GB                                    1 ( 6%)        ðŸ’©+1208.7% Â±  0.0%
  cpu_cycles          879M  Â± 2.64M                                874M  â€¦  884M                                     0 ( 0%)        âš¡- 43.2% Â±  1.3%
  instructions        869M  Â±  326                                 869M  â€¦  869M                                     0 ( 0%)        âš¡- 66.6% Â±  0.0%
  cache_references   4.57M  Â±  169K                               4.19M  â€¦ 4.80M                                     0 ( 0%)        âš¡- 89.1% Â±  2.8%
  cache_misses        118K  Â± 4.53K                                112K  â€¦  127K                                     0 ( 0%)        âš¡- 99.1% Â±  0.3%
  branch_misses      1.92M  Â± 48.8K                               1.84M  â€¦ 1.99M                                     0 ( 0%)        âš¡- 72.1% Â±  7.1%

poop -d 60000 "./nix/bin/nix nar cat linux.nar /README" "./lix/bin/nix nar cat linux.nar /README" "./narser/bin/narser cat linux.nar /README" "./narser/bin/narser cat linux.nar /README -L" "./nix-nar/bin/nix-nar cat linux.nar /README " "./narz/bin/narz cat linux.nar /README"
Benchmark 1 (87 runs): ./nix/bin/nix nar cat linux.nar /README
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           693ms Â± 14.4ms                               678ms â€¦  778ms                                    1 ( 1%)        0%
  peak_rss            122MB Â±  150KB                               122MB â€¦  122MB                                    0 ( 0%)        0%
  cpu_cycles         1.49G  Â± 48.1M                               1.45G  â€¦ 1.77G                                     1 ( 1%)        0%
  instructions       2.53G  Â±  854K                               2.53G  â€¦ 2.54G                                     1 ( 1%)        0%
  cache_references   40.2M  Â± 2.23M                               36.8M  â€¦ 48.0M                                     3 ( 3%)        0%
  cache_misses       12.0M  Â± 85.0K                               11.9M  â€¦ 12.4M                                     2 ( 2%)        0%
  branch_misses      6.61M  Â± 1.17M                               5.56M  â€¦ 13.5M                                     1 ( 1%)        0%
Benchmark 2 (23 runs): ./lix/bin/nix nar cat linux.nar /README
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          2.62s  Â± 7.78ms                              2.60s  â€¦ 2.63s                                     0 ( 0%)        ðŸ’©+277.4% Â±  0.9%
  peak_rss           3.75GB Â±  106KB                              3.75GB â€¦ 3.75GB                                    0 ( 0%)        ðŸ’©+2975.6% Â±  0.1%
  cpu_cycles         2.92G  Â± 14.5M                               2.89G  â€¦ 2.94G                                     0 ( 0%)        ðŸ’©+ 95.2% Â±  1.4%
  instructions       2.19G  Â± 7.89K                               2.19G  â€¦ 2.19G                                     0 ( 0%)        âš¡- 13.6% Â±  0.0%
  cache_references    130M  Â± 2.05M                                128M  â€¦  135M                                     0 ( 0%)        ðŸ’©+222.7% Â±  2.5%
  cache_misses       70.6M  Â±  194K                               70.3M  â€¦ 70.9M                                     0 ( 0%)        ðŸ’©+486.8% Â±  0.4%
  branch_misses      4.26M  Â±  320K                               3.72M  â€¦ 4.69M                                     0 ( 0%)        âš¡- 35.6% Â±  7.4%
Benchmark 3 (7043 runs): ./narser/bin/narser cat linux.nar /README
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          8.48ms Â±  368us                              8.31ms â€¦ 16.5ms                                  460 ( 7%)        âš¡- 98.8% Â±  0.0%
  peak_rss           1.05MB Â±  818                                 983KB â€¦ 1.05MB                                    2 ( 0%)        âš¡- 99.1% Â±  0.0%
  cpu_cycles         5.67M  Â±  213K                               5.57M  â€¦ 8.24M                                   483 ( 7%)        âš¡- 99.6% Â±  0.1%
  instructions       10.6M  Â± 3.00                                10.6M  â€¦ 10.6M                                    86 ( 1%)        âš¡- 99.6% Â±  0.0%
  cache_references   21.3K  Â± 1.99K                               15.4K  â€¦ 43.5K                                   475 ( 7%)        âš¡- 99.9% Â±  0.1%
  cache_misses       1.11K  Â±  285                                 737   â€¦ 6.71K                                   286 ( 4%)        âš¡-100.0% Â±  0.0%
  branch_misses      56.1K  Â± 1.87K                               54.7K  â€¦ 79.0K                                   426 ( 6%)        âš¡- 99.2% Â±  0.4%
Benchmark 4 (50 runs): ./narser/bin/narser cat linux.nar /README -L
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          1.21s  Â± 5.33ms                              1.19s  â€¦ 1.22s                                     2 ( 4%)        ðŸ’©+ 74.4% Â±  0.6%
  peak_rss           1.94GB Â± 54.8KB                              1.94GB â€¦ 1.94GB                                   11 (22%)        ðŸ’©+1493.5% Â±  0.0%
  cpu_cycles          522M  Â± 1.54M                                519M  â€¦  526M                                     1 ( 2%)        âš¡- 65.1% Â±  0.9%
  instructions        509M  Â± 12.4                                 509M  â€¦  509M                                     0 ( 0%)        âš¡- 79.9% Â±  0.0%
  cache_references   19.0M  Â±  530K                               18.1M  â€¦ 20.6M                                     0 ( 0%)        âš¡- 52.8% Â±  1.6%
  cache_misses       2.01M  Â± 16.4K                               1.94M  â€¦ 2.05M                                     2 ( 4%)        âš¡- 83.3% Â±  0.2%
  branch_misses       935K  Â± 4.88K                                923K  â€¦  950K                                     0 ( 0%)        âš¡- 85.8% Â±  4.9%
Benchmark 5 (761 runs): ./nix-nar/bin/nix-nar cat linux.nar /README
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          78.9ms Â± 1.44ms                              77.6ms â€¦ 90.4ms                                   80 (11%)        âš¡- 88.6% Â±  0.2%
  peak_rss           2.40MB Â± 60.9KB                              2.28MB â€¦ 2.56MB                                    0 ( 0%)        âš¡- 98.0% Â±  0.0%
  cpu_cycles          115M  Â± 2.63M                                113M  â€¦  137M                                    72 ( 9%)        âš¡- 92.3% Â±  0.2%
  instructions        166M  Â± 10.1K                                166M  â€¦  166M                                     0 ( 0%)        âš¡- 93.5% Â±  0.0%
  cache_references   1.48M  Â±  453K                                609K  â€¦ 3.66M                                     7 ( 1%)        âš¡- 96.3% Â±  0.5%
  cache_misses       22.2K  Â± 2.48K                               19.6K  â€¦ 44.9K                                    71 ( 9%)        âš¡- 99.8% Â±  0.1%
  branch_misses       126K  Â± 54.3K                                106K  â€¦  618K                                    66 ( 9%)        âš¡- 98.1% Â±  1.3%
Benchmark 6 (17 runs): ./narz/bin/narz cat linux.nar /README
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          3.71s  Â± 25.2ms                              3.68s  â€¦ 3.79s                                     2 (12%)        ðŸ’©+434.6% Â±  1.3%
  peak_rss           1.85GB Â± 31.8KB                              1.85GB â€¦ 1.85GB                                    1 ( 6%)        ðŸ’©+1412.4% Â±  0.1%
  cpu_cycles          886M  Â± 9.12M                                877M  â€¦  914M                                     1 ( 6%)        âš¡- 40.7% Â±  1.6%
  instructions        870M  Â± 9.19K                                869M  â€¦  870M                                     0 ( 0%)        âš¡- 65.7% Â±  0.0%
  cache_references   4.60M  Â±  350K                               3.77M  â€¦ 5.12M                                     4 (24%)        âš¡- 88.6% Â±  2.7%
  cache_misses        122K  Â± 12.2K                                108K  â€¦  161K                                     1 ( 6%)        âš¡- 99.0% Â±  0.3%
  branch_misses      2.04M  Â±  153K                               1.90M  â€¦ 2.42M                                     2 (12%)        âš¡- 69.2% Â±  8.5%

poop -d 60000 "./nix/bin/nix nar cat linux.nar /virt/lib/irqbypass.c" "./lix/bin/nix nar cat linux.nar /virt/lib/irqbypass.c" "./narser/bin/narser cat linux.nar /virt/lib/irqbypass.c" "./narser/bin/narser cat linux.nar /virt/lib/irqbypass.c -L" "./nix-nar/bin/nix-nar cat linux.nar /virt/lib/irqbypass.c " "./narz/bin/narz cat linux.nar /virt/lib/irqbypass.c"
Benchmark 1 (87 runs): ./nix/bin/nix nar cat linux.nar /virt/lib/irqbypass.c
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           691ms Â± 10.9ms                               677ms â€¦  718ms                                    0 ( 0%)        0%
  peak_rss            122MB Â±  151KB                               122MB â€¦  122MB                                    0 ( 0%)        0%
  cpu_cycles         1.49G  Â± 36.6M                               1.45G  â€¦ 1.58G                                     0 ( 0%)        0%
  instructions       2.53G  Â±  925K                               2.53G  â€¦ 2.54G                                     2 ( 2%)        0%
  cache_references   40.8M  Â± 3.54M                               36.4M  â€¦ 56.4M                                     6 ( 7%)        0%
  cache_misses       12.0M  Â± 82.7K                               11.9M  â€¦ 12.3M                                     2 ( 2%)        0%
  branch_misses      6.45M  Â±  915K                               5.54M  â€¦ 8.73M                                     0 ( 0%)        0%
Benchmark 2 (23 runs): ./lix/bin/nix nar cat linux.nar /virt/lib/irqbypass.c
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          2.62s  Â± 13.9ms                              2.60s  â€¦ 2.66s                                     0 ( 0%)        ðŸ’©+279.3% Â±  0.8%
  peak_rss           3.75GB Â±  129KB                              3.75GB â€¦ 3.75GB                                    0 ( 0%)        ðŸ’©+2976.5% Â±  0.1%
  cpu_cycles         2.94G  Â± 19.5M                               2.91G  â€¦ 2.97G                                     0 ( 0%)        ðŸ’©+ 97.4% Â±  1.1%
  instructions       2.21G  Â± 8.46K                               2.21G  â€¦ 2.21G                                     0 ( 0%)        âš¡- 12.8% Â±  0.0%
  cache_references    132M  Â± 3.05M                                129M  â€¦  139M                                     0 ( 0%)        ðŸ’©+223.1% Â±  3.9%
  cache_misses       71.6M  Â±  218K                               71.2M  â€¦ 72.0M                                     0 ( 0%)        ðŸ’©+494.2% Â±  0.5%
  branch_misses      4.24M  Â±  372K                               3.82M  â€¦ 4.90M                                     0 ( 0%)        âš¡- 34.3% Â±  6.0%
Benchmark 3 (719 runs): ./narser/bin/narser cat linux.nar /virt/lib/irqbypass.c
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          83.5ms Â±  817us                              82.9ms â€¦ 89.2ms                                   95 (13%)        âš¡- 87.9% Â±  0.1%
  peak_rss           1.05MB Â±    0                                1.05MB â€¦ 1.05MB                                    0 ( 0%)        âš¡- 99.1% Â±  0.0%
  cpu_cycles         46.7M  Â±  644K                               46.1M  â€¦ 50.4M                                    87 (12%)        âš¡- 96.9% Â±  0.2%
  instructions       91.0M  Â± 4.69                                91.0M  â€¦ 91.0M                                     8 ( 1%)        âš¡- 96.4% Â±  0.0%
  cache_references    118K  Â± 12.6K                               61.8K  â€¦  154K                                    29 ( 4%)        âš¡- 99.7% Â±  0.6%
  cache_misses       4.59K  Â± 1.20K                               3.28K  â€¦ 11.4K                                    66 ( 9%)        âš¡-100.0% Â±  0.0%
  branch_misses       422K  Â± 6.41K                                416K  â€¦  473K                                   105 (15%)        âš¡- 93.5% Â±  1.0%
Benchmark 4 (50 runs): ./narser/bin/narser cat linux.nar /virt/lib/irqbypass.c -L
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          1.21s  Â± 5.34ms                              1.20s  â€¦ 1.23s                                     1 ( 2%)        ðŸ’©+ 75.0% Â±  0.5%
  peak_rss           1.94GB Â± 71.1KB                              1.94GB â€¦ 1.94GB                                    0 ( 0%)        ðŸ’©+1493.9% Â±  0.0%
  cpu_cycles          522M  Â± 1.78M                                519M  â€¦  528M                                     2 ( 4%)        âš¡- 64.9% Â±  0.7%
  instructions        509M  Â± 16.3                                 509M  â€¦  509M                                     1 ( 2%)        âš¡- 79.9% Â±  0.0%
  cache_references   18.8M  Â±  489K                               17.8M  â€¦ 19.7M                                     0 ( 0%)        âš¡- 53.9% Â±  2.4%
  cache_misses       2.02M  Â± 20.7K                               1.93M  â€¦ 2.05M                                     2 ( 4%)        âš¡- 83.2% Â±  0.2%
  branch_misses       940K  Â± 9.05K                                922K  â€¦  959K                                     0 ( 0%)        âš¡- 85.4% Â±  3.9%
Benchmark 5 (118 runs): ./nix-nar/bin/nix-nar cat linux.nar /virt/lib/irqbypass.c
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           510ms Â± 5.26ms                               504ms â€¦  550ms                                    2 ( 2%)        âš¡- 26.2% Â±  0.3%
  peak_rss           2.39MB Â± 62.5KB                              2.29MB â€¦ 2.55MB                                    0 ( 0%)        âš¡- 98.0% Â±  0.0%
  cpu_cycles          894M  Â± 14.1M                                881M  â€¦ 1.02G                                     3 ( 3%)        âš¡- 39.9% Â±  0.5%
  instructions       1.38G  Â± 79.3K                               1.38G  â€¦ 1.38G                                     0 ( 0%)        âš¡- 45.4% Â±  0.0%
  cache_references   7.80M  Â± 2.77M                               3.90M  â€¦ 19.4M                                     5 ( 4%)        âš¡- 80.9% Â±  2.1%
  cache_misses       48.8K  Â± 7.33K                               37.1K  â€¦ 63.3K                                     0 ( 0%)        âš¡- 99.6% Â±  0.1%
  branch_misses      1.11M  Â±  339K                                879K  â€¦ 4.32M                                     6 ( 5%)        âš¡- 82.9% Â±  2.8%
Benchmark 6 (17 runs): ./narz/bin/narz cat linux.nar /virt/lib/irqbypass.c
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          3.70s  Â± 15.4ms                              3.67s  â€¦ 3.72s                                     0 ( 0%)        ðŸ’©+435.2% Â±  0.9%
  peak_rss           1.85GB Â± 64.6KB                              1.85GB â€¦ 1.85GB                                    0 ( 0%)        ðŸ’©+1412.8% Â±  0.1%
  cpu_cycles          884M  Â± 5.49M                                877M  â€¦  895M                                     0 ( 0%)        âš¡- 40.6% Â±  1.2%
  instructions        870M  Â± 8.89K                                869M  â€¦  870M                                     0 ( 0%)        âš¡- 65.7% Â±  0.0%
  cache_references   4.74M  Â±  385K                               3.91M  â€¦ 5.46M                                     0 ( 0%)        âš¡- 88.4% Â±  4.2%
  cache_misses        122K  Â± 6.06K                                114K  â€¦  132K                                     0 ( 0%)        âš¡- 99.0% Â±  0.3%
  branch_misses      1.98M  Â±  111K                               1.83M  â€¦ 2.23M                                     0 ( 0%)        âš¡- 69.3% Â±  6.9%

./nix/bin/nix-store --restore out < linux.nar
cmp <(./nix/bin/nix nar pack out) linux.nar
rm -rf out

./lix/bin/nix-store --restore out < linux.nar
cmp <(./nix/bin/nix nar pack out) linux.nar
rm -rf out

./narser/bin/narser unpack linux.nar out
cmp <(./nix/bin/nix nar pack out) linux.nar || exit 1
rm -rf out

rm -rf out ; time ./nix/bin/nix-store --restore out < linux.nar

real	0m1.484s
user	0m0.317s
sys	0m1.162s
rm -rf out ; time ./nix/bin/nix-store --restore out < linux.nar

real	0m1.468s
user	0m0.318s
sys	0m1.144s
rm -rf out ; time ./nix/bin/nix-store --restore out < linux.nar

real	0m1.500s
user	0m0.323s
sys	0m1.162s

rm -rf out ; time ./lix/bin/nix-store --restore out < linux.nar

real	0m1.702s
user	0m0.513s
sys	0m1.182s
rm -rf out ; time ./lix/bin/nix-store --restore out < linux.nar

real	0m1.678s
user	0m0.486s
sys	0m1.185s
rm -rf out ; time ./lix/bin/nix-store --restore out < linux.nar

real	0m1.686s
user	0m0.479s
sys	0m1.200s

rm -rf out ; time ./narser/bin/narser unpack linux.nar out

real	0m1.366s
user	0m0.235s
sys	0m1.124s
rm -rf out ; time ./narser/bin/narser unpack linux.nar out

real	0m1.362s
user	0m0.210s
sys	0m1.146s
rm -rf out ; time ./narser/bin/narser unpack linux.nar out

real	0m1.354s
user	0m0.258s
sys	0m1.088s
