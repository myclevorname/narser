
echo $1
/tmp/clevor/tests

mkdir $1 || exit 1
cd $1

nix build git+https://git.lix.systems/lix-project/lix?rev=f4bdddf0fdaabc68546cf561c5343b83d95d2466 -o lix
nix build github:NixOS/nix/1935c19705159f3a97e6f0ea98487ecc55b4a0b9 -o nix
nix build github:water-sucks/narz/760736b98e08c7c741838f5ad020d6d2e33b5e57 -o narz
nix build github:myclevorname/narser/016256f814384028362973c210433816c508e413 -o narser

git clone https://github.com/torvalds/linux --depth=1 -q
cd linux
git log | head
commit e6b9dce0aeeb91dfc0974ab87f02454e24566182
Author: Linus Torvalds <torvalds@linux-foundation.org>
Date:   Tue Sep 2 13:38:07 2025 -0700

    Merge tag 'sound-6.17-rc5' of git://git.kernel.org/pub/scm/linux/kernel/git/tiwai/sound
    
    Pull sound fixes from Takashi Iwai:
     "A collection of small changes including a few regression fixes:
    
       - Regression fix for Intel SKL/KBL HD-audio bindings
cd ..

nix nar pack linux > linux.nar

cmp <(./nix/bin/nix nar pack linux) <(./lix/bin/nix nar dump-path linux)
cmp <(./nix/bin/nix nar pack linux) <(./narser/bin/narser pack linux)

cmp <(./nix/bin/nix nar cat linux.nar /README) <(./lix/bin/nix nar cat linux.nar /README)
cmp <(./nix/bin/nix nar cat linux.nar /README) <(./narser/bin/narser cat linux.nar /README)
cmp <(./nix/bin/nix nar cat linux.nar /README) <(./narz/bin/narz cat linux.nar /README)

cmp <(./nix/bin/nix nar ls linux.nar /) <(./lix/bin/nix nar ls linux.nar /)
cmp <(./nix/bin/nix nar ls linux.nar /) <(./narser/bin/narser ls linux.nar /)
cmp <(./nix/bin/nix nar ls linux.nar /) <(./narz/bin/narz ls linux.nar / 2> /dev/null)
/dev/fd/63 /dev/fd/62 differ: byte 1, line 1

cmp <(./nix/bin/nix nar ls linux.nar / -l) <(./lix/bin/nix nar ls linux.nar / -l)
cmp <(./nix/bin/nix nar ls linux.nar / -l) <(./narser/bin/narser ls linux.nar / -l)
cmp <(./nix/bin/nix nar ls linux.nar / -l) <(./narz/bin/narz ls linux.nar / -l 2> /dev/null)
/dev/fd/63 /dev/fd/62 differ: byte 1, line 1

cmp <(./nix/bin/nix nar ls linux.nar / -lR) <(./lix/bin/nix nar ls linux.nar / -lR)
cmp <(./nix/bin/nix nar ls linux.nar / -lR) <(./narser/bin/narser ls linux.nar / -lR)
cmp <(./nix/bin/nix nar ls linux.nar / -lR) <(./narz/bin/narz ls linux.nar / -lr 2> /dev/null)
/dev/fd/63 /dev/fd/62 differ: byte 3, line 1

cmp <(./nix/bin/nix nar ls linux.nar / -R) <(./lix/bin/nix nar ls linux.nar / -R)
error: writing to file: Broken pipe
cmp <(./nix/bin/nix nar ls linux.nar / -R) <(./narser/bin/narser ls linux.nar / -R)
cmp <(./nix/bin/nix nar ls linux.nar / -R) <(./narz/bin/narz ls linux.nar / -r 2> /dev/null)
/dev/fd/63 /dev/fd/62 differ: byte 2, line 1

poop "./nix/bin/nix nar pack linux" "./lix/bin/nix nar dump-path linux" "./narser/bin/narser pack linux"
error: writing to file: Broken pipe
Benchmark 1 (3 runs): ./nix/bin/nix nar pack linux
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          1.95s  Â± 18.7ms                              1.93s  â€¦ 1.97s                                     0 ( 0%)        0%
  peak_rss           41.1MB Â±  378KB                              40.8MB â€¦ 41.5MB                                    0 ( 0%)        0%
  cpu_cycles         3.52G  Â± 55.1M                               3.46G  â€¦ 3.57G                                     0 ( 0%)        0%
  instructions       7.39G  Â±  295K                               7.39G  â€¦ 7.39G                                     0 ( 0%)        0%
  cache_references   59.6M  Â± 2.95M                               56.4M  â€¦ 62.2M                                     0 ( 0%)        0%
  cache_misses       4.65M  Â±  241K                               4.46M  â€¦ 4.92M                                     0 ( 0%)        0%
  branch_misses      10.9M  Â± 1.28M                               9.43M  â€¦ 11.9M                                     0 ( 0%)        0%
Benchmark 2 (5 runs): ./lix/bin/nix nar dump-path linux
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          1.27s  Â±  198ms                              1.17s  â€¦ 1.62s                                     0 ( 0%)        âš¡- 34.8% Â± 14.8%
  peak_rss           33.8MB Â± 82.1KB                              33.7MB â€¦ 33.9MB                                    1 (20%)        âš¡- 17.7% Â±  1.0%
  cpu_cycles         1.61G  Â±  622M                               1.32G  â€¦ 2.72G                                     0 ( 0%)        âš¡- 54.4% Â± 25.8%
  instructions       1.81G  Â± 4.20K                               1.81G  â€¦ 1.81G                                     0 ( 0%)        âš¡- 75.5% Â±  0.0%
  cache_references   84.4M  Â± 6.32M                               80.3M  â€¦ 95.6M                                     0 ( 0%)        ðŸ’©+ 41.6% Â± 16.3%
  cache_misses        905K  Â±  117K                                789K  â€¦ 1.09M                                     0 ( 0%)        âš¡- 80.5% Â±  6.5%
  branch_misses      11.0M  Â± 16.1M                               3.69M  â€¦ 39.7M                                     0 ( 0%)          +  0.6% Â± 215.7%
Benchmark 3 (7 runs): ./narser/bin/narser pack linux
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           824ms Â± 21.5ms                               800ms â€¦  859ms                                    0 ( 0%)        âš¡- 57.7% Â±  1.7%
  peak_rss           7.04MB Â± 64.0KB                              6.95MB â€¦ 7.08MB                                    0 ( 0%)        âš¡- 82.9% Â±  0.8%
  cpu_cycles          346M  Â± 14.1M                                332M  â€¦  366M                                     0 ( 0%)        âš¡- 90.2% Â±  1.4%
  instructions        518M  Â±  519                                 518M  â€¦  518M                                     0 ( 0%)        âš¡- 93.0% Â±  0.0%
  cache_references   27.4M  Â±  522K                               26.6M  â€¦ 28.0M                                     0 ( 0%)        âš¡- 54.0% Â±  4.1%
  cache_misses       3.50M  Â±  396K                               3.07M  â€¦ 4.14M                                     0 ( 0%)        âš¡- 24.7% Â± 12.4%
  branch_misses      1.25M  Â±  103K                               1.15M  â€¦ 1.39M                                     0 ( 0%)        âš¡- 88.5% Â±  9.5%
poop "./nix/bin/nix nar ls linux.nar /" "./lix/bin/nix nar ls linux.nar /" "./narser/bin/narser ls linux.nar /" "./narz/bin/narz ls linux.nar /"
Benchmark 1 (3 runs): ./nix/bin/nix nar ls linux.nar /
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          2.53s  Â± 2.69ms                              2.53s  â€¦ 2.53s                                     0 ( 0%)        0%
  peak_rss           3.75GB Â±  206KB                              3.75GB â€¦ 3.75GB                                    0 ( 0%)        0%
  cpu_cycles         2.48G  Â± 10.3M                               2.48G  â€¦ 2.50G                                     0 ( 0%)        0%
  instructions       1.21G  Â±  101K                               1.21G  â€¦ 1.21G                                     0 ( 0%)        0%
  cache_references    128M  Â± 1.59M                                126M  â€¦  129M                                     0 ( 0%)        0%
  cache_misses       71.0M  Â±  198K                               70.8M  â€¦ 71.2M                                     0 ( 0%)        0%
  branch_misses      1.99M  Â±  319K                               1.74M  â€¦ 2.35M                                     0 ( 0%)        0%
Benchmark 2 (3 runs): ./lix/bin/nix nar ls linux.nar /
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          2.63s  Â± 19.1ms                              2.62s  â€¦ 2.65s                                     0 ( 0%)        ðŸ’©+  4.0% Â±  1.2%
  peak_rss           3.73GB Â±  101KB                              3.73GB â€¦ 3.73GB                                    0 ( 0%)          -  0.4% Â±  0.0%
  cpu_cycles         2.89G  Â± 22.7M                               2.87G  â€¦ 2.91G                                     0 ( 0%)        ðŸ’©+ 16.2% Â±  1.6%
  instructions       2.16G  Â± 7.37K                               2.16G  â€¦ 2.16G                                     0 ( 0%)        ðŸ’©+ 79.1% Â±  0.0%
  cache_references    128M  Â± 1.05M                                128M  â€¦  130M                                     0 ( 0%)          +  0.5% Â±  2.4%
  cache_misses       70.5M  Â±  215K                               70.3M  â€¦ 70.7M                                     0 ( 0%)          -  0.7% Â±  0.7%
  branch_misses      4.22M  Â±  434K                               3.91M  â€¦ 4.72M                                     0 ( 0%)        ðŸ’©+112.3% Â± 43.4%
Benchmark 3 (16 runs): ./narser/bin/narser ls linux.nar /
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           314ms Â± 3.80ms                               306ms â€¦  322ms                                    0 ( 0%)        âš¡- 87.6% Â±  0.2%
  peak_rss            404MB Â± 44.8KB                               404MB â€¦  404MB                                    2 (13%)        âš¡- 89.2% Â±  0.0%
  cpu_cycles          216M  Â± 1.46M                                214M  â€¦  219M                                     0 ( 0%)        âš¡- 91.3% Â±  0.2%
  instructions        287M  Â±  369                                 287M  â€¦  287M                                     0 ( 0%)        âš¡- 76.2% Â±  0.0%
  cache_references   3.85M  Â±  192K                               3.49M  â€¦ 4.24M                                     4 (25%)        âš¡- 97.0% Â±  0.6%
  cache_misses       71.0K  Â± 3.97K                               67.1K  â€¦ 83.2K                                     1 ( 6%)        âš¡- 99.9% Â±  0.1%
  branch_misses       492K  Â± 4.61K                                484K  â€¦  499K                                     0 ( 0%)        âš¡- 75.3% Â±  7.3%
Benchmark 4 (3 runs): ./narz/bin/narz ls linux.nar /
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          3.75s  Â± 42.4ms                              3.72s  â€¦ 3.80s                                     0 ( 0%)        ðŸ’©+ 48.3% Â±  2.7%
  peak_rss           1.84GB Â±    0                                1.84GB â€¦ 1.84GB                                    0 ( 0%)        âš¡- 51.0% Â±  0.0%
  cpu_cycles          889M  Â± 15.7M                                876M  â€¦  906M                                     0 ( 0%)        âš¡- 64.2% Â±  1.2%
  instructions        864M  Â±  114                                 864M  â€¦  864M                                     0 ( 0%)        âš¡- 28.5% Â±  0.0%
  cache_references   5.08M  Â±  695K                               4.53M  â€¦ 5.86M                                     0 ( 0%)        âš¡- 96.0% Â±  2.2%
  cache_misses        134K  Â± 21.5K                                116K  â€¦  158K                                     0 ( 0%)        âš¡- 99.8% Â±  0.5%
  branch_misses      1.97M  Â± 48.4K                               1.94M  â€¦ 2.03M                                     0 ( 0%)          -  0.8% Â± 26.0%
poop "./nix/bin/nix nar ls linux.nar / -R" "./lix/bin/nix nar ls linux.nar / -R" "./narser/bin/narser ls linux.nar / -R" "./narz/bin/narz ls linux.nar / -r"
Benchmark 1 (3 runs): ./nix/bin/nix nar ls linux.nar / -R
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          2.76s  Â± 10.9ms                              2.75s  â€¦ 2.77s                                     0 ( 0%)        0%
  peak_rss           3.75GB Â±  240KB                              3.75GB â€¦ 3.75GB                                    0 ( 0%)        0%
  cpu_cycles         2.86G  Â± 17.0M                               2.84G  â€¦ 2.87G                                     0 ( 0%)        0%
  instructions       1.91G  Â±  870K                               1.91G  â€¦ 1.91G                                     0 ( 0%)        0%
  cache_references    137M  Â± 2.74M                                136M  â€¦  141M                                     0 ( 0%)        0%
  cache_misses       73.3M  Â±  209K                               73.1M  â€¦ 73.5M                                     0 ( 0%)        0%
  branch_misses      3.98M  Â±  134K                               3.84M  â€¦ 4.11M                                     0 ( 0%)        0%
Benchmark 2 (3 runs): ./lix/bin/nix nar ls linux.nar / -R
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          2.90s  Â± 8.43ms                              2.89s  â€¦ 2.91s                                     0 ( 0%)        ðŸ’©+  5.2% Â±  0.8%
  peak_rss           3.73GB Â± 95.4KB                              3.73GB â€¦ 3.73GB                                    0 ( 0%)          -  0.4% Â±  0.0%
  cpu_cycles         3.37G  Â± 12.8M                               3.36G  â€¦ 3.38G                                     0 ( 0%)        ðŸ’©+ 17.8% Â±  1.2%
  instructions       3.01G  Â±  778K                               3.01G  â€¦ 3.01G                                     0 ( 0%)        ðŸ’©+ 57.7% Â±  0.1%
  cache_references    131M  Â± 1.07M                                130M  â€¦  132M                                     0 ( 0%)        âš¡-  4.6% Â±  3.4%
  cache_misses       71.1M  Â±  193K                               70.9M  â€¦ 71.3M                                     0 ( 0%)        âš¡-  3.0% Â±  0.6%
  branch_misses      6.20M  Â±  426K                               5.89M  â€¦ 6.69M                                     0 ( 0%)        ðŸ’©+ 55.8% Â± 18.0%
Benchmark 3 (15 runs): ./narser/bin/narser ls linux.nar / -R
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           342ms Â± 3.06ms                               340ms â€¦  351ms                                    1 ( 7%)        âš¡- 87.6% Â±  0.2%
  peak_rss            404MB Â± 46.1KB                               404MB â€¦  404MB                                    2 (13%)        âš¡- 89.2% Â±  0.0%
  cpu_cycles          317M  Â± 1.65M                                314M  â€¦  319M                                     0 ( 0%)        âš¡- 88.9% Â±  0.3%
  instructions        460M  Â±  523                                 460M  â€¦  460M                                     0 ( 0%)        âš¡- 75.9% Â±  0.0%
  cache_references   5.15M  Â±  289K                               4.56M  â€¦ 5.66M                                     0 ( 0%)        âš¡- 96.3% Â±  1.0%
  cache_misses       1.25M  Â± 15.2K                               1.24M  â€¦ 1.28M                                     0 ( 0%)        âš¡- 98.3% Â±  0.1%
  branch_misses       641K  Â± 6.51K                                633K  â€¦  658K                                     0 ( 0%)        âš¡- 83.9% Â±  1.6%
Benchmark 4 (3 runs): ./narz/bin/narz ls linux.nar / -r
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          3.88s  Â± 2.48ms                              3.87s  â€¦ 3.88s                                     0 ( 0%)        ðŸ’©+ 40.5% Â±  0.6%
  peak_rss           1.84GB Â± 59.1KB                              1.84GB â€¦ 1.84GB                                    0 ( 0%)        âš¡- 51.0% Â±  0.0%
  cpu_cycles          962M  Â±  810K                                961M  â€¦  963M                                     0 ( 0%)        âš¡- 66.4% Â±  1.0%
  instructions        945M  Â±  166                                 945M  â€¦  945M                                     0 ( 0%)        âš¡- 50.4% Â±  0.1%
  cache_references   5.70M  Â± 93.7K                               5.59M  â€¦ 5.76M                                     0 ( 0%)        âš¡- 95.9% Â±  3.2%
  cache_misses        860K  Â± 2.04K                                858K  â€¦  861K                                     0 ( 0%)        âš¡- 98.8% Â±  0.5%
  branch_misses      2.17M  Â± 11.7K                               2.15M  â€¦ 2.18M                                     0 ( 0%)        âš¡- 45.6% Â±  5.4%
poop "./nix/bin/nix nar ls linux.nar / -Rl" "./lix/bin/nix nar ls linux.nar / -Rl" "./narser/bin/narser ls linux.nar / -Rl" "./narz/bin/narz ls linux.nar / -rl"
Benchmark 1 (3 runs): ./nix/bin/nix nar ls linux.nar / -Rl
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          2.88s  Â± 16.1ms                              2.86s  â€¦ 2.89s                                     0 ( 0%)        0%
  peak_rss           3.75GB Â± 43.4KB                              3.75GB â€¦ 3.75GB                                    0 ( 0%)        0%
  cpu_cycles         3.27G  Â± 21.5M                               3.25G  â€¦ 3.30G                                     0 ( 0%)        0%
  instructions       2.60G  Â±  186K                               2.60G  â€¦ 2.60G                                     0 ( 0%)        0%
  cache_references    137M  Â±  510K                                137M  â€¦  138M                                     0 ( 0%)        0%
  cache_misses       73.4M  Â± 76.2K                               73.3M  â€¦ 73.5M                                     0 ( 0%)        0%
  branch_misses      7.10M  Â±  545K                               6.69M  â€¦ 7.71M                                     0 ( 0%)        0%
Benchmark 2 (3 runs): ./lix/bin/nix nar ls linux.nar / -Rl
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          3.01s  Â± 10.6ms                              3.00s  â€¦ 3.02s                                     0 ( 0%)        ðŸ’©+  4.4% Â±  1.1%
  peak_rss           3.73GB Â± 74.3KB                              3.73GB â€¦ 3.73GB                                    0 ( 0%)          -  0.4% Â±  0.0%
  cpu_cycles         3.74G  Â± 21.1M                               3.72G  â€¦ 3.76G                                     0 ( 0%)        ðŸ’©+ 14.2% Â±  1.5%
  instructions       3.89G  Â±  457K                               3.89G  â€¦ 3.89G                                     0 ( 0%)        ðŸ’©+ 49.7% Â±  0.0%
  cache_references    134M  Â± 3.66M                                131M  â€¦  138M                                     0 ( 0%)          -  2.4% Â±  4.3%
  cache_misses       71.2M  Â±  114K                               71.1M  â€¦ 71.3M                                     0 ( 0%)        âš¡-  3.0% Â±  0.3%
  branch_misses      6.50M  Â±  190K                               6.32M  â€¦ 6.70M                                     0 ( 0%)          -  8.5% Â± 13.0%
Benchmark 3 (15 runs): ./narser/bin/narser ls linux.nar / -Rl
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           349ms Â± 3.68ms                               343ms â€¦  356ms                                    0 ( 0%)        âš¡- 87.9% Â±  0.3%
  peak_rss            404MB Â± 46.1KB                               404MB â€¦  404MB                                    2 (13%)        âš¡- 89.2% Â±  0.0%
  cpu_cycles          328M  Â± 2.43M                                325M  â€¦  334M                                     0 ( 0%)        âš¡- 90.0% Â±  0.3%
  instructions        499M  Â±  344                                 499M  â€¦  499M                                     0 ( 0%)        âš¡- 80.8% Â±  0.0%
  cache_references   5.41M  Â±  279K                               4.94M  â€¦ 5.87M                                     0 ( 0%)        âš¡- 96.1% Â±  0.3%
  cache_misses       1.37M  Â± 16.6K                               1.35M  â€¦ 1.41M                                     0 ( 0%)        âš¡- 98.1% Â±  0.1%
  branch_misses       690K  Â± 5.50K                                683K  â€¦  700K                                     0 ( 0%)        âš¡- 90.3% Â±  3.6%
Benchmark 4 (3 runs): ./narz/bin/narz ls linux.nar / -rl
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          5.11s  Â± 4.85ms                              5.11s  â€¦ 5.12s                                     0 ( 0%)        ðŸ’©+ 77.4% Â±  0.9%
  peak_rss           1.84GB Â± 74.5KB                              1.84GB â€¦ 1.84GB                                    0 ( 0%)        âš¡- 51.0% Â±  0.0%
  cpu_cycles         1.15G  Â± 4.92M                               1.14G  â€¦ 1.15G                                     0 ( 0%)        âš¡- 65.0% Â±  1.1%
  instructions       1.11G  Â±  173                                1.11G  â€¦ 1.11G                                     0 ( 0%)        âš¡- 57.2% Â±  0.0%
  cache_references   6.58M  Â±  520K                               5.98M  â€¦ 6.92M                                     0 ( 0%)        âš¡- 95.2% Â±  0.9%
  cache_misses        866K  Â± 6.12K                                859K  â€¦  870K                                     0 ( 0%)        âš¡- 98.8% Â±  0.2%
  branch_misses      2.60M  Â± 73.9K                               2.52M  â€¦ 2.65M                                     0 ( 0%)        âš¡- 63.3% Â± 12.4%
poop "./nix/bin/nix nar ls linux.nar / -l" "./lix/bin/nix nar ls linux.nar / -l" "./narser/bin/narser ls linux.nar / -l" "./narz/bin/narz ls linux.nar / -l"
Benchmark 1 (3 runs): ./nix/bin/nix nar ls linux.nar / -l
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          2.52s  Â± 10.7ms                              2.51s  â€¦ 2.53s                                     0 ( 0%)        0%
  peak_rss           3.75GB Â±  126KB                              3.75GB â€¦ 3.75GB                                    0 ( 0%)        0%
  cpu_cycles         2.49G  Â± 15.3M                               2.47G  â€¦ 2.50G                                     0 ( 0%)        0%
  instructions       1.21G  Â± 22.1K                               1.21G  â€¦ 1.21G                                     0 ( 0%)        0%
  cache_references    127M  Â±  416K                                126M  â€¦  127M                                     0 ( 0%)        0%
  cache_misses       70.8M  Â±  363K                               70.5M  â€¦ 71.2M                                     0 ( 0%)        0%
  branch_misses      1.96M  Â±  277K                               1.80M  â€¦ 2.28M                                     0 ( 0%)        0%
Benchmark 2 (3 runs): ./lix/bin/nix nar ls linux.nar / -l
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          2.63s  Â± 6.69ms                              2.62s  â€¦ 2.64s                                     0 ( 0%)        ðŸ’©+  4.4% Â±  0.8%
  peak_rss           3.73GB Â±  167KB                              3.73GB â€¦ 3.73GB                                    0 ( 0%)          -  0.4% Â±  0.0%
  cpu_cycles         2.87G  Â± 10.5M                               2.86G  â€¦ 2.88G                                     0 ( 0%)        ðŸ’©+ 15.5% Â±  1.2%
  instructions       2.16G  Â± 4.40K                               2.16G  â€¦ 2.16G                                     0 ( 0%)        ðŸ’©+ 79.1% Â±  0.0%
  cache_references    129M  Â±  597K                                128M  â€¦  130M                                     0 ( 0%)          +  1.9% Â±  0.9%
  cache_misses       70.4M  Â±  213K                               70.2M  â€¦ 70.6M                                     0 ( 0%)          -  0.6% Â±  1.0%
  branch_misses      3.88M  Â±  102K                               3.76M  â€¦ 3.95M                                     0 ( 0%)        ðŸ’©+ 97.9% Â± 24.1%
Benchmark 3 (17 runs): ./narser/bin/narser ls linux.nar / -l
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time           308ms Â± 1.38ms                               305ms â€¦  310ms                                    0 ( 0%)        âš¡- 87.8% Â±  0.2%
  peak_rss            404MB Â± 51.5KB                               404MB â€¦  404MB                                    3 (18%)        âš¡- 89.2% Â±  0.0%
  cpu_cycles          215M  Â±  987K                                213M  â€¦  217M                                     0 ( 0%)        âš¡- 91.4% Â±  0.3%
  instructions        287M  Â±  517                                 287M  â€¦  287M                                     0 ( 0%)        âš¡- 76.2% Â±  0.0%
  cache_references   3.69M  Â±  184K                               3.41M  â€¦ 3.95M                                     0 ( 0%)        âš¡- 97.1% Â±  0.2%
  cache_misses       70.3K  Â± 6.37K                               62.0K  â€¦ 83.6K                                     0 ( 0%)        âš¡- 99.9% Â±  0.2%
  branch_misses       486K  Â± 3.06K                                481K  â€¦  494K                                     1 ( 6%)        âš¡- 75.2% Â±  6.2%
Benchmark 4 (3 runs): ./narz/bin/narz ls linux.nar / -l
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          3.71s  Â± 16.9ms                              3.69s  â€¦ 3.73s                                     0 ( 0%)        ðŸ’©+ 47.1% Â±  1.3%
  peak_rss           1.84GB Â±    0                                1.84GB â€¦ 1.84GB                                    0 ( 0%)        âš¡- 51.0% Â±  0.0%
  cpu_cycles          874M  Â± 1.09M                                873M  â€¦  875M                                     0 ( 0%)        âš¡- 64.8% Â±  1.0%
  instructions        864M  Â±  181                                 864M  â€¦  864M                                     0 ( 0%)        âš¡- 28.5% Â±  0.0%
  cache_references   4.46M  Â± 96.5K                               4.36M  â€¦ 4.55M                                     0 ( 0%)        âš¡- 96.5% Â±  0.5%
  cache_misses        119K  Â± 1.58K                                117K  â€¦  120K                                     0 ( 0%)        âš¡- 99.8% Â±  0.8%
  branch_misses      1.86M  Â± 81.4K                               1.79M  â€¦ 1.95M                                     0 ( 0%)          -  5.2% Â± 23.6%
poop "./nix/bin/nix nar cat linux.nar /README" "./lix/bin/nix nar cat linux.nar /README" "./narser/bin/narser cat linux.nar /README" "./narz/bin/narz cat linux.nar /README"
Benchmark 1 (3 runs): ./nix/bin/nix nar cat linux.nar /README
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          2.51s  Â± 7.48ms                              2.50s  â€¦ 2.52s                                     0 ( 0%)        0%
  peak_rss           3.73GB Â± 45.3KB                              3.73GB â€¦ 3.73GB                                    0 ( 0%)        0%
  cpu_cycles         2.44G  Â± 10.7M                               2.44G  â€¦ 2.46G                                     0 ( 0%)        0%
  instructions       1.14G  Â± 16.6K                               1.14G  â€¦ 1.14G                                     0 ( 0%)        0%
  cache_references    126M  Â±  362K                                126M  â€¦  126M                                     0 ( 0%)        0%
  cache_misses       69.9M  Â± 73.0K                               69.8M  â€¦ 69.9M                                     0 ( 0%)        0%
  branch_misses      1.62M  Â± 64.0K                               1.56M  â€¦ 1.69M                                     0 ( 0%)        0%
Benchmark 2 (3 runs): ./lix/bin/nix nar cat linux.nar /README
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          2.65s  Â± 14.3ms                              2.64s  â€¦ 2.67s                                     0 ( 0%)        ðŸ’©+  5.8% Â±  1.0%
  peak_rss           3.74GB Â±  193KB                              3.74GB â€¦ 3.74GB                                    0 ( 0%)          +  0.2% Â±  0.0%
  cpu_cycles         2.93G  Â± 33.0M                               2.90G  â€¦ 2.96G                                     0 ( 0%)        ðŸ’©+ 19.7% Â±  2.3%
  instructions       2.17G  Â± 11.7K                               2.17G  â€¦ 2.17G                                     0 ( 0%)        ðŸ’©+ 91.4% Â±  0.0%
  cache_references    129M  Â± 1.09M                                128M  â€¦  130M                                     0 ( 0%)          +  2.1% Â±  1.5%
  cache_misses       70.4M  Â± 82.0K                               70.3M  â€¦ 70.5M                                     0 ( 0%)          +  0.8% Â±  0.3%
  branch_misses      4.41M  Â±  834K                               3.86M  â€¦ 5.37M                                     0 ( 0%)        ðŸ’©+172.1% Â± 82.7%
Benchmark 3 (4 runs): ./narser/bin/narser cat linux.nar /README
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          1.35s  Â± 5.75ms                              1.35s  â€¦ 1.36s                                     0 ( 0%)        âš¡- 46.1% Â±  0.5%
  peak_rss           2.23GB Â± 65.5KB                              2.23GB â€¦ 2.23GB                                    1 (25%)        âš¡- 40.3% Â±  0.0%
  cpu_cycles          492M  Â± 2.26M                                490M  â€¦  495M                                     0 ( 0%)        âš¡- 79.9% Â±  0.6%
  instructions        534M  Â±  223                                 534M  â€¦  534M                                     0 ( 0%)        âš¡- 52.9% Â±  0.0%
  cache_references   17.3M  Â±  193K                               17.2M  â€¦ 17.5M                                     0 ( 0%)        âš¡- 86.2% Â±  0.4%
  cache_misses       2.23M  Â± 12.0K                               2.22M  â€¦ 2.24M                                     0 ( 0%)        âš¡- 96.8% Â±  0.1%
  branch_misses       935K  Â± 15.1K                                921K  â€¦  956K                                     0 ( 0%)        âš¡- 42.3% Â±  5.1%
Benchmark 4 (3 runs): ./narz/bin/narz cat linux.nar /README
  measurement          mean Â± Ïƒ            min â€¦ max           outliers         delta
  wall_time          3.73s  Â± 5.08ms                              3.73s  â€¦ 3.74s                                     0 ( 0%)        ðŸ’©+ 48.8% Â±  0.6%
  peak_rss           1.84GB Â±    0                                1.84GB â€¦ 1.84GB                                    0 ( 0%)        âš¡- 50.7% Â±  0.0%
  cpu_cycles          880M  Â± 3.09M                                878M  â€¦  883M                                     0 ( 0%)        âš¡- 64.0% Â±  0.7%
  instructions        864M  Â± 8.42K                                864M  â€¦  864M                                     0 ( 0%)        âš¡- 23.9% Â±  0.0%
  cache_references   5.05M  Â±  568K                               4.71M  â€¦ 5.71M                                     0 ( 0%)        âš¡- 96.0% Â±  0.9%
  cache_misses        121K  Â± 7.43K                                113K  â€¦  127K                                     0 ( 0%)        âš¡- 99.8% Â±  0.2%
  branch_misses      1.92M  Â± 54.5K                               1.86M  â€¦ 1.96M                                     0 ( 0%)        ðŸ’©+ 18.7% Â±  8.3%

./nix/bin/nix-store --restore out < linux.nar
cmp <(./nix/bin/nix nar pack out) linux.nar
rm -rf out

./lix/bin/nix-store --restore out < linux.nar
cmp <(./nix/bin/nix nar pack out) linux.nar
rm -rf out

./narser/bin/narser unpack linux.nar out
cmp <(./nix/bin/nix nar pack out) linux.nar
rm -rf out

rm -rf out ; time ./nix/bin/nix-store --restore out < linux.nar

real	0m1.582s
user	0m0.365s
sys	0m1.210s
rm -rf out ; time ./nix/bin/nix-store --restore out < linux.nar

real	0m1.574s
user	0m0.343s
sys	0m1.224s
rm -rf out ; time ./nix/bin/nix-store --restore out < linux.nar

real	0m1.588s
user	0m0.359s
sys	0m1.223s

rm -rf out ; time ./lix/bin/nix-store --restore out < linux.nar

real	0m1.751s
user	0m0.508s
sys	0m1.236s
rm -rf out ; time ./lix/bin/nix-store --restore out < linux.nar

real	0m1.772s
user	0m0.482s
sys	0m1.280s
rm -rf out ; time ./lix/bin/nix-store --restore out < linux.nar

real	0m1.752s
user	0m0.463s
sys	0m1.282s

rm -rf out ; time ./narser/bin/narser unpack linux.nar out

real	0m1.592s
user	0m0.372s
sys	0m1.214s
rm -rf out ; time ./narser/bin/narser unpack linux.nar out

real	0m1.606s
user	0m0.369s
sys	0m1.231s
rm -rf out ; time ./narser/bin/narser unpack linux.nar out

real	0m1.599s
user	0m0.368s
sys	0m1.221s
